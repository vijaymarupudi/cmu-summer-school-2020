{"version":3,"sources":["components/skill_panel.js","components/panel.js","components/buttons.js","tutors/Stylus/c_modules/bezier_fit/bezier_fit.js","interactions.js","index.js","components/images/Arrowhead-01-128.png","components/images/Arrowhead-Down-01-128.png","serviceWorker.js","tutors/CTAT/CTAT_Tutor.js","tutors/Stylus/StylusTutor.js","tutors/Stylus/c_modules/bezier_fit/build/js_glue.js","tutors/Stylus/StrokeClassifier.js","App.js","training_handler.js","prior_knowledge.js","eval.js","network_layer.js"],"names":["_react","_interopRequireWildcard","__webpack_require__","_reactNativeWeb","_panel","_interopRequireDefault","deep_equal","require","colorItems","text","items","colors","forEach","item","i","map","t","_","splt","split","length","arr","sep","default","createElement","Text","style","color","textShadowRadius","textShadowColor","_toConsumableArray2","e","reduce","a","b","concat","flat","skill_text_by_action","ButtonPressed","skill","UpdateTextField","match_text_by_action","match","sel","args","Object","entries","acc","kv","push","replace","innerHTML","x","join","SkillPanel","props","_this","_classCallCheck2","this","_possibleConstructorReturn2","_getPrototypeOf2","call","s_skill_set","structure_skills","skill_set","select","starting_selection","state","selected_skill","selected_match","feedback_map","","handleClickSkillItem","bind","_assertThisInitialized2","handleToggleFeedbackButton","initial_select","first_key","keys","id_count","_loop","skills","title","key","index","setState","fnc","rest","callback","evt","_rest","_slicedToArray2","selectSkill","select_callback","interactions_service","send","type","data","_rest2","label","new_feedback_map","console","log","cm","_objectSpread","prevProps","prevState","s_keys","_this2","View","skillbox_styles","content","liststyles","skill_list","ScrollView","header","TouchableHighlight","underlayColor","sectionHeader","skill_eq","action","where_colors","skill_elem","onPress","daisyChain","backgroundColor","matches","mIndex","match_eq","correct","incorrect","match_container","feedback_button","correct_selected","String","fromCharCode","incorrect_selected","flex","filter","skill_info","showsVerticalScrollIndicator","collapsedHeight","how","where","JSON","stringify","when","which","Component","StyleSheet","create","flexDirection","borderRadius","borderWidth","borderColor","flexBasis","paddingTop","flexWrap","paddingLeft","paddingRight","paddingBottom","fontSize","fontWeight","padding","borderBottomWidth","width","textAlign","display","textIndent","defaultProps","Panel","icons","up","down","expanded","expandable","animation","Animated","Value","event","maxHeight","nativeEvent","layout","height","minHeight","expandedHeight","Math","max","initialValue","finalValue","setValue","timing","toValue","duration","start","icon","styles","container","onLayout","_setMinHeight","toggle","titleContainer","Image","buttonImage","source","body","_setMaxHeight","children","margin","overflow","button","query_text","Buttons","current","interactions_state","Waiting_User_Feedback","action_str","callbacks","button_wrapper1","prompt1","next_button","next_button_text","startstate_button","startstate_button_text","button_wrapper2","prompt2","yes_no","yes_button","yes_button_text","no_button","no_button_text","submit_button","submit_button_text","debugmode","button_wrapper3","nools_button","app","changeInteractionMode","tutor_mode","nools_button_text","generateBehaviorProfile","bottom","_defineProperty2","marginTop","marginBottom","alignItems","flexShrink","justifyContent","position","prompt_text","_js_glue","BezierFit","max_stroke_length","arguments","undefined","promise","then","Module","HEAPF64","HEAP32","input_ptr","_malloc","BYTES_PER_ELEMENT","output_ptr","ml_ptr","input_buffer","Float64Array","buffer","output_buffer","ml_buffer","c_module","fitCurve","points","error","nPts","set","n_curves","_c_FitCurve","_c_ML_EncodeCurves","out","it","nxt","round","next","value","fitCurveFeatures","groupStrokes","strokes","values","len_ptr","len_buffer","Int32Array","lens","stroke","stroke_ptr","out_ptr","out_buffer","nGroups","_c_GroupStrokes","L","grp","j","id","_free","_xstate","appendStartHistory","assign","start_state_history","context","tutor","getState","history","stateRecalc","staged_SAI","reward","test_mode","assignFoci","_extends2","foci_of_attention","getCurrentFoci","saiIsCorrectDone","sai_data","selection","forceUseExample","saiData","skipTraining","examples_only","isFreeAuthor","free_author","checkIsCorrect","noApplicableSkills","logError","_kill_this","network_layer","kill_this","toString","clearSkillPanel","skill_panel_props","Applicable Skills","fillSkillPanel","recalcFeedbackMap","match_id","new_label","was_empty","now_empty","assignFeedbackMap","skill_panel","updateFeedbackMap","toggleFeedbackStyle","build_interactions_sm","inh_context","sm","buttons","action_type","tutor_sm","interactive","interactive_sm","non_interactive_sm","Machine","services","sendFeedback","Promise","resolve","sendFeedbackExplicit","applyNextExample","attemptStagedSAI","queryApprentice","checkApprentice","actions","assignResponse","response","assignStagedSAI","assignExample","assignAttempt","assignCorrect","assignIncorrect","clearFeedbackData","skill_applications","assignSkillApplications","responses","printEvent","done","training_service","enterSetStartStateMode","exitSetStartStateMode","enterFeedbackMode","exitFeedbackMode","enterFociMode","exitFociMode","enterTutoringMode","exitTutoringMode","displayCorrectness","printFeedback","applyStagedSAI","applySAI","proposeSAI","confirmProposedSAI","clearProposedSAI","generate_nools","guards","get_machine_actions","initial","states","Start","entry","on","Querying_Apprentice","invoke","src","onDone","target","cond","onError","exit","Applying_Staged_SAI","Applying_Next_Example","Sending_Feedback","Done","Fail","Setting_Start_State","START_STATE_SET","Waiting_Demonstrate_Only","Waiting_Yes_No_Feedback","SKILL_PANEL_FEEDBACK_NONEMPTY","YES_PRESSED","NO_PRESSED","Waiting_Submit_Feedback","SKILL_PANEL_FEEDBACK_EMPTY","SUBMIT_SKILL_FEEDBACK","STAGE_SAI","TOGGLE_FEEDBACK","FEEBACK_MAP_UPDATE","DEMONSTRATE","GEN_NOOLS","Waiting_Select_Foci","FOCI_DONE","Waiting_User_Attempt","ATTEMPT","Checking_Against_Apprentice","_reactDom","serviceWorker","_CTAT_Tutor","_StylusTutor","_App","_relaxedJson","tutor_map","ctatttutor","CTAT_Tutor","ctat","stylustutor","StylusTutor","stylus","safeParse","json","parsed","parse","training_file","urlParams","URLSearchParams","window","location","search","substring","AL_URL","get","OUTER_LOOP_URL","HOST_URL","origin","toLowerCase","use_foci","nools_dir","getWebProps","fetch","str","RJSON","training_json","training_file_props","set_params","obj","removeEmpty","tutorClass","_args","ReactDOM","render","ref","react_interface","document","getElementById","unregister","module","exports","p","config","navigator","publicUrl","URL","process","href","addEventListener","swUrl","isLocalhost","contentType","headers","status","indexOf","ready","registration","reload","registerValidSW","catch","checkValidServiceWorker","Boolean","hostname","register","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","_reactNativeWebWebview","_classAutobind","queryString","path","$","checkTypes","element","types","ok","classList","contains","relative_pos_cache","color_class_map","EXAMPLE","CORRECT","INCORRECT","HIGHLIGHT","START_STATE","DEFAULT","ctat_webview","React","createRef","highlighted_elements","iframe","init_callback","problem_name","prob_obj","nl","html","LOAD_SCREEN","reject","HTML_name","lastIndexOf","domain_name","HTML_PATH","isAbsolute","working_dir","BRD_name","free_authoring","qf_exists","toUpperCase","abs_qf_paths","term_print","qf","question_file","includes","problem_obj","logging_params","dataset_level_name1","dataset_level_type1","SessionLog","Logging","log_service_url","user_guid","agent_name","session_id","custom_fields","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","_step$value","err","return","params","updateContext","graph","commLibrary","hasConfig","uri","onLoad","_triggerWhenInitialized","steps","selections","elm_type","attributes","elm","iframe_content","attr","setAttribute","getElementsByTagName","appendChild","_this3","frameRef","contentWindow","CTAT","CTATCommShell","commShell","ToolTutor","setTimeout","getGraph","getCommLibrary","CTATConfiguration","_inject_element","rel","flashVars","setParams","deliverymode","CTAT_CORRECT","Base","Tutorable","EventType","CTAT_INCORRECT","CTAT_ACTION","sai","detail","getSelection","getInput","colorElement","start_state_elements","remove","handle_user_set_state","removeEventListener","firstChild","lockElement","handleUserInput","contentEditable","getAction","inputs","unlockElement","skill_app","inps","handleUserExample","CTATSAI","_done_clicked_example","handleUserAttempt","_done_clicked_attempt","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","ele","indx","current_foci","highlightElement","splice","unhighlightElement","unhighlightAll","handle_foci_select","stepId","getTracer","getLastResult","getStepID","_this4","currentElement","shouldSkipTraining","_shouldSkipTraining","handle_ctat_feedback","getTransactionID","_this5","applyHint","getDefaultSAI","sel_elm","incorrect_event","CustomEvent","component","bubbles","cancelable","dispatchEvent","sai_obj","processComponentAction","name","CTATShellTools","findComponent","setEnabled","firstElementChild","colorIndex","add","c","mapping","var_str","elem_str","alert","_i","_arr","getExampleTracer","getBestNextLink","proposed_SAI","clearElement","highlightSAI","stageSAI","comp","executeSAI","sendXML","_ref","_ref$encode_relative","encode_relative","_ref$strip_offsets","strip_offsets","_ref$use_offsets","use_offsets","_ref$use_class","use_class","_ref$use_id","use_id","_ref$append_ele","append_ele","_ref$numeric_values","numeric_values","state_array","toArray","state_json","each","idx","offsetParent","dataset","silexId","offsetLeft","offsetTop","offsetWidth","offsetHeight","Number","options","temp","count","rel_objs","elm_list","to_left","to_right","above","below","_elm_list$i","a_n","a_obj","_elm_list$j","b_n","b_obj","dist","grab1st","compare2nd","y","rel_obj","sort","originWhitelist","_reactNativeSvg","_bezier_fit","_StrokeClassifier","get_min","min","apply","bounds","get_max","array_equal","pick","DEFAULT_START_STATE","pen_down","active_elements","n_strokes","mode","check_button_callback","elmUnderPoint","StrokeClassifier","recognize_symbol","setMode","mode_to_color","set_start_state","demonstrate","debug","elements","groups","setStartState","new_strokes","feedback_start_stroke_id","clear","resolve_elm","locked","_typeof2","stroke_ids","s_id","highlight","_i2","_Object$entries","elmobj","_Object$entries$_i","elm1","groupMode","g_coords","filled","c1","_i3","_Object$entries2","_Object$entries2$_i","e2","c2","mW","gridWidth","mH","ts","staged_element","_sai$selection$slice$","slice","_sai$selection$slice$2","gx","gy","minX","minY","maxX","maxY","floor","className","baseVal","parentNode","points_str","clientX","clientY","mouseDown","grid_assignments","_stroke$bounds","min_i","max_i","ceil","min_j","max_j","b_i","b_j","b_area","area","b_str","parseInt","_i4","_Object$entries3","_Object$entries3$_i","extra_info","loc_str","coords","elem_indxs","Set","s","_i5","_Object$entries4","_Object$entries4$_i","Array","from","e_id","old_g","new_g","old_s","new_s","added_s","removed_s","mouseUp","_this$snapStrokesToGr","snapStrokesToGrid","_this$snapStrokesToGr2","_this$groupStrokes","_this$groupStrokes2","_groupDiff","added","removed","removeElement","group","addElement","time","symbol_probs","timeEnd","_ref2","sym","prob","padStart","toFixed","lp","pow","MIN_DIST","bezier_splines","mouseMove","getElementUnderPoint","mouseDownElm","strokeCandidates","minStroke","minDist","MAX_VALUE","_i6","_strokeCandidates","d","_i8","_Object$entries5","_Object$entries5$_i","last_ev","d_strokes","end","fill","range","evaluation","elems","_elemsFromStrokes","ev","ev_strokes","evaluate","getEvaluatable","svg_content","elmUnderCursor","elmUnderCursor_strokes","strokeWidth","Polyline","strokeOpacity","strokeLinecap","pen_color_map","Circle","cx","cy","r","splines","circles","curve_str","Path","cursor","winWidth","winHeight","_i11","_Object$entries6","_Object$entries6$_i","textAnchor","Rect","cursor_map","TouchableWithoutFeedback","onMouseDown","penDown","onMouseUp","penUp","onMouseLeave","onMouseMove","penMove","absoluteFill","Defs","circle_buttons","undo_button","undoStroke","undo_button_text","check_button","check_button_text","done_button","pressDone","done_button_text","TUTOR","foci","feedback","null","loading","zIndex","shadowColor","shadowOffset","shadowOpacity","shadowRadius","right","left","c_BezierFit","readyPromiseResolve","getOwnPropertyDescriptor","defineProperty","configurable","abort","moduleOverrides","hasOwnProperty","arguments_","thisProgram","ENVIRONMENT_IS_WEB","ENVIRONMENT_IS_WORKER","Error","readBinary","scriptDirectory","self","currentScript","substr","importScripts","url","xhr","XMLHttpRequest","open","responseType","Uint8Array","warn","warnOnce","shown","assert","wasmBinary","wasmMemory","setTempRet0","WebAssembly","wasmTable","Table","maximum","ABORT","condition","HEAP8","HEAPU8","HEAPU32","UTF8Decoder","TextDecoder","UTF8ArrayToString","heap","maxBytesToRead","endIdx","endPtr","subarray","decode","u0","u1","u2","ch","UTF8ToString","ptr","stringToUTF8Array","outIdx","maxBytesToWrite","startIdx","u","charCodeAt","lengthBytesUTF8","len","writeArrayToMemory","array","writeAsciiToMemory","dontAddNull","STACK_MAX","DYNAMICTOP_PTR","STACK_BASE","DYNAMIC_BASE","buf","INITIAL_INITIAL_MEMORY","writeStackCookie","checkStackCookie","cookie1","cookie2","callRuntimeCallbacks","shift","func","arg","prototype","Memory","byteLength","Int8Array","Int16Array","Uint16Array","Uint32Array","Float32Array","h16","h8","__ATPRERUN__","__ATINIT__","__ATMAIN__","__ATEXIT__","__ATPOSTRUN__","runtimeInitialized","runtimeExited","imul","fround","clz32","trunc","abs","cos","sin","tan","acos","asin","atan","atan2","exp","sqrt","runDependencies","runDependencyWatcher","dependenciesFulfilled","runDependencyTracking","what","js","stack","jsStackTrace","stackTrace","RuntimeError","FS","init","createDataFile","createPreloadedFile","createLazyFile","mkdev","registerDevice","analyzePath","loadFilesFromDB","ErrnoError","hasPrefix","prefix","startsWith","dataURIPrefix","isDataURI","filename","createExportWrapper","fixedasm","displayName","asm","wasmBinaryFile","getBinary","___wasm_call_ctors","___exception_infos","__ZSt18uncaught_exceptionv","uncaught_exceptions","SYSCALLS","mappings","buffers","printChar","stream","curr","varargs","getStr","get64","low","high","ENV","getEnvStrings","strings","env","USER","LOGNAME","PATH","PWD","HOME","LANG","languages","__isLeapYear","year","__arraySum","sum","__MONTH_DAYS_LEAP","__MONTH_DAYS_REGULAR","__addDays","date","days","newDate","Date","getTime","leap","getFullYear","currentMonth","getMonth","daysInCurrentMonth","getDate","setDate","setMonth","setFullYear","_strftime","maxsize","format","tm","tm_zone","tm_sec","tm_min","tm_hour","tm_mday","tm_mon","tm_year","tm_wday","tm_yday","tm_isdst","tm_gmtoff","pattern","EXPANSION_RULES_1","%c","%D","%F","%h","%r","%R","%T","%x","%X","%Ec","%EC","%Ex","%EX","%Ey","%EY","%Od","%Oe","%OH","%OI","%Om","%OM","%OS","%Ou","%OU","%OV","%Ow","%OW","%Oy","rule","RegExp","WEEKDAYS","MONTHS","leadingSomething","digits","character","leadingNulls","compareByDay","date1","date2","sgn","compare","getFirstWeekStartDate","janFourth","getDay","getWeekBasedYear","thisDate","janFourthThisYear","janFourthNextYear","firstWeekStartThisYear","firstWeekStartNextYear","EXPANSION_RULES_2","%a","%A","%b","%B","%C","%d","%e","%g","%G","%H","%I","twelveHour","%j","%m","%M","%n","%p","%S","%t","%u","%U","janFirst","firstSunday","endDate","februaryFirstUntilEndMonth","%V","daysDifference","%w","%W","firstMonday","%y","%Y","%z","off","ahead","%Z","%%","bytes","stringy","u8array","numBytesWritten","intArrayFromString","calledRun","asmLibraryArg","__cxa_allocate_exception","size","__cxa_atexit","a0","a1","unshift","__cxa_throw","destructor","adjusted","refcount","caught","rethrown","__handle_stack_overflow","__map_file","pathname","___errno_location","__sys_munmap","addr","info","flags","allocated","malloc","syscallMunmap","emscripten_get_sbrk_ptr","emscripten_memcpy_big","dest","num","copyWithin","emscripten_resize_heap","requestedSize","abortOnCannotGrowMemory","environ_get","__environ","environ_buf","bufSize","string","environ_sizes_get","penviron_count","penviron_buf_size","fd_close","fd","fd_read","iov","iovcnt","pnum","getStreamFromFD","doReadv","fd_seek","offset_low","offset_high","whence","newOffset","fd_write","memory","$i","strftime_l","table","wasi_snapshot_preview1","receiveInstance","instance","clearInterval","removeRunDependency","setInterval","dep","trueModule","receiveInstantiatedSource","output","instantiateArrayBuffer","receiver","credentials","binary","instantiate","reason","instantiateStreaming","instantiateAsync","createWasm","run","doRun","cb","postRun","preRun","runCaller","pop","tf","_tfjsBackendWasm","alphabet","setWasmPath","tf_promise","setBackend","all","model_promise","_asyncToGenerator2","_regenerator","mark","_callee","wrap","_context","prev","loadLayersModel","model","sent","stop","normalize_strokes","minx","miny","maxx","maxy","out_strokes","inp","curve_features","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","feats","input","tensor","DocumentType","float32","predict","res","_argsort","k","sorted","val","argsort","_argsort2","probs","indicies","_skill_panel","_buttons","_interactions","_training_handler","_network_layer","_object","_reactNativeLoadingSpinnerOverlay","ALReactInterface","onInteractionTransition","NetworkLayer","default_props","buttons_props","tutor_props","training_description","agent_description","problem_description","standard_props","Interactions_Machine_State","Training_Machine_State","o1","o2","diff","shallow_diff","wd","interactions_sm","problem_props","training_machine","build_training_sm","interpret","onTransition","onTrainingTransition","subscribe","setTutorMode","setInteractive","setFreeAuthor","ground_truth_path","out_dir","f","t_context","_state","resp","in_list","line","to_json_list","resps","requests","lower_display","Tutor","controls","prompt","ctat_tutor","overlay","visible","textContent","textStyle","spinnerTextStyle","top","overlay_text","flexGrow","justifySelf","file_params","agent_params","problem_props_dict","Loading_Training_File","Serving_Training_Sets","Serving_Agents","Creating_Agent","Handling_Prior_Knowledge","Serving_Problems","Waiting_Problem_Load","Training","PROBLEM_DONE","CHANGE_INTERACTION_MODE","All_Done","load_training_file","serve_next_training_set","serve_next_agent","create_agent","createAgent","serve_next_problem","load_problem","handle_prior_knowledge","start_training_interaction","assignAgentId","agent_id","allDone","assignInteractionSM","sendProblemDone","iteratorEmpty","_prior_knowledge","_eval","_randomJs","Random","CTATGuid","s4","random","guid","training_iterator","agent_iterator","evalJSONFunc","_x","_x2","parseOuterLoopController","_callee4","problem_set","_args4","_context4","abrupt","outer_loop_controller","_callee2","agent_obj","rep_count_str","prior_knowledge","other_data","_context2","_rep_count","request_history","agent_type","other_agent_data","agent_start_time","_x5","_x6","applyPriorKnowledge","problem_iterator","_next_prob_obj","_callee6","_context6","_ref4","_callee5","fp_clone","_context5","newOuterLoopController","nextProblem","_x13","_x14","_ref3","_callee3","_yield$_next_prob_obj","_yield$_next_prob_obj2","_yield$_next_prob_obj3","_yield$_next_prob_obj4","_context3","_x11","_x12","loadProblem","pass_along_context","withContext","new_context","spec","iter","type_map","_path","bestintersect","pk_iter","cache_folder","cache","cache_content","basename","statusText","train_now","_papaparse","registedFunctions","concatenate","shuffle","sample","glob","from_file","estimate_Pik","gen_pretraining","gen_pivot_table","mirror_students","abs_path","g","rez","t0","finish","n","glob_key","default_obj","m","o","backcast","_callee7","_context7","p_parse_csv","csv","pre_fetch","papa","read_afm_table","_callee9","file","_context9","delimiter","dynamicTyping","_callee8","kc_table","stu_table","kc_json","stu_json","_context8","_x28","exact_align","_callee10","fo_err_by_kc","_yield$read_afm_table","_yield$read_afm_table2","stu_intr","row","table_path","error_table","curve_by_kc","opps_by_kc","kc","curve","minIndex","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_iterator4","_step4","_step4$value","_context10","t1","t2","t3","Infinity","t4","_callee11","new_out","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_iterator5","_step5","_context11","_callee12","only_attr","only_str","pivot_table","problem_pool","onlys_map","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_iterator6","_step6","any","only_steps","_args12","_context12","_callee13","human_transactions","human_afm_stats","pool_agent_error_table","Pik_method","problem_key","kc_model","KCs","human_problems","human_path_map","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_iterator7","_step7","step_pivot_table","pool_agent_problems","human_prob_seq","std","student","seq","new_seq","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_iterator8","_step8","full_path","opp_table","student_id","stu_seq","pretraining","_context13","transaction_file","download","step","sequence","view","pv","t5","method","afm_stats","opportunities","unparse","_callee14","pivot_table_csv","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_iterator9","_step9","path_map","_iteratorNormalCompletion10","_didIteratorError10","_iteratorError10","_iterator10","_step10","kc_model_id","csv_str","_context14","kc_str","step_id","Selection","step_id_set","append","Problem Path","KC","newline","write_file","_callee15","_context15","_callee16","_context16","isArray","ignoreKeys","wait","ms","fetch_retry","_x3","JSON_HEADERS","Accept","Content-Type","project_id","next_state","rhs_id","sendTrainingData","updateOuterLoopController","add_skill_info","message","out_data","problems","dir","elapse","start_data","elapse_minutes","whatever","completeness_data","kwargs","_x4","outer_loop_type","outer_loop_args","update_data"],"mappings":"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","file":"static/js/main.de36bf45.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { TouchableHighlight,ScrollView,View, Text, StyleSheet } from \"react-native\";\nimport Panel from './panel.js'\nvar deep_equal = require('fast-deep-equal');\n\n\n\nfunction cramBtw(arr,sep){\n  return [...arr].map((e, i) => i < arr.length - 1 ? [e, sep] : [e]).reduce((a, b) => a.concat(b))\n}\n\nfunction colorItems(text, items, colors){\n  text = [text]\n  // for(var item in colorMap) {\n  items.forEach(function(item,i) {\n    text = text.map((t,_) => {\n      if(typeof t == 'string'){\n        let splt = t.split(item)\n        if(splt.length > 1){\n         return cramBtw(splt,<Text style={\n            {\"color\":colors[i],'textShadowRadius':3, 'textShadowColor': colors[i]}}>{item}</Text>);\n         // return cramBtw(splt,<Text style={{\"color\":colorMap[item]}}>{item}</Text>);\n        }\n      }\n      return t;\n    }).flat();\n  });\n  return text;\n}\n\nconst skill_text_by_action ={\n  ButtonPressed: function(skill,colors) {\n    return \"Press Button\"\n  },\n  UpdateTextField: function(skill,colors) {\n    return skill['name'] || skill['how'];\n  }\n\n};\n\nconst match_text_by_action = {\n  UpdateTextField: function(match,colors) {\n    let sel = match['mapping']['?sel']\n    let args =  Object.entries(match['mapping']).reduce(\n      function (acc,kv) {if(kv[0] !== \"?sel\") {acc.push(kv[1])}return acc;},[]);\n    // console.log(sel,args)\n    sel = sel.replace(\"?ele-\",\"\")\n    args = args.map(x => x.replace(\"?ele-\",\"\"))\n    let innerHTML = /*String.fromCharCode(8226) +*/ \"(\" + args.join(\", \") + \"): \" + sel + \"->\" + (match['inputs'] && match['inputs']['value']);\n    innerHTML = colorItems(innerHTML,[sel].concat(args), colors); // innerHTML = cramBtw( innerHTML.split(\"A1\"),<Text style={{\"color\":\"red\"}}>A1</Text>);\n    return innerHTML;\n  },\n  ButtonPressed: function(match,colors) {\n    return \"Press: \" + match['mapping']['?sel'].replace(\"?ele-\",\"\");\n  }                          \n}\n\n\nclass SkillPanel extends Component{\n  constructor(props){\n        super(props);\n\n\n        this.s_skill_set = this.structure_skills(props.skill_set)\n        \n        var select = this.starting_selection();\n        // const selected_skill = 0;\n        this.state = {\n          selected_skill: select,\n          selected_match: select,\n          feedback_map:{},\n          s_skill_set : {\"\" : []}\n        };\n      this.handleClickSkillItem = this.handleClickSkillItem.bind(this)\n      this.handleToggleFeedbackButton = this.handleToggleFeedbackButton.bind(this)\n  }\n\n  starting_selection(){\n    if(this.props.initial_select == \"first\"){\n      let first_key = Object.keys(this.s_skill_set)[0];\n      return first_key==null ? null : this.s_skill_set[first_key][0];\n    }\n\n  }\n\n  structure_skills(skill_set){\n    const s_skill_set = {}\n    var id_count = 0;\n    for (var title in skill_set) {\n      let skills = {};\n\n      for (var i in skill_set[title]){\n        var skill = skill_set[title][i]\n        if(!(skill['how'] in skills)){\n          \n          skills[skill['how']] = skill;\n          skills[skill['how']]['matches'] = []\n          // delete skills[skill['how']][\"mapping\"]\n\n        }\n        skill['_id'] = id_count++;\n        skills[skill['how']]['matches'].push(skill);\n\n      // console.log(skills)\n      s_skill_set[title] = Object.keys(skills).map((key,index)=>skills[key]);\n      }\n\n    }\n    return s_skill_set\n    // console.log(skill_set)\n  }\n\t\n\n  selectSkill(skill,match){\n    if(!match){\n      match = skill\n    }\n    this.setState({selected_skill: skill,\n                    selected_match: match})     \n  }\n\n  daisyChain(fnc, rest,callback){\n    return (evt) => {fnc(evt,rest,callback)};\n  }\n  handleClickSkillItem(evt,rest,callback){\n    const [skill,match] = rest;\n    // console.log(title,index,match)\n    // this.selectSkill(this.props.skill_set[title][index],match)\n    this.selectSkill(skill,match)\n    // console.log(this.props.select_callback)\n    if(this.props.select_callback){\n      this.props.interactions_service.send({type :\"STAGE_SAI\",data : match || skill})\n      // this.props.select_callback(match || skill)   \n    }\n    if(callback){\n      callback(rest)\n    }\n    \n  }\n  handleToggleFeedbackButton(evt,rest){\n    const [skill,match,label] = rest;\n    this.props.interactions_service.send(\n        {type: \"TOGGLE_FEEDBACK\",skill:skill, match:match, label:label})\n    // console.log(skill)\n    // console.log(match)\n    // console.log(label)\n    // let match_id = match[\"_id\"];\n    // // console.log(match[\"_id\"])\n    // // console.log(this.state.feedback_map)\n    // let new_label = (this.state.feedback_map[match_id]\n    //        && label === this.state.feedback_map[match_id]) ? null : label;\n    \n    // let new_feedback_map = {...this.state.feedback_map};\n    // if(new_label === null){\n    //   delete new_feedback_map[match_id];\n    // }else{\n    //   new_feedback_map[match_id] = new_label;\n    // }\n  }\n\n  updateFeedbackMap(new_feedback_map){\n    \n    // let was_empty = Object.keys(this.state.feedback_map).length === 0\n    // let now_empty = Object.keys(new_feedback_map).length === 0\n    // if(!was_empty && now_empty){\n    //   console.log(\"EMPTY\")\n    //   this.props.interactions_service.send(\"SKILL_PANEL_FEEDBACK_EMPTY\")\n    // }else if(was_empty && !now_empty){\n    //   console.log(\"NOT EMPTY\")\n    //   this.props.interactions_service.send(\"SKILL_PANEL_FEEDBACK_NONEMPTY\")\n    // }\n\n    this.setState({feedback_map : new_feedback_map});\n\n    console.log(new_feedback_map)\n\n    // if(this.props.correctness_callback){\n    //   this.props.correctness_callback(match || skill,new_label)\n    // }\n  }\n\n  queuedSkillApplicationFeedback(){\n    var feedback_queue = {}\n    let cm = {...this.state.feedback_map}\n    for (var key in cm) {\n      cm[key] = cm[key] === \"correct\" ? 1 :-1 \n    }\n    return cm\n  }\n\n  componentDidUpdate(prevProps, prevState){\n    if(!deep_equal(prevProps.skill_set,this.props.skill_set)){\n      let s_skill_set = this.structure_skills(this.props.skill_set)\n      this.setState({\n        feedback_map: {},\n        s_skill_set : s_skill_set\n      })\n\n      let s_keys = Object.keys(s_skill_set)\n      if(s_keys.length > 0){// && !this.state.selected_skill || !this.state.selected_skill){\n        let select = s_skill_set[s_keys[0]][0]\n        this.setState({\n            selected_skill: select,\n            selected_match: select,\n        })\n      }else{\n        this.setState({\n            selected_skill: null,\n            selected_match: null,\n        })\n      }\n    }\n    // }\n  }\n\n\n\trender(){\n    // console.log(this.s_skill_set)\n    // this.s_skill_set = this.structure_skills(this.props.skill_set)\n    \n    \n\n    // this.state = \n\t\treturn (\n\t\t    <View style={skillbox_styles.content}>\n\t\t      \n          <View style={liststyles.skill_list}>\n          <ScrollView>\n            {Object.keys(this.state.s_skill_set).map((title, index) => {\n              let header = <TouchableHighlight underlayColor=\"#fff\" >\n                 <Text style={liststyles.sectionHeader}>{title}</Text>\n              </TouchableHighlight> \n              // let itemStyle = liststyles.item;\n              let rest = this.state.s_skill_set[title].map((skill, index) => {\n                  const skill_eq = this.state.selected_skill && this.state.selected_skill['_id']===skill['_id'];\n                  // console.log(skill_eq)\n                  // console.log(\"IS\",itemStyle)\n                  // console.log(\"EQ\",eq, index, (eq ? itemStyle.selectColor : itemStyle.backgroundColor))\n                  let innerHTML = (skill_text_by_action[skill.action] || skill_text_by_action[\"UpdateTextField\"])(skill,this.props.where_colors)\n                  let skill_elem = <TouchableHighlight underlayColor=\"#f1f1f1\"\n                             onPress={ this.daisyChain(this.handleClickSkillItem,[skill],\n                                                       skill['callback']) } >\n                            <Text style={[liststyles.item, skill_eq && liststyles.selected_skill]} \n                            backgroundColor={\"#ff00ffff\"}>{\n                              innerHTML}</Text>\n                        </TouchableHighlight>\n                  let matches = [];\n                  if(\"matches\" in skill){\n                      // console.log(skill[\"matches\"])\n                      matches = skill[\"matches\"].map((match,mIndex) => {\n                        if('mapping' in match){\n                          const match_eq = this.state.selected_match && this.state.selected_match['_id']===match['_id'];\n                          \n                          // let sel = match['mapping']['?sel']\n                          // let args =  Object.entries(match['mapping']).reduce(\n                          //   function (acc,kv) {if(kv[0] != \"?sel\") {acc.push(kv[1])}return acc;},[]);\n                          // console.log(sel,args)\n                          // sel = sel.replace(\"?ele-\",\"\")\n                          // args = args.map(x => x.replace(\"?ele-\",\"\"))\n                          // let innerHTML = String.fromCharCode(8226) + \"(\" + args.join(\", \") + \"):\" + sel + \"->\" + (match['inputs'] && match['inputs']['value']);\n                          // innerHTML = colorItems(innerHTML,{\"B1\":'red',\"A1\":'green'}); // innerHTML = cramBtw( innerHTML.split(\"A1\"),<Text style={{\"color\":\"red\"}}>A1</Text>);\n                          // console.log(match_text_by_action,match.action)\n                          let innerHTML = (match_text_by_action[match.action] || match_text_by_action[\"UpdateTextField\"])(match,this.props.where_colors)\n                          let correct = this.state.feedback_map[match[\"_id\"]] === \"correct\";\n                          let incorrect = this.state.feedback_map[match[\"_id\"]] === \"incorrect\";\n                          // console.log(this.state.feedback_map)\n                          let match_view = <View style={liststyles.match_container}> \n\n                            <TouchableHighlight underlayColor=\"#919191\"  \n                            onPress = {this.daisyChain(this.handleToggleFeedbackButton,[skill,match,\"correct\"])}\n\n                                 // onPress={ this.daisyChain(this.handleClickSkillItem,[skill,match], \n                                                           // match['callback'])} >\n                                                           >\n                                <Text style={[liststyles.feedback_button, correct && liststyles.correct_selected]}>{\n                                  String.fromCharCode(10004)\n                                  // innerHTML\n                                  // String.fromCharCode(8226)+ \" \"+Object.values(match['mapping'] || {}).map(.join(\", \")\n                                }</Text>\n                            </TouchableHighlight>\n                            <TouchableHighlight underlayColor=\"#919191\"  \n                            onPress = {this.daisyChain(this.handleToggleFeedbackButton,[skill,match,\"incorrect\"])}\n                                 // onPress={ this.daisyChain(this.handleClickSkillItem,[skill,match], \n                                                           // match['callback'])} >\n                                                           >\n                                <Text style={[liststyles.feedback_button, incorrect && liststyles.incorrect_selected]}>{\n                                  String.fromCharCode(10006)\n                                  // innerHTML\n                                  // String.fromCharCode(8226)+ \" \"+Object.values(match['mapping'] || {}).map(.join(\", \")\n                                }</Text>\n                            </TouchableHighlight>\n\n                            \n                            <TouchableHighlight underlayColor=\"#919191\"\n                                  style={{'flex': 1}}\n                                 onPress={ this.daisyChain(this.handleClickSkillItem,[skill,match], \n                                                           match['callback'])} >\n                                <Text style={[liststyles.match,skill_eq && match_eq && liststyles.selected_match]}>{\n                                  innerHTML\n                                  // String.fromCharCode(8226)+ \" \"+Object.values(match['mapping'] || {}).map(.join(\", \")\n                                }</Text>\n                            </TouchableHighlight>\n                          </View>\n\n                          // let match_view = <View> {match_elem} </View>\n                          // console.log(typeof match_elem)\n                          return match_view;\n                        }else{\n                          return null;\n                        }\n                      })\n                  }\n                  matches = matches.filter(x => x != null); //remove undefinded\n                  return [skill_elem].concat(matches);\n                })\n              // console.log(title)\n              // console.log(header)\n              // console.log(rest)\n              return [header].concat(rest)\n              })\n            }\n          </ScrollView>\n\n            \n\n          </View>\n\n          \n\t\t      <ScrollView style={liststyles.skill_info}\n\t\t                 showsVerticalScrollIndicator={true}\n\t\t                 \n\t\t                 // contentInset= {{top: 20, left: 20, bottom: 0, right: 20}}\n\t\t                 >\n\t\t        <Panel title=\"How\"\n\t\t        \t   collapsedHeight={this.props.collapsedHeight.how}>\n\t\t          <Text>{this.state.selected_skill && this.state.selected_skill.how}</Text>\n\t\t        </Panel>\n\t\t        <Panel title=\"Where\"\n\t\t        \t   collapsedHeight={this.props.collapsedHeight.where}>\n\t\t          <Text>{this.state.selected_skill && JSON.stringify(this.state.selected_skill.where, null, 2)}</Text>\n\t\t        </Panel>\n\t\t        <Panel title=\"When\"\n\t\t        \t   collapsedHeight={this.props.collapsedHeight.when}>\n\t\t          <Text>{this.state.selected_skill && this.state.selected_skill.when}</Text>\n\t\t        </Panel>\n\t\t        <Panel title=\"Which\"\n\t\t        \t   collapsedHeight={this.props.collapsedHeight.which}>\n\t\t          <Text>{this.state.selected_skill && this.state.selected_skill.which}</Text>\n\t\t        </Panel>\n\n\t\t      </ScrollView>\n          \n\n\n\n\n\t\t    </View>  \n\t\t  );\n\t}\n\n}\n\nconst skillbox_styles = StyleSheet.create({\n  content: {\n    // \"display\": \"flex\",\n    flex : 1,\n\n    // \"height\" : \"100%\",\n    // \"flexDirection\":\"row-reverse\",\n    \"flexDirection\":\"row\",\n    \n    backgroundColor: \"#F5FCFF\",\n    // \"width\":\"100%\",\n    borderRadius: 4,\n    borderWidth: 0.5,\n    borderColor: '#d6d7da',\n    \n  },\n});\n\nconst liststyles = StyleSheet.create({\n  skill_list: {\n   flexBasis : 250,\n   paddingTop: 10,\n  },\n  skill_info: {\n   flex: 1,\n   paddingTop: 10,\n  },\n  sectionHeader: {\n    flexWrap: 'wrap',\n    paddingTop: 6,\n    paddingLeft: 10,\n    paddingRight: 10,\n    paddingBottom: 2,\n    fontSize: 15,\n    fontWeight: 'bold',\n    backgroundColor: \"'rgba(247,247,247,1.0)'\",\n  },\n  selected_skill:{\n    backgroundColor: \"#93e4ec\",\n  },\n  \n\n  item: {\n    flexWrap: 'wrap',\n    padding: 4,\n    paddingLeft: 6,\n    fontSize: 16,\n    borderBottomWidth: 1,\n    borderColor: 'gray',\n    backgroundColor: \"'rgba(247,0,0,0.0)'\",\n  },\n  feedback_button:{\n    fontSize: 20,\n    width:27,\n    textAlign:\"center\",\n    borderWidth:.1,\n    borderColor: 'lightgray',\n\n  },\n  incorrect_selected:{\n    // underlayColor:\"#00FF00\",\n    backgroundColor: \"red\",\n  },\n  correct_selected:{\n    backgroundColor: \"limegreen\",\n  },\n  match_container:{\n    display: 'flex',\n    flexDirection: 'row',\n    borderBottomWidth: 1,\n    borderColor: 'gray',\n\n  },\n  match: {\n    flex: 1,\n    flexWrap: 'wrap',\n    // justifySelf: 'stretch',\n    padding: 3,\n    textIndent:5,\n    fontSize: 15,\n    backgroundColor: \"'rgba(252,252,252,1.0)'\",\n\n  },\n  selected_match:{\n    backgroundColor: \"#b3e8ff\",\n  },\n})\n\n// function no_op(){\n// \tvoid 0;\n// }\n\nSkillPanel.propTypes = {\n  collapsedHeight: PropTypes.object,\n  select_callback: PropTypes.func,\n}\n\nSkillPanel.defaultProps = {\n  collapsedHeight: {\"how\": 40,\n\t\t\t\t\t\"where\": 90,\n\t\t\t\t\t\"when\": 90,\n\t\t\t\t\t\"which\": 40,\n\t\t\t\t\t},\n   //\"darkorchid\", \"#feb201\",   \"#ff884d\", \"#52d0e0\", \"#e44161\",  \"#2f85ee\", \"#562ac6\", \"#cc24cc\"\n   where_colors: [  \"darkorchid\",  \"#ff884d\",  \"#52d0e0\", \"#feb201\",  \"#e44161\", \"#ed3eea\", \"#2f85ee\",  \"#562ac6\", \"#cc24cc\"],\n   select_callback: () => {}\n}\n\nexport default SkillPanel;\n\n\n\n            /*<ScrollView >\n            \n                <SectionList \n                  sections={this.props.sections}\n\n                  renderSectionHeader={({section}) =>\n                  <TouchableHighlight underlayColor=\"#f1f1f1\" >\n                   <Text style={liststyles.sectionHeader}>{section.title}</Text>\n                  </TouchableHighlight>\n                  }\n                  renderItem={({item}) => \n                  <TouchableHighlight underlayColor=\"#f1f1f1\"\n                    onPress={this.props.clicky_callback}>\n                   <Text style={liststyles.item}>{item}</Text>\n                  </TouchableHighlight>\n                  }\n\n                  keyExtractor={(item, index) => index}\n                />\n            \n            </ScrollView>*/","import React, { Component } from 'react'\nimport {StyleSheet,Text,View,Image,TouchableHighlight,Animated} from 'react-native'; //Step 1\n\nclass Panel extends Component{\n    constructor(props){\n        super(props);\n\n        this.icons = {     //Step 2\n            'up'    : require('./images/Arrowhead-01-128.png'),\n            'down'  : require('./images/Arrowhead-Down-01-128.png')\n        };\n\n        this.state = {       //Step 3\n            title       : props.title,\n            expanded    : false,\n            expandable  : true,\n            animation   : new Animated.Value(props.collapsedHeight)\n        };\n    }\n\n    _setMaxHeight(event){\n        // console.log(\"maxheight\",event.nativeEvent.layout.height)\n        this.setState({\n            maxHeight   : event.nativeEvent.layout.height,\n            expandable  : event.nativeEvent.layout.height > this.props.collapsedHeight\n        });\n\n    }\n\n    _setMinHeight(event){\n        \n        // console.log(\"minheight\",minHeight,this.props.collapsedHeight)\n        this.setState({\n            minHeight   : event.nativeEvent.layout.height\n        });\n    }\n\n    toggle(){\n        //Step 1\n        // let initialValue, finalValue\n\n        let expandedHeight = Math.max(this.state.maxHeight + this.state.minHeight,this.props.collapsedHeight);\n        let collapsedHeight = Math.max(this.state.minHeight,this.props.collapsedHeight);\n        \n        let initialValue    = this.state.expanded? expandedHeight:collapsedHeight,\n            finalValue      = this.state.expanded? collapsedHeight:expandedHeight;\n        // console.log(finalValue)\n        this.setState({\n            expanded : !this.state.expanded  //Step 2\n        });\n\n        this.state.animation.setValue(initialValue);  //Step 3\n        Animated.timing(     //Step 4\n            this.state.animation,\n            {\n                toValue: finalValue,\n                duration: 50\n            }\n        ).start();  //Step 5\n    }\n\n\n    render(){\n        let icon = this.icons['down'];\n\n        if(this.state.expanded){\n            icon = this.icons['up'];   //Step 4\n        }\n\n        //Step 5\n        return ( \n            <Animated.View\n                style={[styles.container,{height: this.state.animation}]}>\n                <TouchableHighlight \n                    underlayColor=\"#f1f1f1\"\n                    onLayout={this._setMinHeight.bind(this)}\n                    onPress={this.state.expandable ? this.toggle.bind(this):null}> \n                    <View style={styles.titleContainer}>\n                        \n                        <Text style={styles.title}> {this.props.title} </Text> \n\n                    { this.state.expandable &&\n                        <Image\n                            style={styles.buttonImage}\n                            source={icon}\n                        ></Image>\n                    }\n                        \n                    </View>\n                </TouchableHighlight>\n                \n                <View style={styles.body} onLayout={this._setMaxHeight.bind(this)}> \n                    {this.props.children}\n                </View>\n\n            </Animated.View>\n        );\n    }\n}\n\n\nvar styles = StyleSheet.create({\n    container   : {\n        backgroundColor: '#fff',\n        margin:2,\n        overflow:'hidden'\n    },\n    titleContainer : {\n        flexDirection: 'row'\n    },\n    title       : {\n        flex    : 1,\n        padding : 2,\n        color   :'#2a2f43',\n        fontWeight:'bold'\n    },\n    button      : {\n\n    },\n    buttonImage : {\n        width   : 30,\n        height  : 25\n    },\n    body        : {\n        padding     : 5,\n        paddingTop  : 0,\n        paddingBottom  : 20,\n\n    }\n});\n\nexport default Panel;","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { TouchableHighlight,ScrollView,View, Text, StyleSheet } from \"react-native\";\nimport Panel from './panel.js'\nvar deep_equal = require('fast-deep-equal');\n\n\n// import { useMachine } from '@xstate/react';\n\n\nvar text_by_mode = {\"choose_foci\": \"Select any interface elements that were used to compute this result.\",\n                    \"set_start\": \"Set the start state.\",\n                    \"press_next\": \"Press next to continue.\",\n                    \"demonstrate\" : \"Demonstrate the next step.\"\n                    }\n\n// function gen_query_text(){\n//   let h = <Text style={{\"color\":\"darkorchid\",'textShadowRadius':3, 'textShadowColor': \"darkorchid\"}}>{\"highlighted\"}</Text>\n//   return [\"Or specify if the \", h ,\" input is correct for the next step.\"]\n// }\nvar h = <Text style={{\"color\":\"darkorchid\",'textShadowRadius':3, 'textShadowColor': \"darkorchid\"}}>{\"highlighted\"}</Text>\nvar query_text = [\"Or specify if the \", h ,\" input is correct for the next step.\"]\n\n\nclass Buttons extends Component{\n  constructor(props){\n        super(props);\n        \n        // props.mode = \"feedback\"\n        // props.yes_no = false\n        // props.current\n  }\n\n  // componentDidMount() {\n  //   this.service.start();\n  // }\n\n  // componentWillUnmount() {\n  //   this.service.stop();\n  // }\n\n\n\trender(){ \n    // const current = this.props.interactions_state || {\"value\" : \"\"};\n    // const current = this.props.interactions_state || {\"value\" : \"\"};\n    // var service = this.props.interactions_service\n    var current = this.props.interactions_state\n    // console.log(\"CURRENT_MCGIGGER\",this.props.interactions_state)\n    const matches = (x) => current && current.matches ? current.matches(x) : deep_equal(x , {\"Waiting_User_Feedback\":\"Waiting_Yes_No_Feedback\"});\n    console.log(\"props\",this.props)\n    // const matches = (x) => current.matches(x)\n    const send  = (action_str) => {\n      console.log(action_str)\n      console.log(this.props.callbacks)\n      if(this.props.callbacks && action_str in this.props.callbacks){\n        this.props.callbacks[action_str]();\n      }\n      this.props.interactions_service.send(action_str);\n    }\n\n\t\treturn (\n          <View style={styles.container}>\n            <View style={styles.button_wrapper1}>\n              <Text style={styles.prompt1}> \n              {matches(\"Setting_Start_State\") &&\n               \"Set the start state.\"}\n              {(matches(\"Waiting_User_Feedback\")  || matches({\"Waiting_User_Feedback\":\"Waiting_Yes_No_Feedback\"})) &&\n               \"Demonstrate the next step.\"}\n              {matches(\"Explantions_Displayed\") &&\n               \"Press next to continue. Or demonstrate the next step.\"}\n              {matches(\"Waiting_Select_Foci\") &&\n               \"Select any interface elements that were used to compute this result.\"}\n              {matches(\"Waiting_User_Attempt\") &&\n               \"TUTOR MODE\"}\n              \n              </Text>\n\n              {matches(\"Waiting_Select_Foci\") &&\n              <TouchableHighlight style={styles.next_button} underlayColor=\"#CCCCCC\"\n                                onPress={() => send('FOCI_DONE')}>\n               <Text style={styles.next_button_text}>{\"Next\"}</Text>\n              </TouchableHighlight>\n              } \n\n              {matches(\"Explantions_Displayed\") &&\n              <TouchableHighlight style={styles.next_button} underlayColor=\"#CCCCCC\"\n                                onPress={() => send('NEXT_PRESSED')}>\n               <Text style={styles.next_button_text}>{\"Next\"}</Text>\n              </TouchableHighlight>\n              }\n\n              {matches(\"Setting_Start_State\") &&\n              <TouchableHighlight style={styles.startstate_button} underlayColor=\"#CCCCCC\"\n                                onPress={ ()=> send(\"START_STATE_SET\")}>\n               <Text style={styles.startstate_button_text}>{\"Start State Done\"}</Text>\n              </TouchableHighlight>\n              }\n            </View>\n\n            \n            {(matches({\"Waiting_User_Feedback\":\"Waiting_Yes_No_Feedback\"})\n             || matches({\"Waiting_User_Feedback\":\"Waiting_Submit_Feedback\"})) &&\n\n            <View style={styles.button_wrapper2}>\n              <Text style={styles.prompt2}> \n              {matches({\"Waiting_User_Feedback\":\"Waiting_Yes_No_Feedback\"}) && query_text}\n              {matches({\"Waiting_User_Feedback\":\"Waiting_Submit_Feedback\"}) &&\n                \"Or press submit to send the feedback from the skill panel.\"}\n              </Text>\n              {matches({\"Waiting_User_Feedback\":\"Waiting_Yes_No_Feedback\"}) &&\n              <View style={styles.yes_no}>\n                <TouchableHighlight style={styles.yes_button} underlayColor=\"#CCCCCC\" \n                                  onPress={() => send('YES_PRESSED')}>\n                 <Text style={styles.yes_button_text}>{\"YES\"}</Text>\n                </TouchableHighlight>\n                <TouchableHighlight style={styles.no_button} underlayColor=\"#CCCCCC\" \n                                  onPress={() => send('NO_PRESSED')}>\n                 <Text style={styles.no_button_text}>{\"NO\"}</Text>\n                </TouchableHighlight>\n              </View>\n              }\n              {matches({\"Waiting_User_Feedback\":\"Waiting_Submit_Feedback\"}) &&\n                <TouchableHighlight style={styles.submit_button} underlayColor=\"#CCCCCC\" \n                                  onPress={() => send('SUBMIT_SKILL_FEEDBACK')}>\n                 <Text style={styles.submit_button_text}>{\"Submit\"}</Text>\n                </TouchableHighlight>\n              }\n            </View>\n            }\n            \n            {!this.props.debugmode && \n            \n            <View style={styles.button_wrapper3}>\n              {/*<TouchableHighlight style={styles.nools_button} underlayColor=\"#CCCCCC\" \n                                  onPress={() => send(\"GEN_NOOLS\")}>\n               <Text style={styles.nools_button_text}>{\"Generate Nools\"}</Text>\n              </TouchableHighlight>\n            */}\n              <TouchableHighlight style={styles.nools_button} underlayColor=\"#CCCCCC\" \n                                  onPress={() => this.props.app.changeInteractionMode({tutor_mode:!this.props.tutor_mode})}>\n               <Text style={styles.nools_button_text}>{(!this.props.tutor_mode && \"Tutor Mode\") || \"Train Mode\"}</Text>\n              </TouchableHighlight>\n              <TouchableHighlight style={styles.nools_button} underlayColor=\"#CCCCCC\" \n                                  onPress={()=>this.props.app.generateBehaviorProfile()}>\n               <Text style={styles.nools_button_text}>{\"Gen bProfile\"}</Text>\n              </TouchableHighlight>\n\n            </View>\n            }\n\n            {this.props.debugmode && \n            <View style={styles.button_wrapper3}>\n              <View style={{display:'absolute',bottom:0,flexDirection:\"row\"}}>\n                <TouchableHighlight style={[styles.yes_button,{height:20}]} underlayColor=\"#CCCCCC\"\n                      onPress={() => send('DEMONSTRATE')}>\n                     <Text style={{fontSize : 10}}>{\"Demonstrate\"}</Text>\n                </TouchableHighlight>\n                <TouchableHighlight style={[styles.yes_button,{height:20}]} underlayColor=\"#CCCCCC\" onPress={ ()=>{}}\n                      onPress={() => send('DONE')}>\n                     <Text style={{fontSize : 10}}>{\"Done\"}</Text>\n                </TouchableHighlight>\n                <TouchableHighlight style={[styles.yes_button,{height:20}]} underlayColor=\"#CCCCCC\" onPress={ ()=>{}}\n                      onPress={() => send('APPLICABLE_SKILLS_RECIEVED')}>\n                     <Text style={{fontSize : 10}}>{\"Req recieved\"}</Text>\n                </TouchableHighlight>                \n              </View>\n            </View>\n          }\n        </View>\n\t\t  );\n\t}\n\n}\n\nconst styles = StyleSheet.create({\n\n  \"container\": {\n    flex : 1,\n    flexDirection : \"column\",\n    // justifyContent: \"spaceBetween\",\n    // marginBottom : 40\n    // display: \"flex\",\n    // flexWrap: \"wrap\",\n    // \"height\" : \"100%\",\n  },\n\n  \"prompt1\" : {\n    fontSize: 20,\n    \"textAlign\":\"center\",\n    // marginBottom : 20,\n    margin : 3,\n    flexWrap: \"wrap\",\n  },\n\n  \"prompt2\" : {\n    fontSize: 20,\n    \"textAlign\":\"center\",\n    margin : 7,\n    marginTop : 25,\n    marginBottom : 12,\n    flexWrap: \"wrap\",\n  },\n\n  \"button_wrapper1\":{\n    display:\"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n\n    // flexBasis : \"40%\",\n    // \"pointerEvents\": \"none\",\n\n  },\n\n  \"button_wrapper2\":{\n    // justifyContent: \"spaceBetween\",\n    display:\"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    // flexBasis : \"40%\",\n    flexShrink: 1,\n    // marginBottom : 70,\n    // \"pointerEvents\": \"none\",\n\n  },\n\n  \"button_wrapper3\":{\n\n    display:\"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-around\",\n\n    // position: \"absolute\",\n    // bottom: 5,\n    padding: 5,\n\n    \n    // alignItems: \"center\",\n    // flexBasis : \"20%\",\n    marginTop: \"auto\",\n    // marginBottom: \"auto\",\n    \n    \n    // justifySelf: \"flex-end\",\n    // \"pointerEvents\": \"none\",\n\n  },\n\n  \"yes_no\":{\n\n    display:\"flex\",\n    flexDirection: \"row\",\n    // justifyContent: \"space-between\"\n    // marginVertical: 10\n\n  },\n\n  \"nools_button\" : {\n    // position: \"absolute\",\n    // bottom: 5,\n    padding: 5,\n    // \"top\":100,\n    \"width\":100,\n    \"backgroundColor\": \"#999999\",\n    // justifySelf: \"bottom\",\n    borderRadius: 5,\n    \n  },\n\n  \"nools_button_text\" : {\n    // \"fontSize\":18,\n    \"textAlign\":\"center\",\n\n  },\n\n  \"startstate_button\" : {\n    \"position\": \"relative\",\n    \"width\":200,\n    // \"fontSize\":18,\n    \"backgroundColor\": \"#4CAF50\",\n     borderRadius: 5,\n     padding: 5,\n    // \"pointerEvents\": auto;\n  },\n  \"startstate_button_text\" : {\n    \"fontSize\":20,\n    \"textAlign\":\"center\",\n  },\n\n  \"yes_button\" :{\n    \"width\":80,\n    \"backgroundColor\": \"#4CAF50\",\n    borderRadius: 6,\n    margin: 8,\n    padding: 4,\n    // \"pointerEvents\": auto;\n  },\n  \"yes_button_text\" : {\n    \"fontSize\":30,\n    \"textAlign\":\"center\",\n  },\n\n   \"no_button\" :{\n    \"width\":80,\n    \"backgroundColor\": \"#f44336\",\n    borderRadius: 6,\n    margin: 8,\n    padding: 4,\n    // \"pointerEvents\": auto;\n  },\n\n  \"no_button_text\" : {\n    \"fontSize\":30,\n    \"textAlign\":\"center\",\n  },\n\n  \"next_button\" : {\n    // display: \"relative\",\n    // bottom: 0,\n    width:100,\n    backgroundColor: \"#4CAFFF\",\n    borderRadius: 6,\n    margin: 10,\n    padding: 5,\n    // \"pointerEvents\": auto;\n  },\n\n  \"next_button_text\" : {\n    \"fontSize\":35,\n    \"textAlign\":\"center\",\n  },\n\n  \"submit_button\" : {\n    // display: \"relative\",\n    // bottom: 0,\n    width:150,\n    backgroundColor: \"#4CAFFF\",\n    borderRadius: 6,\n    margin: 10,\n    padding: 5,\n    // \"pointerEvents\": auto;\n  },\n\n  \"submit_button_text\" : {\n    \"fontSize\":30,\n    \"textAlign\":\"center\",\n  },\n\n  \"prompt_text\" :{\n    /*display:flex;*/\n    \"textAlign\":\"center\",\n    \"fontSize\":25,\n\n  }, \n\n});\n\n\nexport default Buttons;\n","import c_BezierFit from './build/js_glue';\n\n\nclass BezierFit {\n  constructor(max_stroke_length = 512){\n    this.promise = c_BezierFit().then((Module)=> {\n      console.log(\"Module\", Module); \n\n      var HEAPF64 = Module.HEAPF64;\n      var HEAP32  = Module.HEAP32;\n\n      \n      this.input_ptr = Module._malloc((max_stroke_length * 2)  * \n                           HEAPF64.BYTES_PER_ELEMENT);\n      const input_ptr = this.input_ptr\n\n      \n      this.output_ptr = Module._malloc((max_stroke_length * 2)  * \n                           HEAPF64.BYTES_PER_ELEMENT);\n      const output_ptr = this.output_ptr\n\n      \n      this.ml_ptr = Module._malloc((max_stroke_length * 9)  * \n                           HEAPF64.BYTES_PER_ELEMENT);\n      const ml_ptr = this.ml_ptr\n\n      const input_buffer = new Float64Array(HEAPF64.buffer, input_ptr, max_stroke_length * 2)\n      const output_buffer = new Float64Array(HEAPF64.buffer, output_ptr, max_stroke_length * 2)\n      const ml_buffer = new Float64Array(HEAPF64.buffer, ml_ptr, max_stroke_length * 9)\n\n\n      this.c_module = Module\n      this.fitCurve = (points,error=6.0) => {\n        points = points.flat()\n        var nPts = points.length / 2\n        input_buffer.set(points.flat())\n        var n_curves = Module._c_FitCurve(input_ptr,nPts,error*error,output_ptr)\n        Module._c_ML_EncodeCurves(output_ptr,n_curves,ml_ptr);\n        // Module._c_InflectionPoints(input_ptr,nPts)\n        var out = []\n        var it = output_buffer.entries()\n        const nxt = () => Math.round(it.next().value[1])\n        for (var i=0; i < n_curves; i++){\n          out[i] = [nxt(),nxt(),nxt(),nxt(),nxt(),nxt(),nxt(),nxt()]\n          // console.log(\"Bezier: \", i, out[i])\n        }\n        return out;\n      }\n\n      this.fitCurveFeatures = (points,error=6.0) => {\n        points = points.flat()\n        var nPts = points.length / 2\n        input_buffer.set(points.flat())\n        var n_curves = Module._c_FitCurve(input_ptr,nPts,error*error,output_ptr)\n        Module._c_ML_EncodeCurves(output_ptr,n_curves,ml_ptr);\n        // Module._c_InflectionPoints(input_ptr,nPts)\n        var out = []\n        var it = ml_buffer.entries()\n        const nxt = () => it.next().value[1]\n        for (var i=0; i < n_curves; i++){\n          out[i] = [nxt(),nxt(),nxt(),nxt(),nxt(),nxt(),nxt(),nxt(),nxt()]\n          // console.log(\"Bezier: \", i, out[i])\n        }\n        return out;\n\n      }\n\n      this.groupStrokes = (strokes) => {\n        strokes = Object.values(strokes)\n        const len_ptr = Module._malloc(strokes.length*HEAP32.BYTES_PER_ELEMENT);\n        const len_buffer = new Int32Array(HEAP32.buffer, len_ptr, strokes.length);\n        // var total = 0;\n        var lens = [];\n        var points = [];\n        for(var i=0;i < strokes.length;i++){\n          var stroke =strokes[i];\n          // total += stroke.points.length;\n          lens.push(stroke.points.length);\n          points = points.concat(stroke.points);\n        } \n        // console.log(points,lens, strokes.length)\n        len_buffer.set(lens);\n        const stroke_ptr = Module._malloc(2*points.length*HEAPF64.BYTES_PER_ELEMENT);\n        const stroke_buffer = new Float64Array(HEAPF64.buffer, stroke_ptr, points.length*2); \n        stroke_buffer.set(points.flat())\n\n        const out_ptr = Module._malloc(2*strokes.length*HEAP32.BYTES_PER_ELEMENT);\n        const out_buffer = new Int32Array(HEAP32.buffer, out_ptr, 2*strokes.length); \n        var nGroups = Module._c_GroupStrokes(stroke_ptr,len_ptr,strokes.length,out_ptr,.1,.5,50.0);\n        // console.log(\"NGRPS\",nGroups,strokes.length)\n        var out = [];\n        var it = out_buffer.entries()\n        const nxt = () => it.next().value[1]\n        for(var i=0;i < nGroups;i++){\n          var L = nxt();\n          var grp = [];\n          for(var j=0;j < L;j++){\n            grp.push(strokes[nxt()].id)\n          }\n          out.push(grp);\n        }\n        // console.log(\"OUT\", out)\n\n        Module._free(stroke_ptr);\n        Module._free(len_ptr);\n        Module._free(out_ptr);\n        return out;\n        // const len_ptr = Module._malloc(2*total*HEAPF64.BYTES_PER_ELEMENT);\n        // input_buffer.set(points.flat())\n        // var n_curves = Module._c_FitCurve(input_ptr,nPts,error*error,output_ptr)\n        // Module._c_ML_EncodeCurves(output_ptr,n_curves,ml_ptr);\n        // Module._c_InflectionPoints(input_ptr,nPts)\n        // var out = []\n        // var it = output_buffer.entries()\n        // const nxt = () => Math.round(it.next().value[1])\n        // for (var i=0; i < n_curves; i++){\n        //   out[i] = [nxt(),nxt(),nxt(),nxt(),nxt(),nxt(),nxt(),nxt()]\n        //   // console.log(\"Bezier: \", i, out[i])\n        // }\n        // console.log(out)\n        // return out\n      }\n    });\n  }\n}\n\nexport default BezierFit;\n// const BezierFit = (function () => {\n//   var promise = new Promise((resolve,reject) => {\n//     var JS_Module = {}\n//     c_BezierFit().then(function(Module) {\n//       console.log(\"Module\", Module); \n\n//       var HEAPF64 = Module.HEAPF64;\n\n//       const input_ptr = Module._malloc(1024 * \n//                            HEAPF64.BYTES_PER_ELEMENT); // 1\n\n//       const output_ptr = Module._malloc(1024 * \n//                            HEAPF64.BYTES_PER_ELEMENT); // 1\n\n//       const input_buffer = new Float64Array(HEAPF64.buffer,input_ptr,1024)\n//       const output_buffer = new Float64Array(HEAPF64.buffer,output_ptr,1024)\n\n//       JS_Module.c_module = Module\n//       JS_Module.FitCurve = (points) => {\n//         input_buffer.set(points)\n//         var n_curves = Module._c_FitCurve(input_ptr,3,4.0,output_ptr)\n//         var out = []\n//         var it = output_buffer.entries()\n//         const nxt = () => it.next().value[1]\n//         for (var i=0; i < n_curves; i++){\n//           out[i] = [nxt(),nxt(),nxt(),nxt(),nxt(),nxt(),nxt(),nxt()]\n//           console.log(\"Bezier: \", i, out[i])\n//         }\n//         console.log(out)\n//         return out\n//       }\n//       // sumUp([1.0, 2.0, 3.0, 4.0, 5.0, 6.0])\n//      resolve(JS_Module)\n//     });\n//   })\n//   return promise\n// });\n// export default BezierFit;","import { Machine, assign, interpret, send } from \"xstate\";\n\n// const sendFeedback = (context,event,explicit=false) => {\n// \tif(event.response_type == \"CORRECT\"){\n// \t\tcontext.network_layer.sendFeedback(context,event,1,explicit)\n// \t}else if(event.response_type == \"INCORRECT\"){\n// \t\tcontext.network_layer.sendFeedback(context,event,-1,explicit)\n// \t}else if(event.response_type == \"NO_RESPONSE\"){\n// \t\tcontext.network_layer.sendFeedback(context,event,0,explicit)\n// \t}\n// }\n\n// const post_next_example = (context,event) => {\n\n// }\n\n// const queryApprentice = () => {};\n// const post_next_example = () => {};\n// const apply_sai = () => {};\n// const queryApprentice = () => {};\n// const queryApprentice = () => {};\n// const queryApprentice = () => {};\n// const queryApprentice = () => {};\n\n// function apply_skill_application(context,event){\n// \tcontext.tutor.apply_skill_application()\n// }\n\n// function apply_next_example(context,event){\n// \tconst tutor = context.tutor\n// \tvar sai = tutor.getDefaultSAI()\n// \tvar data = {state: context.state, reward: 1,...sai}\n// \tcontext.network_layer.sendTrainingData(data)\n\n// }\nconst appendStartHistory = assign({\n  start_state_history: (context, event) => {\n    var state = context.tutor.getState();\n    var history = context.start_state_history || [];\n    history.push(state);\n    return history;\n  }\n});\n\nconst stateRecalc = assign({\n  state: (context, event) => {\n    if (context.staged_SAI == null || context.staged_SAI.reward > 0 || context.test_mode) {\n      return context.tutor.getState();\n    } else {\n      return context.state;\n    }\n  }\n});\n\nconst assignFoci = assign({\n  staged_SAI: (context, event) => {\n    Object.assign(context.staged_SAI, {\n      foci_of_attention: context.tutor.getCurrentFoci()\n    });\n    return context.staged_SAI;\n  }\n});\n\n//CONDITIONS\nfunction saiIsCorrectDone(context, event) {\n  const sai_data = context.staged_SAI;\n  if (context.feedback_map && Object.keys(context.feedback_map).length > 0) {\n    return false;\n  }\n  return (\n    sai_data.selection === \"done\" &&\n    (sai_data.reward == null || sai_data.reward > 0 || context.test_mode)\n  );\n}\n\nfunction forceUseExample(context, event) {\n  const saiData = context.staged_SAI;\n  return (saiData.skipTraining && saiData.reward < 0) || context.examples_only;\n}\n\nfunction isFreeAuthor(context, event) {\n  \n  return context.free_author || false;\n}\n\nfunction checkIsCorrect(context, event) {\n  return event.data > 0;\n}\n\nfunction noApplicableSkills(context, event) {\n  console.log(\"CCCC\", context)\n  return !Object.keys(event.data).length || context.examples_only;\n}\n\nfunction logError(context, event) {\n  console.error(event.data);\n  // alert(\"FAIL\")\n}\n\n// var color_map = {\n// \t\"EXAMPLE\" : \"0;33;44m\",\n// \t\"CORRECT\" : \"0;30;42m\",\n// \t\"INCORRECT\" : \"0;30;41m\",\n// }\n\nfunction _kill_this(context, event) {\n  var nl = context.network_layer;\n  nl.kill_this(event.data.toString());\n}\n\n\n\nfunction clearSkillPanel(context, event) {\n  context.app.setState({\n    skill_panel_props: {\n      skill_set: { \"Applicable Skills\": {} }\n    }\n  });\n}\n\nfunction fillSkillPanel(context, event) {\n  context.app.setState({\n    skill_panel_props: {\n      skill_set: { \"Applicable Skills\": event.data[\"responses\"] || {} }\n    }\n  });\n}\n\nconst recalcFeedbackMap = send((context, event) => {\n  // const promise = new Promise((resolve,reject) => {\n  var skill = event.skill;\n  var match = event.match;\n  var label = event.label;\n\n  let match_id = match[\"_id\"];\n  // console.log(match[\"_id\"])\n  // console.log(this.state.feedback_map)\n  let feedback_map = context.feedback_map || {};\n  let new_label =\n    feedback_map[match_id] && label === feedback_map[match_id] ? null : label;\n\n  let new_feedback_map = { ...feedback_map };\n  if (new_label === null) {\n    delete new_feedback_map[match_id];\n  } else {\n    new_feedback_map[match_id] = new_label;\n  }\n\n  let was_empty = Object.keys(feedback_map).length === 0;\n  let now_empty = Object.keys(new_feedback_map).length === 0;\n\n  return {\n    type: \"FEEBACK_MAP_UPDATE\",\n    feedback_map: new_feedback_map,\n    was_empty: was_empty,\n    now_empty: now_empty\n  };\n  // if(!was_empty && now_empty){\n  //   \tconsole.log(\"EMPTY\")\n  //   \treturn {type: \"SKILL_PANEL_FEEDBACK_EMPTY\"}\n  // }else if(was_empty && !now_empty){\n  //   \tconsole.log(\"NOT EMPTY\")\n  //   \treturn {type :\"SKILL_PANEL_FEEDBACK_NONEMPTY\"}\n  // }\n  // return undefined\n  // });\n  // return promise;\n});\n\nconst assignFeedbackMap = assign({\n  feedback_map: (context, event) => {\n    if (context.skill_panel.updateFeedbackMap) {\n      context.skill_panel.updateFeedbackMap(event.feedback_map);\n    }\n    if (context.tutor.updateFeedbackMap) {\n      context.tutor.updateFeedbackMap(event.feedback_map);\n    }\n    return event.feedback_map;\n  }\n});\n\nconst toggleFeedbackStyle = send((context, event) => {\n  if (!event.was_empty && event.now_empty) {\n    console.log(\"EMPTY\");\n    return { type: \"SKILL_PANEL_FEEDBACK_EMPTY\" };\n  } else if (event.was_empty && !event.now_empty) {\n    console.log(\"NOT EMPTY\");\n    return { type: \"SKILL_PANEL_FEEDBACK_NONEMPTY\" };\n  }\n  return { type: \"\" };\n});\n\n// skill_set={skill_set}\n//\t\t\t\t\t\tselect_callback={select_callback}\n//\t\t\t\t\t\tcorrectness_callback={correctness_callback}\n//\t\t\t\t\t\t\tinitial_select={initial_select}\n//\t\t\t\t\t\t\twhere_colors={where_colors || undefined}\n//\t\t\t\t\t\t\t\tcurrent = {window.state_machine}\n//\t\t\t\t\t\t\t\tservice = {window.state_machine_service}\n\nfunction get_machine_actions(app) {\n  var tutor = app.tutor.current;\n  var skill_panel = app.skill_panel.current;\n  var buttons = app.network_layer.current;\n  var network_layer = app.network_layer;\n\n  return {\n    services: {\n      sendFeedback: (context, event) => {\n        if (context.staged_SAI.skipTraining || context.test_mode) {\n          return Promise.resolve(true);\n        }\n        return network_layer.sendFeedback(context, event);\n      },\n      //TODO: is this depricated?\n      sendFeedbackExplicit: (context, event) =>\n        network_layer.sendFeedbackExplicit(context, event),\n      applyNextExample: tutor.applyNextExample,\n      attemptStagedSAI: tutor.attemptStagedSAI,\n      queryApprentice: network_layer.queryApprentice,\n      checkApprentice: network_layer.checkApprentice\n    },\n    actions: {\n      logError: logError,\n\n      stateRecalc: stateRecalc,\n      assignResponse: assign({ response: (context, event) => event.data }),\n      assignStagedSAI: assign({ staged_SAI: (context, event) => event.data }),\n      assignExample: assign({ action_type: (context, event) => \"EXAMPLE\" }),\n      assignAttempt: assign({ action_type: (context, event) => \"ATTEMPT\" }),\n      assignCorrect: assign({\n        staged_SAI: (context, event) => {\n          return { ...context.staged_SAI, ...{ reward: 1 } };\n        }\n      }),\n      assignIncorrect: assign({\n        staged_SAI: (context, event) => {\n          return { ...context.staged_SAI, ...{ reward: -1 } };\n        }\n      }),\n      assignFoci: assignFoci,\n      clearFeedbackData: assign((context, event) => {\n        return {\n          reward: null,\n          // \"rewards\" : null,\n          staged_SAI: null,\n          skill_applications: null,\n          feedback_map: null\n        };\n      }),\n      assignSkillApplications: assign({\n        skill_applications: (context, event) =>\n          event.data.responses || event.data.skill_applications\n      }),\n      // done : window.signal_done,\n\n      \n      kill_this: _kill_this,\n      printEvent: (context, event) => {\n        console.log(\"P_EVT:\", event);\n      },\n\n      fillSkillPanel: fillSkillPanel,\n      clearSkillPanel: clearSkillPanel,\n      done: (context, event) => {\n        context.app.training_service.send(\"PROBLEM_DONE\");\n      },\n\n\n      enterSetStartStateMode: tutor.enterSetStartStateMode,\n      exitSetStartStateMode: tutor.exitSetStartStateMode,\n      enterFeedbackMode: tutor.enterFeedbackMode,\n      exitFeedbackMode: tutor.exitFeedbackMode,\n      enterFociMode: tutor.enterFociMode,\n      exitFociMode: tutor.exitFociMode,\n      enterTutoringMode: tutor.enterTutoringMode,\n      exitTutoringMode: tutor.exitTutoringMode,\n      displayCorrectness: tutor.displayCorrectness,\n      printFeedback: tutor.printFeedback,\n      \n      applyStagedSAI: (context, event) => {\n        tutor.applySAI(context.staged_SAI);\n      },\n      proposeSAI: (context, event) => tutor.proposeSAI(event.data),\n      confirmProposedSAI: (context, event) => {\n        tutor.confirmProposedSAI();\n      },\n      clearProposedSAI: (context, event) => {\n        tutor.clearProposedSAI();\n      },\n\n      recalcFeedbackMap: recalcFeedbackMap,\n      assignFeedbackMap: assignFeedbackMap,\n      toggleFeedbackStyle: toggleFeedbackStyle,\n\n      generate_nools: network_layer.generate_nools,\n      appendStartHistory: appendStartHistory\n    },\n    guards: {\n      saiIsCorrectDone: saiIsCorrectDone,\n      forceUseExample: forceUseExample,\n      noApplicableSkills: noApplicableSkills,\n      isFreeAuthor: isFreeAuthor,\n      checkIsCorrect: checkIsCorrect\n    }\n  };\n}\n\nexport function build_interactions_sm(\n  app,\n  inh_context,\n) {\n  var context = {\n    app: app,\n    tutor: app.tutor.current,\n    skill_panel: app.skill_panel.current,\n    buttons: app.buttons.current,\n    network_layer: app.network_layer,\n\n    //Dynamic\n    // last_correct : null,\n    staged_SAI: null,\n    action_type: null\n  };\n  context = {...context, ...inh_context}\n\n  var sm;\n  if (context.tutor_mode) {\n    sm = tutor_sm;\n  } else {\n    sm = context.interactive ? interactive_sm : non_interactive_sm;\n  }\n\n  const interaction_sm = Machine(\n    { ...{ context: context }, ...sm },\n    get_machine_actions(app)\n  );\n  return interaction_sm;\n}\n\n// ------------------------------- NON INTERACTIVE ----------------------------\n\nvar non_interactive_sm = {\n  initial: \"Start\",\n  states: {\n    Start: {\n      entry: \"stateRecalc\",\n      on: {\n        \"\": \"Querying_Apprentice\"\n      }\n    },\n    Querying_Apprentice: {\n      invoke: {\n        id: \"queryApprentice\",\n        src: \"queryApprentice\",\n        onDone: [\n          { target: \"Applying_Next_Example\", cond: \"noApplicableSkills\" },\n          { target: \"Applying_Staged_SAI\", actions: [\"assignStagedSAI\"] }\n        ],\n        onError: \"Fail\"\n      },\n      exit: \"assignResponse\"\n    },\n    Applying_Staged_SAI: {\n      invoke: {\n        id: \"attemptStagedSAI\",\n        src: \"attemptStagedSAI\",\n        onDone: {\n          target: \"Sending_Feedback\",\n          actions: [\"assignStagedSAI\", \"assignAttempt\"]\n        },\n        onError: \"Fail\"\n      }\n    },\n\n    Applying_Next_Example: {\n      invoke: {\n        id: \"applyNextExample\",\n        src: \"applyNextExample\",\n        onDone: {\n          target: \"Sending_Feedback\",\n          actions: [\"assignStagedSAI\", \"assignExample\"]\n        },\n        onError: \"Fail\"\n      }\n    },\n\n    Sending_Feedback: {\n      entry: \"printFeedback\",\n      invoke: {\n        id: \"sendFeedback\",\n        src: \"sendFeedback\",\n        onDone: [\n          { target: \"Done\", cond: \"saiIsCorrectDone\" },\n          { target: \"Applying_Next_Example\", cond: \"forceUseExample\" },\n          { target: \"Querying_Apprentice\" }\n        ],\n        onError: \"Fail\"\n      },\n      exit: [\"stateRecalc\", \"assignResponse\", \"clearFeedbackData\"]\n    },\n    Done: {\n      type: \"final\",\n      entry: \"done\"\n    },\n    Fail: {\n      entry: [\"logError\", \"kill_this\"]\n    }\n  }\n};\n\n// ------------------------------- INTERACTIVE ----------------------------\n\nvar interactive_sm = {\n  id: \"interactive\",\n  initial: \"Start\",\n  states: {\n    Start: {\n      entry: \"stateRecalc\",\n      on: {\n        \"\": [\n          { target: \"Setting_Start_State\", cond: \"isFreeAuthor\" },\n          { target: \"Querying_Apprentice\" }\n        ]\n      }\n    },\n    Setting_Start_State: {\n      entry: \"enterSetStartStateMode\",\n      on: {\n        START_STATE_SET: {\n          target: \"Querying_Apprentice\",\n          actions: [\"appendStartHistory\"]\n        }\n      },\n      exit: [\"exitSetStartStateMode\", \"stateRecalc\"]\n    },\n    Querying_Apprentice: {\n      invoke: {\n        id: \"queryApprentice\",\n        src: \"queryApprentice\",\n        onDone: [\n          {\n            target: \"Waiting_User_Feedback.Waiting_Demonstrate_Only\",\n            cond: \"noApplicableSkills\",\n            actions: [\"fillSkillPanel\"]\n          },\n          {\n            target: \"Waiting_User_Feedback.Waiting_Yes_No_Feedback\",\n            actions: [\"fillSkillPanel\", \"proposeSAI\", \"assignStagedSAI\"]\n          }\n        ],\n        onError: \"Fail\"\n      },\n      exit: \"assignSkillApplications\"\n    },\n    Waiting_User_Feedback: {\n      entry: \"enterFeedbackMode\",\n      //\n      initial: \"Waiting_Demonstrate_Only\",\n      states: {\n        Waiting_Demonstrate_Only: {},\n        Waiting_Yes_No_Feedback: {\n          on: {\n            SKILL_PANEL_FEEDBACK_NONEMPTY: \"Waiting_Submit_Feedback\",\n            // \"YES_PRESSED\" : {target : \"#interactive.Sending_Feedback\",\n            YES_PRESSED: {\n              target: \"#interactive.Sending_Feedback\",\n              actions: [\"assignCorrect\", \"assignAttempt\", \"confirmProposedSAI\"]\n            },\n            NO_PRESSED: {\n              target: \"#interactive.Sending_Feedback\",\n              actions: [\"assignIncorrect\", \"assignAttempt\", \"clearProposedSAI\"]\n            }\n          }\n        },\n        Waiting_Submit_Feedback: {\n          on: {\n            SKILL_PANEL_FEEDBACK_EMPTY: \"Waiting_Yes_No_Feedback\",\n            SUBMIT_SKILL_FEEDBACK: {\n              target: \"#interactive.Sending_Feedback\",\n              actions: [\"clearProposedSAI\"]\n            }\n          }\n        }\n      },\n      //\n      on: {\n        STAGE_SAI: { actions: [\"assignStagedSAI\", \"proposeSAI\"] },\n        //\n        TOGGLE_FEEDBACK: { actions: \"recalcFeedbackMap\" }, //, onDone:{actions :\"callSend\"}, onError: 'Fail'}},\n        FEEBACK_MAP_UPDATE: {\n          actions: [\"assignFeedbackMap\", \"toggleFeedbackStyle\"]\n        }, //, onDone:{actions :\"callSend\"}, onError: 'Fail'}},\n        //\n        DEMONSTRATE: {\n          target: \"Waiting_Select_Foci\",\n          actions: [\n            \"assignStagedSAI\",\n            \"assignExample\",\n            \"printEvent\",\n            \"clearProposedSAI\"\n          ]\n        },\n        GEN_NOOLS: { actions: [\"generate_nools\"] }\n      },\n\n      exit: [\"exitFeedbackMode\"]\n    },\n    // \"Applying_Staged_SAI\" : {\n    // \tinvoke : {\n    //         id: \"attemptStagedSAI\",\n    //         src: \"attemptStagedSAI\",\n    //         onDone: \"Sending_Feedback\",\n    //         onError: 'Fail',\n    // \t},\n    // },\n    Waiting_Select_Foci: {\n      entry: \"enterFociMode\",\n      on: {\n        \"\": {\n          target: \"Sending_Feedback\",\n          actions: \"assignFoci\",\n          cond: \"saiIsCorrectDone\"\n        },\n        FOCI_DONE: { target: \"Sending_Feedback\", actions: \"assignFoci\" }\n      },\n      exit: \"exitFociMode\"\n    },\n    Sending_Feedback: {\n      entry: [\"printFeedback\"],\n      invoke: {\n        id: \"sendFeedback\",\n        src: \"sendFeedback\",\n        onDone: [\n          // {target: \"Setting_Start_State\", cond : },\n          { target: \"Done\", cond: \"saiIsCorrectDone\" },\n          // { target: \"Applying_Next_Example\", cond: \"forceUseExample\" },\n          { target: \"Querying_Apprentice\" }\n        ],\n        onError: \"Fail\"\n      },\n      exit: [\"stateRecalc\", \"assignResponse\", \"clearFeedbackData\"]\n    },\n    // Sending_Feedback_Explicit : {\n    // \tentry : 'printFeedback',\n    // \tinvoke : {\n    //         id: \"sendFeedbackExplicit\",\n    //         src: \"sendFeedbackExplicit\",\n    //         onDone: [\n    // \t        // {target: \"Setting_Start_State\", cond : },\n    // \t        // {target: \"Done\", cond : \"saiIsCorrectDone\"},\n    // \t        {target: \"Querying_Apprentice\"},\n    //         ],\n    //         onError: 'Fail',\n    // \t},\n    // \texit:[\"stateRecalc\",\"assignResponse\",\"clearFeedbackData\"]\n    // },\n    Done: {\n      type: \"final\",\n      entry: [\"clearSkillPanel\", \"done\"]\n      // on : {\n      // \t\"\" : {target  : \"Setting_Start_State\", cond : \"isFreeAuthor\"},\n      // },\n    },\n    Fail: {\n      entry: [\"logError\", \"kill_this\"]\n    }\n  }\n};\n\nconst tutor_sm = {\n  id: \"interactive\",\n  initial: \"Start\",\n  states: {\n    Start: {\n      entry: \"stateRecalc\",\n      on: {\n        \"\": [\n          { target: \"Setting_Start_State\", cond: \"isFreeAuthor\" },\n          { target: \"Waiting_User_Attempt\" }\n        ]\n      }\n    },\n    Setting_Start_State: {\n      entry: \"enterSetStartStateMode\",\n      on: {\n        START_STATE_SET: {\n          target: \"Waiting_User_Attempt\",\n          actions: [\"appendStartHistory\"]\n        }\n      },\n      exit: [\"exitSetStartStateMode\", \"stateRecalc\"]\n    },\n    Waiting_User_Attempt: {\n      entry: [\"enterTutoringMode\", \"stateRecalc\"],\n      on: {\n        ATTEMPT: {\n          target: \"Checking_Against_Apprentice\",\n          actions: \"assignStagedSAI\"\n        }\n      },\n      exit: \"exitTutoringMode\"\n    },\n    Checking_Against_Apprentice: {\n      invoke: {\n        id: \"checkApprentice\",\n        src: \"checkApprentice\",\n        onDone: [\n          {\n            cond: \"saiIsCorrectDone\",\n            target: \"Done\",\n            actions: [\"displayCorrectness\", \"assignCorrect\"]\n          },\n          {\n            cond: \"checkIsCorrect\",\n            target: \"Waiting_User_Attempt\",\n            actions: [\"displayCorrectness\", \"assignCorrect\"]\n          },\n          {\n            target: \"Waiting_User_Attempt\",\n            actions: [\"displayCorrectness\", \"assignIncorrect\"]\n          }\n        ]\n      }\n      // exit : \"stateRecalc\"\n    },\n    Done: {\n      type: \"final\",\n      entry: [\"clearSkillPanel\", \"done\"]\n    }\n  }\n};\n\n// const feedbackStates = {\n// \tinitial: \"Waiting_For_Applicable_Skills\",\n// \tstates: {\n// \t\t\"Waiting_For_Applicable_Skills\" :{\n// \t\t\tentry : ['queryApprentice'],\n// \t\t\ton : {\n// \t\t\t\t\"APPLICABLE_SKILLS_RECIEVED\" : \"Query_Yes_No_Feedback\",\n// \t\t\t\t\"NO_SKILLS_RECIEVED\" : \"No_Query_Feedback\"\n// \t\t\t}\n// \t\t},\n// \t\t\"Waiting_For_Training_Recieved\" :{\n// \t\t\ton : {\n// \t\t\t\t\"TRAINING_RECIEVED\" : \"Waiting_For_Applicable_Skills\",\n// \t\t\t}\n// \t\t},\n// \t\t\"No_Query_Feedback\" : {\n// \t\t\ton : {\n// \t\t\t\t\"SKILL_PANEL_FEEDBACK_NONEMPTY\" : \"Query_Submit_Feedback\"\n// \t\t\t}\n// \t\t},\n// \t\t\"Query_Yes_No_Feedback\" : {\n// \t\t\ton : {\n// \t\t\t\t\"SKILL_PANEL_FEEDBACK_NONEMPTY\" : \"Query_Submit_Feedback\",\n// \t\t\t\t\"YES_PRESSED\" : \"Waiting_For_Training_Recieved\",\n// \t\t\t\t\"NO_PRESSED\" : \"Waiting_For_Training_Recieved\",\n// \t\t\t}\n// \t\t},\n// \t\t\"Query_Submit_Feedback\" : {\n// \t\t\ton : {\n// \t\t\t\t\"SKILL_PANEL_FEEDBACK_EMPTY\" : [\n// \t\t\t\t\t{target : \"Query_Yes_No_Feedback\", },\n// \t\t\t\t\t{target : \"No_Query_Feedback\"}\n// \t\t\t\t],\n// \t\t\t\t\"SUBMIT_SKILL_FEEDBACK\": \"Waiting_For_Training_Recieved\"\n// \t\t\t}\n// \t\t}\n// \t}\n// }\n\n// const ButtonsMachine = Machine({\n//   \"initial\": \"Specify_Start_State\",\n//   \"states\": {\n//   \t\"Specify_Start_State\": {\n//   \t\ton: { \"START_STATE_SET\": \"Query_Demonstrate\" },\n//   \t},\n//     \"Query_Demonstrate\": {\n//       on: { \"DEMONSTRATE\": \"Request_Foci\",\n//        \t\t\"DONE\": \"Specify_Start_State\" },\n\n//       ...feedbackStates\n//     },\n//     \"Request_Foci\": {\n//       on: {\n//         \"FOCI_DONE\": \"Query_Demonstrate\",\n//       },\n//     },\n//     \"Explantions_Displayed\": {\n//       on: {\n//         \"NEXT_PRESSED\": \"Query_Demonstrate\",\n//         \"DEMONSTRATE\": \"Request_Foci\",\n//         \"DONE\": \"Specify_Start_State\"\n//       },\n\n//     },\n//   }\n// },\n// {\n// \tactions: {\n// \t\tqueryApprentice : (context,event) => {\n// \t\t\twindow.queryApprentice()\n// \t\t}\n// \t}\n// }\n// )\n\n// window.new_nonInteractiveMachine = () => {\n// \tvar machine = build_SM_NonInteractive(window.tutor,window.network_layer,window.agent_id)\n// \tvar machine_service = interpret(machine)\n// \tmachine_service.start()\n// \treturn machine_service\n// }\n\n// const load_training_file = () => {};\n// const serve_next_training_set = () => {};\n// const serve_next_agent = () => {};\n// const serve_next_problem = () => {};\n// const runWhenReady = () => {};\n// const query_outerloop = () => {};\n\n// function make_training_handler(){\n// \tconst sm= Machine({\n// \t\tinitial: \"Loading_Training_File\",\n// \t\tstates: {\n// \t\t\tLoading_Training_File: {\n// \t\t\t\tinvoke : {\n// \t\t\t\t\tid: \"load_training_file\",\n// \t\t\t\t\tsrc: \"load_training_file\",\n// \t\t\t\t\tonDone: \"Serving_Training_Sets\",\n// \t\t\t\t\tonError: 'Fail',\n// \t\t\t\t}\n// \t\t\t},\n// \t\t\tServing_Training_Sets: {\n// \t\t\t\tinvoke : {\n// \t\t\t\t\tid: \"serve_next_training_set\",\n// \t\t\t\t\tsrc: \"serve_next_training_set\",\n// \t\t\t\t\tonDone: [{target : \"All_Done\", cond : \"iteratorEmpty\"},\n// \t\t\t\t\t\t\t {target : \"Serving_Agents\"}],\n// \t\t\t\t\tonError: 'Fail',\n// \t\t\t\t\t}\n// \t\t\t},\n// \t\t\tServing_Agents: {\n// \t\t\t\tinvoke : {\n// \t\t\t\t\tid: \"serve_next_agent\",\n// \t\t\t\t\tsrc: \"serve_next_agent\",\n// \t\t\t\t\tonDone: [{target : \"Serving_Training_Sets\", cond : \"iteratorEmpty\"},\n// \t\t\t\t\t\t\t {target : \"Serving_Problems\"}],\n// \t\t\t\t\tonError: 'Fail',\n// \t\t\t\t}\n// \t\t\t},\n// \t\t\tServing_Problems: {\n// \t\t\t\tinvoke : {\n// \t\t\t\t\tid: \"serve_next_problem\",\n// \t\t\t\t\tsrc: \"serve_next_problem\",\n// \t\t\t\t\tonDone: [{target : \"Serving_Agents\", cond : \"iteratorEmpty\"},\n// \t\t\t\t\t\t\t {target : \"Waiting_Problem_Load\"}],\n// \t\t\t\t\tonError: 'Fail',\n// \t\t\t\t}\n// \t\t\t},\n// \t\t\tWaiting_Problem_Load:{\n// \t\t\t\tinvoke : {\n// \t\t\t\t\tid: \"set_problem_src\",\n// \t\t\t\t\tsrc: \"set_problem_src\",\n// \t\t\t\t\tonDone: \"Training\",\n// \t\t\t\t\tonError: 'Fail',\n// \t\t\t\t}\n// \t\t\t},\n\n// \t\t// \"Waiting_For_OuterLoop\": {\n// \t\t// \tentry: query_outerloop,\n// \t\t// \ton: {\"PROBLEM_START_LOAD\": \"Waiting_Problem_Load\"}\n// \t\t// },\n\n// \t\t\tTraining: {\n// \t\t\t\tinvoke : {\n// \t\t\t\t\tid: \"training_state_machine\",\n// \t\t\t\t\tsrc: \"training_state_machine\",\n// \t\t\t\t\tonDone: \"Serving_Problems\",\n// \t\t\t\t\tonError: 'Fail',\n// \t\t\t\t}\n// \t\t\t},\n// \t\t// \"Explantions_Displayed\": {\n// \t\t//   on: {\n// \t\t//     \"NEXT_PRESSED\": \"Query_Demonstrate\",\n// \t\t//     \"DEMONSTRATE\": \"Request_Foci\",\n// \t\t//     \"DONE\": \"Specify_Start_State\"\n// \t\t//   },\n\n// \t\t// },\n// \t\t\tAll_Done : {\n// \t\t\t\ttype : 'final',\n// \t\t\t},\n// \t\t\tFail : {\n// \t\t\t\tentry : [\"logError\",\"kill_this\"]\n// \t\t\t}\n// \t\t}\n// \t})\n// }\n\n// const TrainingJSON_SM= Machine({\n//   \"initial\": \"Loading_Training_File\",\n//   \"states\": {\n//   \t\"Loading_Training_File\": {\n//   \t\tentry: load_training_file,\n//   \t\ton: { \"TRAINING_FILE_LOADED\": \"Serving_Training_Sets\" },\n//   \t},\n//   \t\"All_Done\" : {},\n//     \"Serving_Training_Sets\": {\n//     \tentry: serve_next_training_set,\n//       \ton: { \"TRAINING_SET_LOADED\": \"Serving_Agents\",\n//       \t\t  \"NO_MORE_TRAINING_SETS\" : \"All_Done\"},\n//     },\n//     \"Serving_Agents\": {\n//     \tentry: serve_next_agent,\n//     \ton: {\"AGENT_CREATED\": \"Serving_Problem\",\n//       \t\t \"NO_MORE_AGENTS\" : \"Serving_Training_Sets\"},\n//     },\n//     \"Serving_Problems\": {\n//     \tentry: serve_next_problem,\n//     \ton: {\"PROBLEM_START_LOAD\": \"Waiting_Problem_Load\",\n//     \t\t \"QUERY_OUTERLOOP\": \"Waiting_For_OuterLoop\",\n//       \t\t \"NO_MORE_PROBLEMS\" : \"Serving_Agents\"},\n//     },\n//     \"Waiting_Problem_Load\":{\n//     \tentry: runWhenReady,\n//     \ton: {\"PROBLEM_LOADED\": \"Training\"}\n//     },\n//     \"Waiting_For_OuterLoop\": {\n//     \tentry: query_outerloop,\n//     \ton: {\"PROBLEM_START_LOAD\": \"Waiting_Problem_Load\"}\n//     },\n\n//     \"Training\": {\n//     \ton: {\"PROBLEM_DONE\": \"Serving_Problems\"},\n//     },\n//     \"Explantions_Displayed\": {\n//       on: {\n//         \"NEXT_PRESSED\": \"Query_Demonstrate\",\n//         \"DEMONSTRATE\": \"Request_Foci\",\n//         \"DONE\": \"Specify_Start_State\"\n//       },\n\n//     },\n//   }\n// },\n// {\n// \tactions: {\n// \t\tqueryApprentice : (context,event) => {\n// \t\t\twindow.queryApprentice()\n// \t\t}\n// \t}\n// }\n// )\n\nexport default build_interactions_sm;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport SkillPanel from \"./components/skill_panel\";\nimport Buttons from \"./components/buttons\";\nimport * as serviceWorker from \"./serviceWorker\";\n// import ButtonsMachine from './interactions.js'\n\nimport { interpret } from \"xstate\";\nimport CTAT_Tutor from \"./tutors/CTAT/CTAT_Tutor\";\nimport StylusTutor from './tutors/Stylus/StylusTutor';\nimport App from \"./App\";\nimport RJSON from \"relaxed-json\";\n\n\nconst tutor_map = {\n  ctatttutor: CTAT_Tutor,\n  ctat: CTAT_Tutor,\n  \"stylustutor\" : StylusTutor,\n  \"stylus\" : StylusTutor,\n};\n\n\n\n\nfunction load_training_file(training_file) {\n  // console.log(\"SLOOPERZ\",training_file)\n  return fetch(training_file)\n    .then(str => str.text()) //str.json())\n    .then(str => RJSON.parse(str)); //str.json())\n}\n\nfunction safeParse(json) {\n  var parsed;\n  try {\n    parsed = JSON.parse(json);\n  } catch (e) {\n    parsed = null;\n  }\n  return parsed;\n}\n\nfunction getWebProps() {\n  var urlParams = new URLSearchParams(window.location.search.substring(1));\n  console.log(window.location.search);\n  console.log(urlParams);\n\n  var props = {\n    AL_URL: urlParams.get(\"al_url\"),\n    OUTER_LOOP_URL: urlParams.get(\"outer_loop_url\"),\n    HOST_URL: window.location.origin,\n    training_file: urlParams.get(\"training\"),\n    interactive: safeParse((urlParams.get(\"interactive\") || \"\").toLowerCase()),\n    use_foci: safeParse((urlParams.get(\"use_foci\") || \"\").toLowerCase()),\n    tutor: urlParams.get(\"tutor\"),\n    nools_dir: urlParams.get(\"nools_dir\")\n  };\n\n  console.log(\"PROPS\", props, urlParams.get(\"interactive\"));\n  return props;\n}\n\nfunction removeEmpty(obj) {\n  var out = {};\n  console.log(obj);\n  Object.keys(obj).forEach(key => {\n    console.log(key);\n    if (obj[key] != null) {\n      out[key] = obj[key];\n    }\n  });\n  return out;\n}\n\nvar props = getWebProps();\n\nprops.training_file = props.training_file || \"/stylus_author.json\";\n// console.log(\"WEE\", props.training_file)\n\nload_training_file(props.training_file).then(function(training_json) {\n  // console.log(\"BOOPERSZ\", training_json)\n  var training_file_props = training_json.set_params;\n  props = { ...training_file_props, ...removeEmpty(props) };\n  props.tutor = (props.tutor || \"ctat\").toLowerCase().replace(\"_\", \"\");\n  return props\n}).then(function(props){\n  var tutorClass = tutor_map[props.tutor] || CTAT_Tutor\n  console.log(\"TC\", tutorClass, props.tutor)\n  ////EVENTUALLY WILL WANT OT DYNAMICALLY IMPORT////\n  // if(props.tutor in tutor_map){props.tutor = tutor_map[props.tutor]}\n  // var tutorClass = (await import(props.tutor)).default\n  /////////////////////////////////////////////////\n  return [props,tutorClass]\n}).then(function(args){\n  var [props,tutorClass] = args\n  ReactDOM.render(\n    <App\n      ref={app => {\n        window.react_interface = app;\n      }}\n      style={{ height: \"100%\" }}\n      //tutorClass={tutor_map[props.tutor] || StylusTutor}\n      //tutorClass={tutor_map[props.tutor]}\n      tutorClass={tutorClass}\n      {...props}\n    />,\n    document.getElementById(\"root\")\n  );\n});\n\n/*\nif (false) {\n  // function setSkillWindowState(evt){\n\n  // }\n  // window.state_machine = ButtonsMachine.initialState\n  // window.state_machine_service = interpret(ButtonsMachine)\n  // window.state_machine_service.start()\n\n  // const state = {\n  //   current:\n  // };\n  // window.state_machine_service.onTransition(current => {\n  // \tconsole.log(\"current.value\")\n  // \tconsole.log(current.value)\n  // \tsetButtonsState(current,window.debugmode)\n\n  //   // this.setState({ current : current })\n  //   }\n  // );\n\n  // function setButtonCallbacks(callbacks){\n  // window.button_callbacks = callbacks\n  // }\n  // window.setButtonCallbacks = setButtonCallbacks\n\n  // function setNoolsCallback(callback){\n  // \twindow.nools_callback = callback\n  // }\n  // window.setNoolsCallback = setNoolsCallback\n\n  function setSkillWindowState(\n    skill_set,\n    select_callback,\n    correctness_callback,\n    initial_select = null,\n    where_colors = null\n  ) {\n    ReactDOM.render(\n      //<View>\n      <CTAT_Tutor></CTAT_Tutor>,\n      //<SkillPanel skill_set={skill_set}\n      //\t\t\t\t\t\tselect_callback={select_callback}\n      //\t\t\t\t\t\tcorrectness_callback={correctness_callback}\n      //\t\t\t\t\t\t\tinitial_select={initial_select}\n      //\t\t\t\t\t\t\twhere_colors={where_colors || undefined}\n      //\t\t\t\t\t\t\t\tcurrent = {window.state_machine}\n      //\t\t\t\t\t\t\t\tservice = {window.state_machine_service}\n      //\n      //\t\t\t\t\t\t\t\t/>\n      //\t\t</View>\n      document.getElementById(\"skill_panel\")\n    );\n  }\n\n  function setButtonsState(current, debugmode = false) {\n    window.state_machine = current;\n    ReactDOM.render(\n      <Buttons\n        current={current}\n        service={window.state_machine_service}\n        debugmode={debugmode}\n        callbacks={window.button_callbacks}\n        nools_callback={window.nools_callback}\n      />,\n      document.getElementById(\"buttons\")\n    );\n  }\n\n  window.setSkillWindowState = setSkillWindowState;\n  window.setButtonCallbacks = setSkillWindowState;\n  window.setButtonsState = setButtonsState;\n\n  // function render(){\n  // let sections = [\n  // \t              {title: 'D', data: ['Devin the long named fool']},\n  // \t              {title: 'J', data: ['Jackson', 'James', 'Jillian', 'Jimmy', 'Joel', 'John', 'Julie']},\n  // \t              {title: 'B', data: ['Backson', 'Bames', 'Billian', 'Bimmy', 'Boel', 'Bohn', 'Bulie']},\n  // \t            ];\n\n  let test_skills = {\n    explanations: [\n      {\n        name: \"E0 + E1\",\n        how: \"E0 + E1\",\n        where: { A: { B: 1 } },\n        when: \"WHEN PART\",\n        which: 7.0,\n        mapping: { \"?sel\": \"A1\", \"?arg0\": \"B1\", \"?arg1\": \"C1\" }\n      },\n      {\n        name: \"E0 + E1\",\n        how: \"E0 + E1\",\n        where: \"WHERE PART\",\n        when: \"WHEN PART\",\n        which: 7.0,\n        mapping: { \"?sel\": \"A2\", \"?arg0\": \"B2\", \"?arg1\": \"C2\" }\n      },\n      {\n        name: \"(E0 + E1) // 10\",\n        how: \"(E0 + E1) // 10\",\n        where: \"WHERE PART\",\n        when: \"WHEN PART\",\n        which: 4.0,\n        mapping: { \"?sel\": \"A1\", \"?arg0\": \"B1\", \"?arg1\": \"C1\" }\n      },\n      {\n        name: \"(E0 + E1) // 10\",\n        how: \"(E0 + E1) // 10\",\n        where: \"WHERE PART\",\n        when: \"WHEN PART\",\n        which: 4.0,\n        mapping: { \"?sel\": \"A2\", \"?arg0\": \"B2\", \"?arg1\": \"C2\" }\n      }\n    ],\n    \"other skills\": [\n      {\n        name: \"(E0 + E1) // 10\",\n        how: \"E0 + E1 + E2\",\n        where: \"WHERE PART (E0 + E1 + E2)\",\n        when: \"WHEN PART (E0 + E1 + E2)\",\n        which: 3.0\n      },\n      {\n        name: \"(E0 + E1 + E2) // 10\",\n        how: \"E0 + E1\",\n        where: \"WHERE PART ((E0 + E1 + E2) // 10)\",\n        when: \"WHEN PART ((E0 + E1 + E2) // 10)\",\n        which: 8.0\n      }\n    ]\n  };\n  // setSkillWindowState({\"skills:\": []});\n\n  if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\n    window.debugmode = true;\n    window.query_apprentice = () => {};\n    setButtonsState(window.state_machine, true);\n    setSkillWindowState(test_skills);\n  } else {\n    window.debugmode = false;\n  }\n}*/\n// setButtonsState(\"press_next\",true,true);\n\n// }\n// document.getElementById('render_button').addEventListener(\"click\",render)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/Arrowhead-01-128.3fbf838f.png\";","module.exports = __webpack_public_path__ + \"static/media/Arrowhead-Down-01-128.912d4e8d.png\";","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport WebView from \"react-native-web-webview\";\nimport autobind from \"class-autobind\";\n\n// import WebViewFile from '../../examples/FracPreBake/FractionArithmetic/HTML/fraction_arithmetic.html';\nimport {\n  Icon,\n  View,\n  Text,\n  StyleSheet,\n  Platform //,\n  // WebView\n} from \"react-native\";\n\nconst queryString = require(\"query-string\");\nconst path = require(\"path\");\n\nvar $ = require(\"jquery\");\n\n// const post_message =\n// \"\\\n// function waitForBridge() {\\\n//    //the react native postMessage has only 1 parameter\\\n//    //while the default one has 2, so check the signature\\\n//    //of the function\\\n//    if (window.postMessage.length !== 1){\\\n//      setTimeout(waitForBridge, 200);\\\n//    }\\\n//    else {\\\n//      window.postMessage(document);\\\n//    }\\\n// }\\\n// \\\n// window.onload = waitForBridge;\\\n// \";\n\nfunction checkTypes(element, types) {\n  var ok = false;\n  for (var i = types.length - 1; i >= 0; i--) {\n    var type = types[i];\n    if (element.classList.contains(type)) ok = true;\n  }\n  return ok;\n}\n\nclass CTAT_Tutor extends React.Component {\n  constructor(props) {\n    super(props);\n    autobind(this);\n\n    this.where_colors = [\n      \"darkorchid\",\n      \"#ff884d\",\n      \"#52d0e0\",\n      \"#feb201\",\n      \"#e44161\",\n      \"#ed3eea\",\n      \"#2f85ee\",\n      \"#562ac6\",\n      \"#cc24cc\"\n    ];\n\n    this.relative_pos_cache = {};\n\n    this.color_class_map = {\n      EXAMPLE: \"CTAT--example\",\n      CORRECT: \"CTAT--correct\",\n      INCORRECT: \"CTAT--incorrect\",\n      HIGHLIGHT: \"CTAT--AL_highlight\",\n      START_STATE: \"CTAT--AL_start\",\n      ATTEMPT: \"\",\n      DEFAULT: \"\"\n    };\n\n    this.ctat_webview = React.createRef();\n\n    this.state = {\n      // \"mode\" : this.props.mode || \"train\",\n      source:\n        \"../../examples/FracPreBake/FractionArithmetic/HTML/fraction_arithmetic.html?question_file=../mass_production/mass_production_brds/AD 5_9_plus_3_7.brd\"\n    };\n    this.start_state_history = [];\n    this.highlighted_elements = [];\n\n    // window.setMode = (mode) => {this.setState({mode : mode })}\n  }\n\n  // setMode(mode){\n  //   if(this.state.mode == \"train\" && mode == \"tutor\"){\n  //     this.clearProposedSAI()\n  //   }\n\n  //   this.setState({mode : mode })\n\n  // }\n\n  componentDidMount() {\n    // window.ctat_webview = this.ctat_webview.current\n\n    console.log(\"THIS\", this);\n    // this.graph = this.iframe_content.CTAT.ToolTutor.tutor.getGraph() || false;\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    console.log(\"UPDATED\", this.state);\n    this.iframe = this.ctat_webview.current;\n\n    if (!this.init_callback) {\n      this.init_callback = x => {};\n    }\n\n    // this._triggerWhenInitialized()\n  }\n\n  getProblemName(){\n    return this.problem_name\n  }\n\n  loadProblem(context) {\n    const prob_obj = context.prob_obj;\n    const nl = context.network_layer;\n    const interactive = context.interactive;\n    this.interactive = context.interactive;\n    this.setState({ source: { html: LOAD_SCREEN } });\n    const promise = new Promise((resolve, reject) => {\n      var HTML_name = prob_obj[\"HTML\"]\n        .substring(prob_obj[\"HTML\"].lastIndexOf(\"/\") + 1)\n        .replace(\".html\", \"\");\n\n      var domain_name = prob_obj[\"domain_name\"] || HTML_name;\n\n      // Point the iframe to the HTML and question_file (brd or nools) for the next problem\n\n      // iframe_content.CTAT = null;\n      // iframe_content.CTATCommShell = null;\n\n      //Repalcing \"..\" w/ \"!u\" Allows to fetch above working dir\n      var HTML_PATH = prob_obj[\"HTML\"].replace(/\\.\\./g,\"!u\"); \n      if (!path.isAbsolute(HTML_PATH)) {\n        HTML_PATH = path.join(context.working_dir || \"/\", HTML_PATH);\n      }\n      // console.log(\"working_dir: \", working_dir)\n      // console.log(\"HTML_PATH: \", HTML_PATH)\n\n      // if(session_id == null){\n      //     user_guid = \"Stu_\" + CTATGuid.guid();\n      //     session_id = CTATGuid.guid();\n      // }\n\n      var qf_exists =\n        prob_obj[\"question_file\"] != undefined &&\n        prob_obj[\"question_file\"].toUpperCase() != \"INTERACTIVE\";\n      var abs_qf_paths = prob_obj['abs_qf_paths'] || false\n      var BRD_name, free_authoring;\n      if (qf_exists) {\n        BRD_name = prob_obj[\"question_file\"]\n          .substring(prob_obj[\"question_file\"].lastIndexOf(\"/\") + 1)\n          .replace(\".brd\", \"\")\n          .replace(\".nools\", \"\");\n        free_authoring = false;\n      } else {\n        BRD_name = \"FREE AUTHORING\";\n        free_authoring = true;\n      }\n      // this.free_authoring =\n      // term_print(prob_obj[\"question_file\"])\n\n      nl.term_print(\"Starting Problem: \" + BRD_name, \"INFO\");\n\n      var qf  = (prob_obj[\"question_file\"]||\"\").replace(/\\.\\./g,\"!u\"); \n      qf = qf_exists\n        ? (abs_qf_paths ?\n            { question_file: context.network_layer.HOST_URL + qf }\n          : { question_file: qf })\n        : { question_file: \"/host/empty.nools\" };\n\n      console.log(\"qf\", qf, interactive, prob_obj);\n      if (!interactive && qf[\"question_file\"].includes(\".nools\")) {\n        console.log(\"BAD QF\", qf[\"question_file\"])\n        nl.kill_this(\n          \"Got question_file: '\" + qf[\"question_file\"] + \"'. Question file cannot be nools in non-interactive mode. Use example tracing.\"\n        );\n      }\n\n      this.problem_obj = prob_obj\n      var logging_params = {\n        problem_name: BRD_name,\n        dataset_level_name1: domain_name,\n        dataset_level_type1: \"Domain\",\n        SessionLog: \"true\",\n        Logging: \"ClientToLogServer\",\n        log_service_url: window.location.origin,\n        user_guid: context.agent_name,\n        session_id: context.session_id\n      };\n      if (\"problem_context\" in prob_obj) {\n        logging_params[\"problem_context\"] = prob_obj[\"problem_context\"];\n      }\n\n      if (\"custom_fields\" in prob_obj) {\n        var custom_fields = prob_obj[\"custom_fields\"];\n        for (var [i, key] of Object.keys(custom_fields).entries()) {\n          logging_params[\"custom_field_name\" + String(i)] = key;\n          logging_params[\"custom_field_value\" + String(i)] = custom_fields[key];\n        }\n      }\n      var params = Object.assign({}, qf, logging_params); //Merge dictionaries\n\n      this.HTML_PATH = HTML_PATH;\n      this.init_callback = () => {\n        resolve({ updateContext: { free_author: free_authoring } });\n      };\n      var source = HTML_PATH + \"?\" + queryString.stringify(params);\n      console.log(\"source\", source);\n      this.graph = null;\n      this.commLibrary = null;\n      this.hasConfig = null;\n      this.setState({\n        source: { uri: source },\n        onLoad: this._triggerWhenInitialized,\n        // TODO: [nr] convert elements to string?\n        steps: prob_obj[\"only_step_ids\"] ? prob_obj[\"only_step_ids\"].flat() : null,\n        selections: prob_obj[\"only_Selections\"]\n          ? prob_obj[\"only_Selections\"].flat() : null\n      });\n      // this.iframe.onLoad = this._triggerWhenInitialized;\n      // this.iframe.src = HTML_PATH + \"?\" + queryString.stringify( params ).search;\n      // setTimout(this._triggerWhenInitialized(),10)\n    });\n    return promise;\n  }\n\n  _inject_element(elm_type, attributes = {}) {\n    var elm = this.iframe_content.document.createElement(elm_type);\n    for (var attr in attributes) {\n      elm.setAttribute(attr, attributes[attr]);\n    }\n    this.iframe_content.document\n      .getElementsByTagName(\"head\")[0]\n      .appendChild(elm);\n  }\n\n  /*\n  _checkAndStartTrigger(){\n      this.iframe_content = this.iframe.frameRef.contentWindow;\n    // if(this.iframe_content.document){\n      this._inject_element('link',   {href:'/CTAT/CTAT.css',type: \"text/css\",rel: \"stylesheet\"})\n      this._inject_element('link',   {href:'/CTAT/normalize.css',type: \"text/css\",rel: \"stylesheet\"})\n      this._inject_element('link',   {href:'/CTAT/front-end.css',type: \"text/css\",rel: \"stylesheet\"})\n      this._inject_element('script', {\"data-silex-static\" : true, type:'text/javascript', src : \"/CTAT/jquery.min.js\"})\n      this._inject_element('script', {\"data-silex-static\" : true, type:'text/javascript', src : \"/CTAT/nools.js\"})\n      this._inject_element('script', {\"data-silex-static\" : true, type:'text/javascript', src : \"/CTAT/ctat.min.js\"})\n      \n      window.setTimeout(() => {\n        this._inject_element('script', {\"data-silex-static\" : true, type:'text/javascript', src : \"/CTAT/ctatloader.js\"})\n        this._triggerWhenInitialized()      \n      }, 100);\n      \n    // }else{\n    //   window.setTimeout(() => {this._checkAndStartTrigger()}, 200);\n    // }\n    \n    \n  }*/\n\n  _triggerWhenInitialized() {\n    console.log(\"TRIGGER WHEN INITIALIZED\");\n    this.iframe_content = this.iframe.frameRef.contentWindow;\n    const iframe_content = this.iframe_content;\n\n    if (\n      typeof iframe_content.CTAT == \"undefined\" ||\n      iframe_content.CTAT == null ||\n      typeof iframe_content.CTATCommShell == \"undefined\" ||\n      iframe_content.CTATCommShell == null ||\n      typeof iframe_content.CTATCommShell.commShell == \"undefined\" ||\n      iframe_content.CTATCommShell.commShell == null ||\n      typeof iframe_content.CTAT.ToolTutor == \"undefined\" ||\n      iframe_content.CTAT.ToolTutor == null ||\n      typeof iframe_content.CTAT.ToolTutor.tutor == \"undefined\" ||\n      iframe_content.CTAT.ToolTutor.tutor == null\n    ) {\n      // term_print('\\x1b[0;30;47m' + \"BLEHH1\" +  '\\x1b[0m');\n      console.log(\"CTAT not defined yet...\");\n      window.setTimeout(() => {\n        this._triggerWhenInitialized();\n      }, 500);\n      return;\n    }\n    this.graph = iframe_content.CTAT.ToolTutor.tutor.getGraph() || false;\n    this.commLibrary = iframe_content.CTATCommShell.commShell.getCommLibrary();\n    this.hasConfig = iframe_content.CTATConfiguration != undefined;\n\n    // console.log(\"graph\")\n    // console.log(graph)\n    // console.log(\"comm\")\n    // console.log(commLibrary)\n    // console.log(hasConfig)\n\n    if (\n      (this.graph || this.interactive) &&\n      this.commLibrary &&\n      this.hasConfig\n    ) {\n      this._inject_element(\"link\", {\n        href: \"/host/css/AL_colors.css\",\n        type: \"text/css\",\n        rel: \"stylesheet\"\n      });\n      // var link = iframe_content.document.createElement('link');\n      // link.setAttribute('rel', 'stylesheet');\n      // link.setAttribute('type', 'text/css');\n      // // link.setAttribute('href', \"../\".repeat(working_dir.split('/').length+1) + 'css/AL_colors.css');\n      // link.setAttribute('href', document.location.origin + '/css/AL_colors.css');\n      // iframe_content.document.getElementsByTagName('head')[0].appendChild(link);\n\n      //Gets rid of annyoing sai printout on every call to sendXML\n      iframe_content.flashVars.setParams({ deliverymode: \"bleehhhh\" });\n\n      //Grab these event constants from CTAT\n      this.CTAT_CORRECT =\n        iframe_content.CTAT.Component.Base.Tutorable.EventType.correct;\n      this.CTAT_INCORRECT =\n        iframe_content.CTAT.Component.Base.Tutorable.EventType.incorrect;\n      this.CTAT_ACTION =\n        iframe_content.CTAT.Component.Base.Tutorable.EventType.action;\n\n      console.log(\"CTAT INITIALIZED!\");\n      this.init_callback(this);\n    } else {\n      // term_print('\\x1b[0;30;47m' + \"BLEHH2\" + '\\x1b[0m');\n      console.log(\"CTAT not initialized yet...\");\n      window.setTimeout(() => {\n        this._triggerWhenInitialized();\n      }, 500);\n    }\n  }\n\n  handle_user_set_state(evt) {\n    var sai = evt.detail.sai;\n    var sel = sai.getSelection();\n\n    // var elm = );\n    // elm = this.iframe_content.document.getElementById(sai.getSelection());\n    // console.log(sai.getInput())\n    if (sai.getInput() != \"\") {\n      this.colorElement(sel, \"START_STATE\");\n      //elm.firstChild.classList.add(\"CTAT--AL_start\");\n      this.start_state_elements.push(sel);\n    } else {\n      // elm.firstChild.classList.remove(\"CTAT--AL_start\");\n      this.colorElement(sel, \"DEFAULT\");\n      if (this.start_state_elements.includes(sel)) {\n        this.start_state_elements.remove(sel);\n      }\n    }\n  }\n\n  enterSetStartStateMode() {\n    this.start_state_elements = [];\n    this.iframe_content.document.addEventListener(\n      this.CTAT_ACTION,\n      this.handle_user_set_state\n    );\n  }\n\n  exitSetStartStateMode() {\n    this.iframe_content.document.removeEventListener(\n      this.CTAT_ACTION,\n      this.handle_user_set_state\n    );\n\n    console.log(\"START DONE\");\n    for (var i in this.start_state_elements) {\n      var sel = this.start_state_elements[i];\n      var elm = this.iframe_content.document.getElementById(sel);\n      if (elm.firstChild.value) {\n        this.lockElement(sel);\n        // elm.setAttribute(\"data-ctat-enabled\",\"false\")\n        // elm.firstChild.setAttribute(\"contentEditable\",\"false\")\n        // elm.firstChild.disabled = true;\n      }\n      this.colorElement(sel, \"DEFAULT\");\n      // elm.firstChild.classList.remove(\"CTAT--AL_start\");\n      // console.log(\"BOOP\",elm);\n    }\n    //Take away focus from whatever is there so it isn't treated as an example\n    // document.activeElement.blur();\n    // console.log(\"STAT\",getState())\n    this.start_state_history.push(this.getState());\n    // last_action = proposed_SAI = null;\n  }\n\n  handleUserExample(evt) {\n    this.handleUserInput(evt, \"EXAMPLE\");\n  }\n  handleUserAttempt(evt) {\n    this.handleUserInput(evt, \"ATTEMPT\");\n  }\n\n  handleUserInput(evt, type) {\n    var sai = evt.detail.sai;\n    var sel = sai.getSelection();\n\n    var elm = this.iframe_content.document.getElementById(sel);\n    if (elm.firstChild.contentEditable == \"false\") {\n      console.log(\"BAIL\");\n      return;\n    }\n\n    var sai = {\n      selection: sai.getSelection(),\n      action: sai.getAction(),\n      inputs: { value: sai.getInput() }\n    };\n\n    this.lockElement(sel);\n    this.colorElement(sel, type);\n\n    // if(this.state.mode == \"train\"){\n    if (type == \"EXAMPLE\") {\n      this.props.interactions_service.send({\n        type: \"DEMONSTRATE\",\n        data: { ...sai, reward: 1 }\n      });\n    } else if (type == \"ATTEMPT\") {\n      console.log(\"SEND ATTEMPT\", sai);\n      this.props.interactions_service.send({\n        type: \"ATTEMPT\",\n        data: { ...sai }\n      });\n    } else {\n      throw \"uknown type given\";\n    }\n    // }else if(this.state.mode == \"tutor\"){\n    //   this.props.interactions_service.send({\n    //     type : \"ATTEMPT\",\n    //     data : {...sai,reward : 1},\n    //   });\n    // }\n  }\n\n  displayCorrectness(context, event) {\n    var sai = context.staged_SAI;\n    var sel = sai.selection;\n    if (event.data == 1) {\n      this.colorElement(sel, \"CORRECT\");\n    } else {\n      this.colorElement(sel, \"INCORRECT\");\n      this.unlockElement(sel);\n    }\n  }\n\n  printFeedback(context, event) {\n    var nl = context.network_layer;\n    var staged_SAI = context.staged_SAI;\n\n    var type = context.action_type;\n    // var reward = staged_SAI.reward\n    if (!context.feedback_map || Object.keys(context.feedback_map).length === 0) {\n      if (type == \"ATTEMPT\") {\n        type = staged_SAI.reward > 0 ? \"CORRECT\" : \"INCORRECT\";\n      }\n\n      // var color = color_map[type]\n      var inps =\n        staged_SAI.inputs[\"value\"] != null ? staged_SAI.inputs[\"value\"] : \"\";\n\n      nl.term_print(type + \": \" + staged_SAI.selection + \" -> \" + inps, type);\n    } else {\n      for (var index in context.feedback_map) {\n        var skill_app = context.skill_applications[index];\n        var type = context.feedback_map[index].toUpperCase();\n        // var color = color_map[type]\n        var inps =\n          skill_app.inputs[\"value\"] != null ? skill_app.inputs[\"value\"] : \"\";\n        nl.term_print(type + \": \" + skill_app.selection + \" -> \" + inps, type);\n      }\n    }\n  }\n\n  _done_clicked_example(evt) {\n    this.handleUserExample({\n      detail: {\n        sai: new this.iframe_content.CTATSAI(\"done\", \"ButtonPressed\", \"-1\")\n      }\n    });\n  }\n\n  enterFeedbackMode() {\n    this.iframe_content.document.addEventListener(\n      this.CTAT_ACTION,\n      this.handleUserExample\n    );\n    this.iframe_content.document\n      .getElementById(\"done\")\n      .addEventListener(\"click\", this._done_clicked_example);\n  }\n\n  exitFeedbackMode() {\n    this.iframe_content.document.removeEventListener(\n      this.CTAT_ACTION,\n      this.handleUserExample\n    );\n    this.iframe_content.document\n      .getElementById(\"done\")\n      .removeEventListener(\"click\", this._done_clicked_example);\n  }\n\n  _done_clicked_attempt(evt) {\n    this.handleUserAttempt({\n      detail: {\n        sai: new this.iframe_content.CTATSAI(\"done\", \"ButtonPressed\", \"-1\")\n      }\n    });\n  }\n\n  enterTutoringMode() {\n    this.iframe_content.document.addEventListener(\n      this.CTAT_ACTION,\n      this.handleUserAttempt\n    );\n    this.iframe_content.document\n      .getElementById(\"done\")\n      .addEventListener(\"click\", this._done_clicked_attempt);\n  }\n\n  exitTutoringMode() {\n    this.iframe_content.document.removeEventListener(\n      this.CTAT_ACTION,\n      this.handleUserAttempt\n    );\n    this.iframe_content.document\n      .getElementById(\"done\")\n      .removeEventListener(\"click\", this._done_clicked_attempt);\n  }\n\n\n\n  handle_foci_select(evt) {\n    console.log(\"FOCI SELECT!\");\n    for (var ele of evt.path) {\n      console.log(\"EELE\", ele);\n      if (\n        ele.classList != undefined &&\n        ele.classList.contains(\"CTATComponent\")\n      ) {\n        var indx = this.current_foci.indexOf(ele);\n        // console.log(current_foci)\n        if (indx == -1) {\n          this.current_foci.push(ele);\n          this.highlightElement(ele.id, 1);\n          // ele.classList.add(\"CTAT--AL_highlight1\");\n        } else {\n          this.current_foci.splice(indx, 1);\n          // ele.classList.remove(\"CTAT--AL_highlight1\");\n          this.unhighlightElement(ele.id);\n        }\n        console.log(this.current_foci);\n\n        break;\n      }\n    }\n  }\n\n  enterFociMode() {\n    console.log(\"FOCI START!\");\n    this.unhighlightAll();\n    this.current_foci = [];\n    this.iframe_content.document.addEventListener(\n      \"click\",\n      this.handle_foci_select\n    );\n  }\n\n  getCurrentFoci() {\n    if (this.current_foci) {\n      return this.current_foci.map(elm => elm.id);\n    } else {\n      return [];\n    }\n  }\n\n  exitFociMode() {\n    this.unhighlightAll();\n    console.log(\"FOCI DONE!\");\n    // var foci_of_attention = [];\n    // for(var ele of this.current_foci){\n    //     // ele.classList.remove(\"CTAT--AL_highlight1\");\n    //     this.colorElement(ele.id)\n    //     // foci_of_attention.push(ele.id);\n    // }\n    // console.log(foci_of_attention)\n    // current_sai_data.foci_of_attention = foci_of_attention;\n    this.current_foci = [];\n    this.iframe_content.document.removeEventListener(\n      \"click\",\n      this.handle_foci_select\n    );\n  }\n\n  _shouldSkipTraining(sai) {\n    if (!this.state.steps && !this.state.selections) {\n      return false;\n    }\n\n    if (this.state.steps) {\n      var tracer = this.iframe_content.CTAT.ToolTutor.tutor.getTracer();\n      var stepId = tracer.getLastResult().getStepID();\n      console.log(\"stepId:\", stepId);\n\n      if (this.state.steps.includes(stepId)) {\n        return false;\n      }\n    }\n\n    if (this.state.selections &&\n        this.state.selections.includes(sai.selection)) {\n      return false;\n    }\n\n    return true;\n  }\n\n  //---------- Xstate API with promises ----------------\n  attemptStagedSAI(context, event) {\n    const promise = new Promise((resolve, reject) => {\n      // try {\n      const sai = context.staged_SAI;\n      var currentElement = this.iframe_content.document.getElementById(\n        sai.selection\n      );\n      const CTAT_CORRECT = this.CTAT_CORRECT;\n      const CTAT_INCORRECT = this.CTAT_INCORRECT;\n      const shouldSkipTraining = this._shouldSkipTraining;\n      const lockElement = this.lockElement;\n\n      function handle_ctat_feedback(evt) {\n        console.log(\"EVENT\", evt);\n        console.log(\"EVENT\", evt.detail.sai.getTransactionID());\n        currentElement.removeEventListener(CTAT_CORRECT, handle_ctat_feedback);\n        currentElement.removeEventListener(\n          CTAT_INCORRECT,\n          handle_ctat_feedback\n        );\n\n        //If in test mode make sure that fields are locked on incorrect\n        console.log(\"MOOOOOOOO\", context)\n        if(context.test_mode){\n          lockElement(sai.selection)\n        }\n\n        resolve({\n          ...sai,\n          reward: evt.type == CTAT_CORRECT ? 1 : -1,\n          skipTraining: shouldSkipTraining(sai)\n        });\n      }\n\n      currentElement.addEventListener(CTAT_CORRECT, handle_ctat_feedback);\n      currentElement.addEventListener(CTAT_INCORRECT, handle_ctat_feedback);\n      this.applySAI(sai);\n      // }catch(err){\n      //   reject(err)\n      // }\n    });\n    return promise;\n  }\n  applyNextExample(context, event) {\n    const promise = new Promise((resolve, reject) => {\n      // try{\n      this.applyHint();\n      var sai = this.getDefaultSAI();\n      this.colorElement(sai.selection, \"EXAMPLE\");\n      this.applySAI(sai);\n      resolve({\n        ...sai,\n        reward: 1,\n        skipTraining: this._shouldSkipTraining(sai)\n      });\n      //   }catch(err){\n      //     reject(err)\n      //   }\n    });\n    return promise;\n  }\n  //----------------------------------------------------\n\n  applySAI(sai) {\n    var sel_elm = this.iframe_content.document.getElementById(sai.selection);\n    if ((sel_elm[\"data-ctat-enabled\"] || \"true\") == \"false\") {\n      //Force incorrect if try to edit uneditaable\n      var incorrect_event = new CustomEvent(this.CTAT_INCORRECT, {\n        detail: { sai: sai, component: sel_elm },\n        bubbles: true,\n        cancelable: true\n      });\n      sel_elm.dispatchEvent(incorrect_event);\n    }\n\n    if (sai.action == \"ButtonPressed\") {\n      sai.inputs = { value: -1 };\n    }\n\n    // last_action = sai\n    const CTATSAI = this.iframe_content.CTATSAI;\n    var sai_obj = new CTATSAI(sai.selection, sai.action, sai.inputs[\"value\"]);\n    this.iframe_content.CTATCommShell.commShell.processComponentAction(\n      sai_obj,\n      true\n    );\n  }\n\n  lockElement(name) {\n    var comp = this.iframe_content.CTATShellTools.findComponent(name)[0];\n    comp.setEnabled(false);\n  }\n\n  unlockElement(name) {\n    var comp = this.iframe_content.CTATShellTools.findComponent(name)[0];\n    comp.setEnabled(true);\n  }\n\n  colorElement(name, type) {\n    var elm = this.iframe_content.document.getElementById(name);\n    // if(type == \"DEFAULT\"){\n    //   for (const [key, value] of Object.entries(this.color_class_map)) {\n    //     if(elm.firstElementChild.classList.contains(value)){\n    //       elm.firstElementChild.classList.remove(value);\n    //     }\n    //   }\n    // }else{\n    // this.colorElement(name,\"DEFAULT\")\n    if (elm && elm.firstElementChild) {\n      elm.firstElementChild.setAttribute(\"class\", this.color_class_map[type]);\n    }\n    // elm.firstElementChild.classList.add(this.color_class_map[type]);\n    //   }\n  }\n\n  // highlightSAI(sai){\n\n  //   if(sai.mapping){\n  //       Object.entries(sai.mapping).forEach(function(v,index){\n  //           const [var_str, elem_str] = v\n  //           var colorIndex = 1\n  //           if(var_str != \"?sel\"){\n  //               colorIndex = 2 + ((index-1) % (this.where_colors.length-1));\n  //               console.log(colorIndex)\n  //           }\n  //           // elm = this.iframe_content.document.getElementById(elem_str.replace('?ele-',\"\"));\n  //           this.highlightElement(elem_str,colorIndex)\n  //       });\n  //   }else{\n  //     alert(\"IDK WHAT THIS IS\")\n  //       // this.highlighted_elements.push(elm.firstElementChild.id)\n  //       // elm.firstElementChild.classList.add(\"CTAT--AL_highlight1\")\n  //   }\n  // }\n\n  highlightElement(name, colorIndex = 1) {\n    this.unhighlightElement(name);\n    var elm = this.iframe_content.document.getElementById(\n      name.replace(\"?ele-\", \"\")\n    );\n    elm.firstElementChild.classList.add(\"CTAT--AL_highlight\" + colorIndex);\n    this.highlighted_elements.push(name);\n    // console.log(\"H\", this.highlighted_elements)\n  }\n\n  unhighlightElement(name) {\n    if (this.highlighted_elements.includes(name)) {\n      var elm = this.iframe_content.document.getElementById(\n        name.replace(\"?ele-\", \"\")\n      );\n      var before = elm.firstElementChild.classList.toString();\n      for (var i = 1; i <= this.where_colors.length; i++) {\n        var c = \"CTAT--AL_highlight\" + i;\n        // console.log(c)\n        if (elm.firstElementChild.classList.contains(c)) {\n          elm.firstElementChild.classList.remove(c);\n        }\n      }\n      var after = elm.firstElementChild.classList.toString();\n      // console.log(\"BEF-AFT:\", before,after)\n      var index = this.highlighted_elements.indexOf(name);\n      if (index > -1) {\n        this.highlighted_elements.splice(index, 1);\n      }\n    }\n  }\n\n  clearElement(name) {\n    var elm = this.iframe_content.document.getElementById(name);\n    elm.firstElementChild.value = \"\";\n  }\n\n  highlightSAI(sai) {\n    if (sai.mapping) {\n      var index = 0;\n      for (var var_str in sai.mapping) {\n        var elem_str = sai.mapping[var_str];\n        var colorIndex = 1;\n        if (var_str != \"?sel\") {\n          colorIndex = 2 + ((index - 1) % (this.where_colors.length - 1));\n          // console.log(colorIndex)\n        }\n        // elm = this.iframe_content.document.getElementById(elem_str.replace('?ele-',\"\"));\n        this.highlightElement(elem_str, colorIndex);\n        index++;\n      }\n    } else {\n      alert(\"RESPONSE IS MISSING FIELD:'mapping'\");\n      // this.highlighted_elements.push(elm.firstElementChild.id)\n      // elm.firstElementChild.classList.add(\"CTAT--AL_highlight1\")\n    }\n  }\n\n  unhighlightAll() {\n    // console.log(\"HIGHLIGHTED_/\", this.highlighted_elements)\n    for (var elem_str of [...this.highlighted_elements]) {\n      this.unhighlightElement(elem_str);\n    }\n  }\n\n  getDefaultSAI() {\n    var sai = this.graph\n      .getExampleTracer()\n      .getBestNextLink()\n      .getDefaultSAI();\n    sai = {\n      selection: sai.getSelection(),\n      action: sai.getAction(),\n      inputs: { value: sai.getInput() }\n    };\n    return sai;\n  }\n\n  clearProposedSAI() {\n    if (this.proposed_SAI) {\n      this.clearElement(this.proposed_SAI.selection);\n      this.unlockElement(this.proposed_SAI.selection.replace(\"?ele-\", \"\"));\n      this.unhighlightAll();\n      this.proposed_SAI = null;\n    }\n  }\n\n  proposeSAI(sai) {\n    // console.log(\"EVDA\", event.data)\n    // var sai = event.data\n    this.clearProposedSAI();\n    this.proposed_SAI = { ...sai };\n    this.highlightSAI(sai);\n    this.stageSAI(sai);\n  }\n\n  stageSAI(sai) {\n    var comp = this.iframe_content.CTATShellTools.findComponent(\n      sai.selection\n    )[0];\n    var sai_obj = new this.iframe_content.CTATSAI(\n      sai.selection,\n      sai.action,\n      sai.inputs[\"value\"]\n    );\n    comp.executeSAI(sai_obj);\n    this.lockElement(sai.selection);\n  }\n\n  confirmProposedSAI() {\n    if (this.proposed_SAI) {\n      this.unhighlightAll();\n      this.proposed_SAI = null;\n    }\n  }\n\n  applyHint() {\n    var message =\n      \"<message><properties>\" +\n      \"<MessageType>InterfaceAction</MessageType>\" +\n      \"<Selection><value>hint</value></Selection>\" +\n      \"<Action><value>ButtonPressed</value></Action>\" +\n      \"<Input><value><![CDATA[hint request]]></value></Input>\" +\n      \"</properties></message>\";\n    // console.log(\"MESSAGE\",message);\n    this.commLibrary.sendXML(message);\n  }\n\n  getState({\n    encode_relative = true,\n    strip_offsets = true,\n    use_offsets = true,\n    use_class = true,\n    use_id = true,\n    append_ele = false,\n    numeric_values = false\n  } = {}) {\n    var relative_pos_cache = this.relative_pos_cache;\n    var HTML_PATH = this.HTML_PATH;\n    var state_array = this.iframe_content.$(\"div\").toArray();\n    // state_array.push({current_task: current_task});\n\n    var state_json = {};\n    var count = 0;\n    $.each(state_array, function(idx, element) {\n      obj = {};\n      if (\n        element.classList.contains(\"CTATComponent\") &&\n        !element.classList.contains(\"CTATTable\")\n      ) {\n        // if(obj[\"className\"] == \"CTATTextField\") {continue;} //Skip table objects and just use cells\n        if (element.classList[0] != \"CTATTextField\") {\n          //Skip text fields\n          if (use_class) {\n            obj[\"dom_class\"] = element.classList[0];\n          }\n          if (use_offsets) {\n            obj[\"offsetParent\"] = element.offsetParent.dataset.silexId;\n            obj[\"offsetLeft\"] = element.offsetLeft;\n            obj[\"offsetTop\"] = element.offsetTop;\n            obj[\"offsetWidth\"] = element.offsetWidth;\n            obj[\"offsetHeight\"] = element.offsetHeight;\n          }\n\n          if (use_id) {\n            obj[\"id\"] = element.id;\n          }\n\n          if (\n            checkTypes(element, [\n              \"CTATTextInput\",\n              \"CTATComboBox\",\n              \"CTATTable--cell\"\n            ])\n          ) {\n            obj['type'] = \"TextField\"\n            obj[\"value\"] = element.firstElementChild.value;\n            if (numeric_values) {\n              obj[\"value\"] = Number(obj[\"value\"]) || obj[\"value\"];\n            }\n            obj[\"contentEditable\"] =\n              element.firstElementChild.contentEditable == \"true\";\n            // obj[\"name\"] = element.id\n          }else if(checkTypes(element, [\"CTATButton\"])){\n            obj['type'] = \"Button\"\n          }\n          // if(checkTypes(element, [\"CTATTextField\", \"CTATComboBox\"])){\n          //  obj[\"textContent\"] = element.textContent;\n          // }\n\n          if (checkTypes(element, [\"CTATComboBox\"])) {\n            obj['type'] = \"ComboBox\"\n            // if(element.options){\n            //Probably not the best\n            var options = element.firstElementChild.options;\n            var temp = [];\n            for (var i = 0; i < options.length; i++) {\n              temp.push(options[i].text);\n            }\n            obj[\"options\"] = Object.assign({}, temp);\n\n            // }\n          }\n\n          if(!obj['type']){ obj['type'] = \"Component\"}\n          let name = (append_ele ? \"?ele-\" : \"\") + element.id;\n          // console.log(name,append_ele)\n          state_json[name] = obj;\n          count++;\n        }\n      }\n      // add question marks for apprentice\n      // element = jQuery.extend({}, element);\n      // element = jQuery.data(element);\n      // if(element && !jQuery.isEmptyObject(element) && element.CTATComponent){\n      //  console.log(\"ELEEMENT\", element);\n      //  // element = jQuery.data(element.CTATComponent);\n      //  element = element.CTATComponent;\n      //  // if(element.CTATComponent){\n      //    // element.CTATComponent = jQuery.data(element.CTATComponent);\n      //  // }\n      //  console.log(\"KEY \", idx, element.className);\n      //  state_json[\"?ele-\" + idx] = element;\n      //  count++;\n      // }\n\n      // element.component = jQuery.data(element.component);\n\n      // if(element.hasAttribute(\"removeData\") ){\n      //  element.removeData();\n      //  console.log(\"WOOOPS\");\n      // }\n    });\n\n    // Gets lists of elements that are to the left, right and above the current element\n    if (encode_relative) {\n      const elm_list = Object.entries(state_json);\n      // console.log(elm_list);\n\n      var rel_objs;\n      if (!(HTML_PATH in relative_pos_cache)) {\n        rel_objs = {};\n        for (var i = 0; i < elm_list.length; i++) {\n          // console.log(elm_list[i][0])\n          rel_objs[elm_list[i][0]] = {\n            to_left: [],\n            to_right: [],\n            above: [],\n            below: []\n          };\n        }\n\n        for (var i = 0; i < elm_list.length; i++) {\n          for (var j = 0; j < elm_list.length; j++) {\n            if (i != j) {\n              var [a_n, a_obj] = elm_list[i];\n              var [b_n, b_obj] = elm_list[j];\n              if (\n                a_obj.offsetTop > b_obj.offsetTop &&\n                a_obj.offsetLeft < b_obj.offsetLeft + b_obj.offsetWidth &&\n                a_obj.offsetLeft + a_obj.offsetWidth > b_obj.offsetLeft\n              ) {\n                var dist = a_obj.offsetTop - b_obj.offsetTop;\n                rel_objs[a_n][\"above\"].push([b_n, dist]);\n                rel_objs[b_n][\"below\"].push([a_n, dist]);\n              }\n              if (\n                a_obj.offsetLeft < b_obj.offsetLeft &&\n                a_obj.offsetTop + a_obj.offsetHeight > b_obj.offsetTop &&\n                a_obj.offsetTop < b_obj.offsetTop + b_obj.offsetHeight\n              ) {\n                var dist = b_obj.offsetLeft - a_obj.offsetLeft;\n                rel_objs[a_n][\"to_right\"].push([b_n, dist]);\n                rel_objs[b_n][\"to_left\"].push([a_n, dist]);\n\n                // console.log(a_n,b_n,dist)\n              }\n            }\n          }\n        }\n\n        var grab1st = function(x) {\n          return x[0];\n        };\n        var compare2nd = function(x, y) {\n          return x[1] - y[1];\n        };\n        var grabN = function(x, n) {\n          let out = [];\n          for (var i = 0; i < n; i++) {\n            if (i < x.length) {\n              out.push(x[i]);\n            } else {\n              out.push(null);\n            }\n          }\n          return out;\n        };\n        for (var i = 0; i < elm_list.length; i++) {\n          var rel_obj = rel_objs[elm_list[i][0]];\n          // rel_obj[\"below\"] = rel_obj[\"below\"].sort(compare2nd).map(grab1st).join(' ');\n          // rel_obj[\"above\"] = rel_obj[\"above\"].sort(compare2nd).map(grab1st).join(' ');\n          // rel_obj[\"to_right\"] = rel_obj[\"to_right\"].sort(compare2nd).map(grab1st).join(' ');\n          // rel_obj[\"to_left\"] = rel_obj[\"to_left\"].sort(compare2nd).map(grab1st).join(' ');\n          // console.log(elm_list[i], rel_obj[\"to_left\"].sort(compare2nd))\n          rel_obj[\"below\"] =\n            rel_obj[\"below\"].sort(compare2nd).map(grab1st)[0] || \"\";\n          rel_obj[\"above\"] =\n            rel_obj[\"above\"].sort(compare2nd).map(grab1st)[0] || \"\";\n          rel_obj[\"to_right\"] =\n            rel_obj[\"to_right\"].sort(compare2nd).map(grab1st)[0] || \"\";\n          rel_obj[\"to_left\"] =\n            rel_obj[\"to_left\"].sort(compare2nd).map(grab1st)[0] || \"\";\n\n          // rel_obj[\"below\"] = grabN(rel_obj[\"below\"].sort(compare2nd).map(grab1st),2);\n          // rel_obj[\"above\"] = grabN(rel_obj[\"above\"].sort(compare2nd).map(grab1st),2);\n          // rel_obj[\"to_right\"] = grabN(rel_obj[\"to_right\"].sort(compare2nd).map(grab1st),2);\n          // rel_obj[\"to_left\"] = grabN(rel_obj[\"to_left\"].sort(compare2nd).map(grab1st),2);\n        }\n\n        // console.log(rel_objs)\n        relative_pos_cache[HTML_PATH] = rel_objs;\n      } else {\n        rel_objs = relative_pos_cache[HTML_PATH];\n      }\n\n      for (var i = 0; i < elm_list.length; i++) {\n        var obj = state_json[elm_list[i][0]];\n        var rel_obj = rel_objs[elm_list[i][0]];\n        // console.log(rel_obj)\n        // console.log(elm_list[i][0])\n        // console.log(relative_pos_cache[HTML_PATH])\n\n        obj[\"below\"] = rel_obj[\"below\"];\n        obj[\"above\"] = rel_obj[\"above\"];\n        obj[\"to_right\"] = rel_obj[\"to_right\"];\n        obj[\"to_left\"] = rel_obj[\"to_left\"];\n        if (strip_offsets) {\n          delete obj[\"offsetTop\"];\n          delete obj[\"offsetLeft\"];\n          delete obj[\"offsetWidth\"];\n          delete obj[\"offsetHeight\"];\n        }\n\n        state_json[elm_list[i][0]] = obj;\n      }\n    }\n\n    console.log(\"STATE JSON\", state_json);\n    return state_json;\n  }\n\n  // state_update(state){\n\n  // }\n\n  // webview_loaded(message){\n  //   console.log(message)\n  //   var d = message.nativeEvent.data;\n  //   console.log(\"document&:\",d)\n  //   console.log(document.getElementsByClassName('background-initial'))\n  //   // window.document.domain = \"http://0.0.0.0:8000\"\n  // }\n\n  // setRef = webview => {\n  //   this.ctat_webview = webview;\n  // }\n  render() {\n    return (\n      <WebView\n        //title=\"hey\"\n        ///*ref={function(webview) {window.ctat_webview = webview;*/}\n        //                        this.iframe_content = webview.frameRef.contentWindow;\n        //                        console.log(\"THIS\",this)\n        //                        // this.graph = this.iframe_content.CTAT.ToolTutor.tutor.getGraph() || false;\n        //                       console.log(\"MOOP\",webview)}}\n        ref={this.ctat_webview}\n        // style={{ height: 700, width: 400 }}\n        originWhitelist={[\"*\"]}\n        // source={{\"uri\": \"http://0.0.0.0:8000/HTML/fraction_arithmetic.html?question_file=../mass_production/mass_production_brds/AD 5_9_plus_3_7.brd\"}}\n        source={this.state.source}\n        onLoad={this.state.onLoad}\n        // source={{\"html\": \"<!DOCTYPE html><html><head></head><body> HERE IS THE TUTOR... ARE YOU LEARNING YET? </body></html>\"}}\n        // source={{\"html\": \"<? echo file_get_contents('http://0.0.0.0:8000/HTML/fraction_arithmetic.html'); ?>\"}}\n        // injectedJavaScript={\"window.booger = document\"}\n        // onMessage={this.webview_loaded}\n      />\n    );\n  }\n}\n\nconst LOAD_SCREEN =\n  '<!DOCTYPE html> \\\n<html>\\\n<head>\\\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\\\n<style>\\\n.loader {\\\n  border: 16px solid #f3f3f3;\\\n  border-radius: 50%;\\\n  border-top: 16px solid #3498db;\\\n  width: 120px;\\\n  height: 120px;\\\n  -webkit-animation: spin 2s linear infinite; /* Safari */\\\n  animation: spin 2s linear infinite;\\\n  position: absolute;\\\n  left: 50%;\\\n  top: 50%;\\\n  transform: translate(-50%, -50%);*/\\\n}\\\n\\\n/* Safari */\\\n@-webkit-keyframes spin {\\\n  0% { -webkit-transform: rotate(0deg); }\\\n  100% { -webkit-transform: rotate(360deg); }\\\n}\\\n\\\n@keyframes spin {\\\n  0% { transform: rotate(0deg); }\\\n  100% { transform: rotate(360deg); }\\\n}\\\n</style>\\\n</head>\\\n<body>\\\n\\\n<h2>How To Create A Loader</h2>\\\n\\\n<div class=\"loader\"></div>\\\n\\\n</body>\\\n</html>\\\n';\n\nexport default CTAT_Tutor;\n","import Svg, {\n  Circle,\n  Ellipse,\n  G,\n  Text as SvgText,\n  TSpan,\n  TextPath,\n  Path,\n  Polygon,\n  Polyline,\n  Line,\n  Rect,\n  Use,\n  Image,\n  Symbol,\n  Defs,\n  LinearGradient,\n  RadialGradient,\n  Stop,\n  ClipPath,\n  Pattern,\n  Mask,\n  // Filter,\n  // FEGaussianBlur,\n  // FEOffset,\n  // FEMerge,\n  // FEMergeNode,\n} from 'react-native-svg';\n\n/* Use this if you are using Expo\nimport { Svg } from 'expo';\nconst { Circle, Rect } = Svg;\n*/\n\nimport React from 'react';\nimport {\n  Icon,\n  View,\n  Text,\n  StyleSheet,\n  TouchableHighlight,\n  TouchableWithoutFeedback,\n  Platform, \n  // WebView\n  Dimensions\n} from 'react-native';\n\nimport autobind from 'class-autobind';\nimport BezierFit from './c_modules/bezier_fit/bezier_fit'\n// import Seshat from './c_modules/seshat/seshat'\nimport StrokeClassifier from \"./StrokeClassifier\"\n\nconst MAX_STROKE_LENGTH = 512\nconst MIN_DIST = 4.0\n// var stroke_id_counter = 0;\n\nconst get_min = (key,strokes) => Math.min(...Object.values(strokes).map((stroke)=>stroke.bounds[key])) \nconst get_max = (key,strokes) => Math.max(...Object.values(strokes).map((stroke)=>stroke.bounds[key])) \nconst range = (start, end) => {\n  return Array(end - start).fill().map((_, idx) => start + idx)\n}\nconst array_equal = (a,b) => {\n  if (a === b) return true;\n  if (a == null || b == null) return false;\n  if (a.length != b.length) return false;\n  for (var i = 0; i < a.length; ++i) {\n    if (a[i] !== b[i]) return false;\n  }\n  return true;\n}\n\nfunction pick(obj, keys){\n  var out = {}\n  Object.keys(obj).forEach((x) => {if(keys.includes(x)){out[x] = obj[x]}})\n  return out\n}\n\n\nconst DEFAULT_START_STATE = {\n      pen_down : false,\n      strokes : {},\n      active_elements : [],\n      n_strokes : 0,\n      mode : \"loading\",\n      check_button_callback: null,\n      elmUnderPoint : null,\n  };\n\n/////\nexport default class StylusTutor extends React.Component {\n  \n  state = {...DEFAULT_START_STATE, ...{strokes:{}} }\n\n  constructor(props){\n    super(props);\n    autobind(this)\n\n    // if(!this.props.gridWidth) this.props.gridWidth = 100;\n    // if(!this.props.groupMode) this.props.groupMode = \"grid\"\n      \n    \n    this.BezierFit = new BezierFit();\n      this.BezierFit.promise.then(() => {\n        this.fitCurve = this.BezierFit.fitCurve\n        this.groupStrokes = this.BezierFit.groupStrokes\n        this.fitCurve([[1,2],[3,4],[5,6],[7,8]])\n    })\n\n    this.StrokeClassifier = new StrokeClassifier();\n    this.StrokeClassifier.promise.then(() => {\n      this.recognize_symbol = this.StrokeClassifier.recognize_symbol\n    })\n\n    // this.Seshat = new Seshat();\n    //   this.Seshat.promise.then(() => {\n    //     this.recognize_symbol = this.Seshat.recognize_symbol\n    //     // this.recognize_symbol([\n    //     //     [\n    //     //     [200,200],\n    //     //     [210,210],\n    //     //     [220,220],\n    //     //     [230,230],\n    //     //     [240,240],\n    //     //     [250,250],\n    //     //     ],\n    //     //     [\n    //     //     [250,200],\n    //     //     [240,210],\n    //     //     [230,220],\n    //     //     [220,230],\n    //     //     [210,240],\n    //     //     [200,250],\n    //     //     ],\n    //     //     ])\n    //     // console.log(\"I HAVE COMPLETED\")\n    //     // this.groupStrokes = this.BezierFit.groupStrokes\n    //     // this.fitCurve([[1,2],[3,4],[5,6],[7,8]])\n    // })\n\n\n    window.setMode = (mode) => {this.setState({mode : mode })}\n\n    this.where_colors = [  \"darkorchid\",  \"#ff884d\",  \"#52d0e0\", \"#feb201\",  \"#e44161\", \"#ed3eea\", \"#2f85ee\",  \"#562ac6\", \"#cc24cc\"]\n    // this.color_map = {\n    //   \"EXAMPLE\" : \"dodgerblue\",\n    //   \"CORRECT\" : \"limegreen\",\n    //   \"INCORRECT\" : \"red\",\n    //   \"HIGHLIGHT\" : \"darkorchid\",\n    //   \"START_STATE\" : \"darkcyan\",\n    //   \"DEFAULT\" : \"black\"\n    //   };\n    this.mode_to_color = {\n      \"set_start_state\" : \"START_STATE\",\n      \"demonstrate\" : \"EXAMPLE\",\n      \"debug\" : \"gray\"\n    }\n    this.current_foci = [];\n    this.start_state_history = [];\n    this.highlighted_elements = [];\n    this.elements = {};\n    this.groups = [];\n    // this.getEvaluatable = this.getEvaluatable.bind(this)\n    // this.evaluate = this.evaluate.bind(this)\n    // this.setStartState = this.setStartState.bind(this)\n    // this.undoStroke = this.undoStroke.bind(this)\n    // this.penDown = this.penDown.bind(this)\n    // this.penUp = this.penUp.bind(this)\n    // this.penMove = this.penMove.bind(this)\n\n    // this.setState({\"mode\" : (props.mode || \"set_start_state\")})\n    \n    // this.onStartShouldSetResponder = (e) => true;\n    // this.onMoveShouldSetResponder = (e) => true;\n    // this.onResponderStart = this.penDown.bind(this);\n    // this.onResponderRelease = this.penUp.bind(this);\n    // this.onResponderMove = this.penMove.bind(this);\n    // this.onMouseDown = this.penDown.bind(this);\n    // this.onPress= this.penDown.bind(this);\n    // this.onMouseUp = this.penUp.bind(this);\n    // this.onResponderStart = this.onResponderStart.bind(this);\n    // this.penDown = this.penDown.bind(this);\n    // this.penUp = this.penUp.bind(this);\n\n\n  }\n\n   onLayout = (e) => {\n    this.setState({\n      width: e.nativeEvent.layout.width,\n      height: e.nativeEvent.layout.height,\n      x: e.nativeEvent.layout.x,\n      y: e.nativeEvent.layout.y\n    })\n  }\n\n  componentDidMount(){\n    console.log(\"PROPSMODE\", this.props.mode)\n    this.setState({\"mode\" : this.props.mode || null})\n  }\n\n  enterSetStartStateMode(){\n    if(this.state.mode != \"debug\"){\n      this.setState({mode : \"set_start_state\",\n                     check_button_callback : this.setStartState })  \n    }\n    console.log(\"MODE!\", this.state.mode)\n  }\n\n  exitSetStartStateMode(){\n    let L = this.state.n_strokes+this.state.pen_down\n    let new_strokes = {}\n    for (var i=0; i<L;i++){\n      var stroke = this.state.strokes[i]\n      if(stroke['evaluation'] == \"START_STATE\"){\n        stroke['evaluation'] = \"TUTOR\"\n      }\n      new_strokes[i] = stroke\n    }\n    this.setState({strokes : new_strokes,mode : null })\n  }\n\n\n  enterFeedbackMode(){\n    this.setState({mode : \"feedback\",\n                   check_button_callback : this.demonstrate,\n                   feedback_start_stroke_id : this.state.n_strokes })  \n  }\n\n  exitFeedbackMode(){\n    this.setState({mode : null ,\n                   check_button_callback : null,\n                   feedback_start_stroke_id : null })\n  }\n\n  getCurrentFoci(){\n    if(this.current_foci){\n      return this.current_foci.map((elm) => elm.id)\n    }else{\n      return []\n    }\n  }\n\n  enterFociMode(){\n    this.unhighlightAll();\n    this.current_foci = []\n    this.setState({mode : \"foci\" }) \n    \n  }\n\n  exitFociMode(){\n    this.unhighlightAll();\n    this.current_foci = []\n    this.setState({mode : null })\n  }\n\n\n  printFeedback(context, event) {\n    var nl = context.network_layer;\n    var staged_SAI = context.staged_SAI;\n\n    var type = context.action_type;\n    // var reward = staged_SAI.reward\n    if (!context.feedback_map || Object.keys(context.feedback_map).length === 0) {\n      if (type == \"ATTEMPT\") {\n        type = staged_SAI.reward > 0 ? \"CORRECT\" : \"INCORRECT\";\n      }\n\n      // var color = color_map[type]\n      var inps =\n        staged_SAI.inputs[\"value\"] != null ? staged_SAI.inputs[\"value\"] : \"\";\n\n      nl.term_print(type + \": \" + staged_SAI.selection + \" -> \" + inps, type);\n    } else {\n      for (var index in context.feedback_map) {\n        var skill_app = context.skill_applications[index];\n        var type = context.feedback_map[index].toUpperCase();\n        // var color = color_map[type]\n        var inps =\n          skill_app.inputs[\"value\"] != null ? skill_app.inputs[\"value\"] : \"\";\n        nl.term_print(type + \": \" + skill_app.selection + \" -> \" + inps, type);\n      }\n    }\n  }\n\n\n\n  getCurrentFoci(){\n    if(this.current_foci){\n      return this.current_foci.map((elm) => elm.id);\n    }else{\n      return []\n    }\n  }\n  // setStartState(){\n  //   let L = this.state.n_strokes+this.state.pen_down\n  //   let new_strokes = {}\n  //   for (var i=0; i<L;i++){\n  //     var stroke = this.state.strokes[i]\n  //     if(stroke['evaluation'] == \"START_STATE\"){\n  //       stroke['evaluation'] = \"TUTOR\"\n  //     }\n  //     new_strokes[i] = stroke\n  //   }\n  //   this.setState({strokes : new_strokes,mode : \"authoring\" })\n\n  \n\n  loadProblem(context){\n    this.clear()\n    const promise = new Promise((resolve, reject) =>\n     {//this.setState({\"mode\" : \"set_start_state\"})\n      resolve({ updateContext: {} })})\n    return promise\n  }\n\n  clear(){\n    this.setState({...DEFAULT_START_STATE, ...{strokes:{},active_elements:[]}})\n    this.current_foci = [];\n    this.start_state_history = [];\n    this.highlighted_elements = [];\n    this.elements = {};\n    this.groups = [];\n  }\n\n  lockElement(name){\n    var elm = this.resolve_elm(elm)\n    if(!elm){return;}\n    elm.locked = true\n  }\n\n  unlockElement(name){\n    var elm = this.resolve_elm(elm)\n    if(!elm){return;}\n    elm.locked = false\n  }\n\n  colorElement(name,type){\n    alert(\"NOT IMPLEMENTED\")\n    // var stroke = this.state.strokes[name]\n    // stroke.color = this.color_map[type] || type\n    // this.setState({strokes :this.state.strokes})\n  }\n\n  resolve_elm(elm){\n    if(typeof(elm) == \"string\"){\n      return elm in this.elements ? this.elements[elm] : null\n    }else{\n      return elm\n    }\n  }\n\n  highlightElement(elm,colorIndex=0){\n    // if(!elm) return\n    // console.log(elm)\n    // var stroke_ids;\n\n    elm = this.resolve_elm(elm)\n    if(elm == null){return;}\n    \n    if(typeof(elm) != \"object\" || elm.type == \"strokes\"){\n      // if(typeof(elm) == \"object\"){\n      var stroke_ids = elm.stroke_ids == undefined ? [elm] : elm.stroke_ids\n      // }\n\n      for(var i=0; i< stroke_ids.length; i++){\n        var s_id = stroke_ids[i]\n        var stroke = this.state.strokes[s_id]\n        stroke.highlight = colorIndex;\n        var index = this.highlighted_elements.indexOf(s_id)\n        if(index == -1){\n          this.highlighted_elements.push(s_id)  \n        }\n      }\n    }else{\n      elm.highlight = colorIndex\n      var index = this.highlighted_elements.indexOf(elm.id)\n      if(index == -1){\n        this.highlighted_elements.push(elm.id)  \n      }\n    }\n  }\n\n  unhighlightElement(elm){\n    // if(!elm) return\n\n\n\n    elm = this.resolve_elm(elm)\n    console.log(\"UNHIGHTLIGHT\",elm.id,elm,typeof(elm))\n    if(elm == null){return;}\n    \n    if(typeof(elm) != \"object\" || elm.type == \"strokes\"){\n      var stroke_ids = elm.stroke_ids == undefined ? [elm] : elm.stroke_ids\n      for(var i=0; i< stroke_ids.length; i++){\n        var s_id = stroke_ids[i]\n        var stroke = this.state.strokes[s_id]\n        stroke.highlight = null\n        var index = this.highlighted_elements.indexOf(s_id)\n        if(index > -1){\n          this.highlighted_elements.splice(index,1)  \n        }\n      }\n    }else{\n      elm.highlight = null\n      var index = this.highlighted_elements.indexOf(elm.id)\n      if(index > -1){\n        this.highlighted_elements.splice(index,1)  \n      }\n    }\n  }\n\n  clearElement(name){\n    //TODO\n  }\n\n  highlightSAI(sai){\n    // console.log(\"HIGHLIGHT SAI\")\n    if(sai.mapping){\n      var index = 0\n      for (var var_str in sai.mapping){\n          var elem_str = sai.mapping[var_str]\n          var colorIndex = 0\n          if(var_str != \"?sel\"){\n              colorIndex = 1 + ((index-1) % (this.where_colors.length-1));\n          }\n          this.highlightElement(elem_str,colorIndex)\n          index++\n      }\n    }else{\n      alert(\"IDK WHAT THIS IS\")\n    }\n  }\n  \n\n  unhighlightAll(){\n    for(var elem_str of [...this.highlighted_elements]){\n      this.unhighlightElement(elem_str);\n    }\n  }\n\n  getState(){\n    var out = {}\n\n\n    for (let [id, elm1] of Object.entries(this.elements)) {\n    // for(var i=0; i < this.elements.length; i++){\n      // var elm1 = this.elements[i]\n      var elmobj;\n\n      if(this.props.groupMode == \"grid\"){\n        var value = elm1.value != null ? elm1.value.toString() : null\n        elmobj = {\n          id: \"e\" + elm1.g_coords.x + \"_\" + elm1.g_coords.y,//elm1.id,\n          type : \"Symbol\",\n          value : value,\n          filled : value != \"\" && value != null ? true : false\n        }\n        var c1 = elm1.g_coords\n        var [above,below,to_right,to_left] = [null,null,null,null];\n        for (let [id2, e2] of Object.entries(this.elements)) {\n          // var e2 = this.elements[j]\n          var c2 = e2.g_coords\n          if(c2.x == c1.x-1){to_left = e2.id}\n          if(c2.x == c1.x+1){to_right = e2.id}\n          if(c2.y == c1.y-1){above = e2.id}\n          if(c2.y == c1.y+1){below = e2.id}\n        }\n        elmobj = {...elmobj, ...{\"to_left\" : to_left, \"to_right\" : to_right,\n                    \"above\" : above, \"below\" : below}}\n      }\n\n      out[elmobj.id] = elmobj\n    }\n    const mW = this.state.width / this.props.gridWidth\n    const mH = this.state.height / this.props.gridWidth\n    if(this.props.groupMode == \"grid\"){\n      for(var i=0; i < mW; i++){\n        for(var j=0; j < mH; j++){\n          var id = \"e\" + i + \"_\" + j\n          if(!(id in out)){\n            out[id] = {\n              id : id,\n              type : \"Symbol\",\n              value : \"\",\n              filled : false\n            }\n          }\n        }\n      }\n      const ts = (x) => x.toString()\n      for(var i=0; i < mW; i++){\n        for(var j=0; j < mH; j++){\n          var id =\"e\" + ts(i) + \"_\" + ts(j)           \n          out[id][\"to_left\"] = (i-1 >= 0) ? (\"e\" + ts(i-1) + \"_\" + ts(j))   : null\n          out[id][\"to_right\"] = (i+1 < mW) ? (\"e\" + ts(i+1) + \"_\" + ts(j))  : null\n          out[id][\"above\"] = (j-1 >= 0) ? (\"e\" + ts(i) + \"_\" + ts(j-1)) : null\n          out[id][\"below\"] = (j+1 < mH) ? (\"e\" + ts(i) + \"_\" + ts(j+1)) : null\n        }\n      }\n    }\n    out['done'] = {'id': \"done\", type:'OverlayButton'}\n    console.log(\"STATE:\",out)\n    return out\n  }\n\n  clearProposedSAI(){\n    if(this.proposed_SAI){\n        // this.clearElement(this.proposed_SAI.selection)\n        // this.unlockElement(this.proposed_SAI.selection.replace('?ele-',\"\"))\n        this.unhighlightAll()\n        this.proposed_SAI = null;\n        delete this.elements[this.staged_element];\n    }\n  }\n\n  proposeSAI(sai){\n    console.log(\"PROPOSE\",sai)\n    this.clearProposedSAI()\n    this.proposed_SAI = {...sai}\n    this.stageSAI(sai)\n    this.highlightSAI(sai)\n\n    this.setState({active_elements : Object.keys(this.elements)})\n  }\n\n  stageSAI(sai){\n    //TODO\n    \n    var [gx,gy] = sai.selection.slice(1).split(\"_\").map(x => Number(x))\n    console.log(\"STAGE\",sai,gx,gy)\n    var [x,y] = [this.props.gridWidth * (gx+.5),this.props.gridWidth * (gy-.2)]\n    var width = this.props.gridWidth * .8\n    var elm = { \n      id : sai.selection,\n      g_coords: {x: gx,y: gy},\n      value : sai.inputs['value'],\n      type : 'text',\n      x : x,\n      y : y+this.props.gridWidth,\n      bounds : {\"minX\":x-width*.5, \"minY\":y, \"maxX\":x+width*.5, \"maxY\":y+width},\n      fontSize : Math.floor(this.props.gridWidth * .8)\n    }\n    this.elements[elm.id] = elm;\n    this.staged_element = elm.id;\n\n  }\n\n  confirmProposedSAI(){\n    console.log(\"confirmed\",this.proposed_SAI, this.highlighted_elements)\n    if(this.proposed_SAI){\n      this.unhighlightAll()\n      this.proposed_SAI = null  \n    }\n    this.setState() //Force rerender\n  }\n\n\n  penDown(e){\n    if(this.state.mode == \"loading\"){\n      return\n    }\n    if(this.state.mode == \"foci\"){\n      this.mouseDown(e)\n      return\n    }\n    console.log(\"HERE\",typeof(e.target.className),e.target.className.baseVal == \"svg_canvas\" || false)\n    console.log(\"PENDOWN\")\n    if(e.target.className.baseVal == \"svg_canvas\" || e.target.parentNode.className.baseVal == \"svg_canvas\"){\n      var strokes = this.state.strokes\n      var L = Object.keys(strokes).length\n      strokes[L] = {\"id\" : L}\n      strokes[L].points_str = e.clientX.toString()+\",\"+e.clientY.toString()\n      strokes[L].points = [[e.clientX,e.clientY]]\n      strokes[L].bounds = {\"minY\": e.clientY, \"maxY\":e.clientY, \"minX\":e.clientX, \"maxX\" :e.clientX }\n      console.log(\"MODE\",this.state.mode)\n      if(this.state.mode == \"set_start_state\"){\n        strokes[L]['evaluation'] = \"START_STATE\" \n      }else{\n        strokes[L]['evaluation'] = \"ATTEMPT\" \n      }\n      // strokes.push()\n      this.setState({pen_down : true,strokes:strokes});\n    }\n  }\n  snapStrokesToGrid(strokes){\n    \n\n    var grid_assignments = {}\n    var gridWidth = this.props.gridWidth\n    // console.log(\"GW\",this.props.gridWidth)\n\n    // console.log(\"strokes\", strokes)\n    for (var s_id in strokes){\n      var stroke = strokes[s_id]\n      // console.log(\"stroke\", stroke)\n      var {minX,maxX,minY,maxY} = stroke.bounds\n      var min_i = Math.floor(minX/gridWidth) \n      var max_i = Math.ceil(maxX/gridWidth)\n      var min_j = Math.floor(minY/gridWidth) \n      var max_j = Math.ceil(maxY/gridWidth)\n      if(maxX-minX > 1.5*gridWidth || maxY-minY > 1.5*gridWidth){\n        continue //Skip objects that span many gridlines\n      }\n      // console.log(\"MMM\",min_i,max_i,min_j,max_j)\n      var [b_i, b_j, b_area] = [-1, -1, 0.0]\n      for (var i=min_i; i < max_i; i++){\n        for (var j=min_j; j < max_j; j++){\n          var w = (Math.min(maxX,(i+1)*gridWidth) - Math.max(minX,i*gridWidth)) + 1\n          var h = (Math.min(maxY,(j+1)*gridWidth) - Math.max(minY,j*gridWidth)) + 1\n          var area = w * h\n          // console.log(\"AREA\", i, j,area, s_id)\n          if(area > b_area){\n            [b_area, b_i, b_j] = [area, i, j]\n          }\n        }\n      }\n      var b_str = b_i + \"_\" + b_j\n      var a = grid_assignments[b_str] || []\n      a.push(parseInt(s_id))\n      grid_assignments[b_str] = a      \n    }\n    // console.log(\"GRID ASSIGNMENTS\", grid_assignments)\n    return [Object.values(grid_assignments), grid_assignments]\n  }\n\n  removeElement(stroke_ids){\n    var elm;\n    for (let [id, e] of Object.entries(this.elements)) {\n      if(e.stroke_ids.length == stroke_ids.length){\n        var ok = true\n        for (var j = 0; j < e.stroke_ids.length; j++) {\n          if (e.stroke_ids[j] !== stroke_ids[j]){\n            ok = false; break;\n          }\n        }\n        if(ok){ delete this.elements[id];/*this.elements.splice(i,1);*/ return elm }\n      }\n    }\n\n    this.setState({active_elements : Object.keys(this.elements)})\n    return undefined\n  }\n  addElement(stroke_ids, extra_info=null){\n    // this.elements = this.elements || []\n    // for (var i=0; i < groups.length; i++){\n    var elm = {}\n    elm.stroke_ids = stroke_ids\n    elm.id = \"ie\" + stroke_ids.join(\"_\")\n    elm.strokes = stroke_ids.map((indx)=>this.state.strokes[indx])\n    // console.log(\"CLOOOO\",elm.strokes,Object.values(elm.strokes))\n    // console.log(\"CLOOOO\",Object.values(elm.strokes).map((stroke)=>stroke.bounds[\"minX\"]))\n    elm.bounds = {minX: get_min(\"minX\",elm.strokes),\n                  maxX: get_max(\"maxX\",elm.strokes),\n                  minY: get_min(\"minY\",elm.strokes),\n                  maxY: get_max(\"maxY\",elm.strokes)}\n    elm.type = 'strokes'              \n    \n\n    if(extra_info && this.props.groupMode == \"grid\"){\n      for(var loc_str in extra_info){\n        // console.log(\"MEEP\", extra_info[loc_str],stroke_ids)\n        if(array_equal(extra_info[loc_str],stroke_ids)){\n          var coords = loc_str.split(\"_\")\n          elm.g_coords = {\"x\" : parseInt(coords[0]), \"y\" : parseInt(coords[1])} \n        }\n      }\n      elm.id = \"e\" + elm.g_coords.x.toString() + \"_\" + elm.g_coords.y.toString()\n    }\n    console.log(\"BEFORE\", Object.keys(this.elements), elm)\n    this.elements[elm.id] = elm;\n    console.log(\"AFTER\",this.elements,Object.keys(this.elements))\n\n    this.setState({active_elements : Object.keys(this.elements)})\n    // }\n    // console.log(this.groupStrokes(this.state.strokes))\n    return elm\n  }\n\n  _elemsFromStrokes(strokes){\n    var elem_indxs = new Set()\n    for(var i=0; i < strokes.length; i++){\n      var s = strokes[i]\n      var stroke = typeof s != \"number\" ? s : this.state.strokes[s]\n      for (let [id, elm] of Object.entries(this.elements)) {\n      // for(var j=0; j < this.elements.length; j++){\n        // var elm = this.elements[j]\n        if(elm.type == 'strokes' && elm.stroke_ids.indexOf(stroke.id) != -1){\n          elem_indxs.add(id)\n        }  \n      }\n    }\n    return Array.from(elem_indxs).map((e_id)=>this.elements[e_id])\n  }\n\n  _groupDiff(old_g,new_g){\n    let old_s = old_g.map(x => x.join(\",\"))\n    let new_s = new_g.map(x => x.join(\",\"))\n\n    let added_s = new_s.filter(x => !old_s.includes(x));\n    let removed_s = old_s.filter(x => !new_s.includes(x));\n\n    let added = added_s.map(x => x.split(\",\").map(x => parseInt(x)))\n    let removed = removed_s.map(x => x.split(\",\").map(x => parseInt(x)))\n    // console.log(added,removed)\n    return [added, removed]\n  }\n\n  async penUp(e){\n    console.log(\"penUP\")\n    if(this.state.mode == \"loading\"){\n      return\n    }\n    if(this.state.mode == \"foci\"){\n      this.mouseUp(e)\n      return\n    }\n    console.log(\"UP\",this.state.pen_down,Object.keys(this.elements))\n    if(this.state.pen_down){\n      this.setState({pen_down : false,n_strokes: this.state.n_strokes+1});\n\n    }\n    if(this.props.groupMode == \"grid\"){\n      var [groups, extra_info] = this.snapStrokesToGrid(this.state.strokes)\n    }else{\n      var [groups, extra_info] = this.groupStrokes(this.state.strokes)\n    }\n\n\n    var [added, removed] = this._groupDiff(this.groups || [],groups)\n\n    // if(this.props.groupMode == \"grid\"){\n    //   var groups = this.snapStrokesToGrid(this.state.strokes)\n    // }else{\n    //   var groups = this.groupStrokes(this.state.strokes)\n    // }\n    this.groups = groups\n\n    // console.log(\"GROUPS\", groups)\n\n    // this.removeElement(group)\n    \n    for(var i=0; i < removed.length; i++){\n      this.removeElement(removed[i])\n    }\n\n    for(var i=0; i < added.length; i++){\n      let group = added[i]\n      let elm = this.addElement(group, extra_info)\n      // elm.symbol_probs = this.recognize_symbol(elm.strokes)\n      console.time(\"recognize_symbol\")\n      elm.symbol_probs = await this.recognize_symbol(elm.strokes)\n\n      //Just take numbers\n      elm.symbol_probs = pick(elm.symbol_probs,['1','2','3','4','5','6','7','8','9','0','+','-'])  \n\n\n      console.timeEnd(\"recognize_symbol\")\n\n      console.log(\"Recognize Symbol: \")\n      Object.entries(elm.symbol_probs).sort((a,b)=>b[1]-a[1]).forEach(function([sym,prob]){\n        if(elm.value == undefined){elm.value = sym}\n        console.log(sym.padStart(12),\":\", prob.toFixed(3))\n      })\n    }\n\n  }\n\n  penMove(e){\n    // console.log(e)\n    // var X,Y\n    // console.log(e.type)\n    // if(e.type == \"mousemove\"){\n    //   X,Y = \n    // }\n\n    // console.log(this.state.pen_down)\n    if(this.state.mode == \"foci\"){\n      this.mouseMove(e)\n      return\n    }\n    if(this.state.pen_down){\n      var strokes = this.state.strokes \n      var stroke = strokes[this.state.n_strokes]\n      var p = [e.clientX,e.clientY]\n      var lp = stroke.points[stroke.points.length-1]\n      if(e.clientX < stroke.bounds.minX){stroke.bounds.minX = e.clientX}\n      if(e.clientX > stroke.bounds.maxX){stroke.bounds.maxX = e.clientX}\n      if(e.clientY < stroke.bounds.minY){stroke.bounds.minY = e.clientY}\n      if(e.clientY > stroke.bounds.maxY){stroke.bounds.maxY = e.clientY}\n      // console.log(\"DIST\", (p[0]-lp[0])**2 + (p[1]-lp[1])**2)\n\n      if( (p[0]-lp[0])**2 + (p[1]-lp[1])**2 >= MIN_DIST*MIN_DIST && stroke.points.length < MAX_STROKE_LENGTH){\n        stroke.points.push(p)\n        stroke.points_str += \" \" + e.clientX.toString()+\",\"+e.clientY.toString()\n        stroke.bezier_splines = this.fitCurve(stroke.points)\n\n\n        this.setState({\"strokes\":strokes})\n        // var evt = e.nativeEvent;\n        // console.log(\"BEZ\",stroke.bezier_splines);  \n      }\n    }\n  }\n\n  mouseMove(e){\n    var ele = this.getElementUnderPoint(e.clientX,e.clientY)\n    // var id = ele ? ele.id : null\n    this.setState({elmUnderPoint : ele})\n  }\n\n  mouseDown(e){\n    console.log(\"MOUSE DOWN\")\n    var ele = this.getElementUnderPoint(e.clientX,e.clientY)\n    // var id = ele ? ele.id : null\n    this.setState({mouseDownElm : ele,\n                    elmUnderPoint : ele})\n  }\n\n  mouseUp(e){\n    console.log(\"MOUSE UP\")\n    var ele = this.getElementUnderPoint(e.clientX,e.clientY)\n    // var id = ele ? ele.id : null\n    if(ele && ele == this.state.mouseDownElm){\n      var indx = this.current_foci.indexOf(ele)\n      if(indx == -1){\n          this.current_foci.push(ele)\n          this.highlightElement(ele,0)\n      }else{\n          this.current_foci.splice(indx,1)\n          this.unhighlightElement(ele)\n      }\n    }\n    // console.log(this.current_foci)\n    this.setState({mouseDownElm : null,\n                    elmUnderPoint : ele})\n  }\n\n  getStokeUnderPoint(x,y,padding=10){\n    var strokeCandidates = []\n    for (let i=0; i<this.state.n_strokes;i++){\n        var stroke = this.state.strokes[i]\n        // console.log(stroke.bounds.minX,stroke.bounds.minY,stroke.bounds.maxX,stroke.bounds.maxY)\n        if(stroke &&\n           x > stroke.bounds.minX-padding && x < stroke.bounds.maxX+padding &&\n           y > stroke.bounds.minY-padding && y < stroke.bounds.maxY+padding){\n          strokeCandidates.push(stroke)\n        }\n    }\n    if(strokeCandidates.length == 0){return null};\n    var minDist = Number.MAX_VALUE;\n    var minStroke;\n    for(let stroke of strokeCandidates){\n      for(let i=0; i<stroke.points.length;i++){\n        let p = stroke.points[i]\n        var d = (x-p[0])**2 + (y-p[1])**2\n        if(d < minDist){\n          minDist = d\n          minStroke = stroke\n        }\n      }\n    }\n    return minStroke\n  }\n\n  getElementUnderPoint(x,y,padding=10){\n    for (let [id, elm] of Object.entries(this.elements)) {\n      console.log(\"ET:\",id, elm)\n      if( x > elm.bounds.minX-padding && x < elm.bounds.maxX+padding &&\n          y > elm.bounds.minY-padding && y < elm.bounds.maxY+padding){\n        return elm        \n      }\n    }\n    return null\n\n  }\n\n  undoStroke(e){\n    const strokes = this.state.strokes\n    if(this.state.n_strokes > 0){\n      const last_ev = strokes[this.state.n_strokes-1]['evaluation']\n      if(last_ev == \"INCORRECT\" || last_ev == \"ATTEMPT\" || last_ev == \"START_STATE\"){\n        delete strokes[this.state.n_strokes-1]\n        this.setState({\"strokes\" : strokes, \"n_strokes\" : this.state.n_strokes-1})\n      }\n    }\n\n  }\n\n\n\n  demonstrate(){\n    var L = this.state.n_strokes\n    var start = this.state.feedback_start_stroke_id\n    var d_strokes = range(start,L).map(x => this.state.strokes[x])\n\n    for(var i=0; i < d_strokes.length; i++){\n      d_strokes[i].evaluation = \"DEMONSTRATE\"\n    }\n\n    var elems = this._elemsFromStrokes(d_strokes)\n    if(elems.length > 0){\n      var e = elems[0];  \n      this.props.interactions_service.send({\n        type: \"DEMONSTRATE\",\n        data: { \n                selection : e.id,\n                action : \"WriteExpr\",\n                inputs : {'value' : e.value},\n                reward: 1 \n              }\n      });\n    }\n    \n\n\n    \n    // } else if (type == \"ATTEMPT\") {\n    //   console.log(\"SEND ATTEMPT\", sai);\n    //   this.props.interactions_service.send({\n    //     type: \"ATTEMPT\",\n    //     data: { ...sai }\n    //   });\n  }\n\n  pressDone(){\n    this.props.interactions_service.send({\n        type: \"DEMONSTRATE\",\n        data: { selection:\"done\",\n                action : \"ButtonPressed\",\n                inputs : {value : -1},\n                reward: 1 \n              }\n      });\n  }\n\n  getEvaluatable(){\n    let i=0;\n    let L = this.state.n_strokes+this.state.pen_down\n    for (; i<L;i++){\n      let ev = this.state.strokes[i]['evaluation'];\n      if(ev == \"ATTEMPT\" || ev == \"INCORRECT\"){\n          break\n      }\n    }\n    console.log(\"hee\", i)\n    let out = {}\n    for (; i<L;i++){\n      out[i] = this.state.strokes[i]\n    }\n\n    return out\n  }\n\n  evaluate(){\n    let ev_strokes = {};\n    if(this.props.evaluate){\n      ev_strokes = this.props.evaluate(this.getEvaluatable())\n    }else{\n      ev_strokes = this.getEvaluatable()\n      // console.log(\"bleep\", ev_strokes)\n      // for (let i=0; i<ev_strokes.length;i++){\n      for(var i in ev_strokes){\n        ev_strokes[i]['evaluation'] = \"INCORRECT\"\n      }\n    }\n    // console.log(\"bloop\", ev_strokes)\n    this.setState({strokes: {...this.state.strokes,...ev_strokes}})\n  }\n\n\n\n  render() {\n    // console.log(\"RERENDER\",[...this.highlighted_elements])\n    // console.log(this.state.strokes)\n    let svg_content = []\n    // svg_content.push( <Circle cx={300} cy={200} r=\"50\" fill=\"red\" />);\n    for (let i=0; i<this.state.n_strokes+this.state.pen_down;i++){\n\n        var stroke = this.state.strokes[i]\n        // if(this.state.mode != \"debug\"){\n                 \n        // }else{\n        var elmUnderCursor =this.state.elmUnderPoint\n        var elmUnderCursor_strokes = elmUnderCursor ? elmUnderCursor.stroke_ids || [] : [] \n        var strokeWidth = this.state.mode == \"debug\" ? \".5\" :(elmUnderCursor_strokes.indexOf(stroke.id) != -1  ?  \"4\": \"3\")\n        if(stroke.highlight != null){\n          svg_content.push(<Polyline\n            points= {stroke['points_str']} fill=\"none\"\n            stroke={this.where_colors[stroke.highlight]}\n            strokeWidth={strokeWidth*3 +1}\n            strokeOpacity={0.15}\n            strokeLinecap='round'\n          />);   \n          svg_content.push(<Polyline\n            points= {stroke['points_str']} fill=\"none\"\n            stroke={this.where_colors[stroke.highlight]}\n            strokeWidth={strokeWidth*2}\n            strokeOpacity={0.4}\n            strokeLinecap='round'\n          />);   \n        }\n\n        if(stroke.points.length > 1){\n          svg_content.push(<Polyline\n            points= {stroke['points_str']} fill=\"none\"\n            stroke={pen_color_map[stroke['evaluation']] || pen_color_map[\"DEFAULT\"]}\n            strokeWidth={strokeWidth}\n            strokeLinecap='round'\n          />);   \n        }else{\n          svg_content.push(<Circle\n            cx= {stroke.points[0][0]}\n            cy= {stroke.points[0][1]}\n            r={strokeWidth*1.5}\n            fill = {pen_color_map[stroke['evaluation']] || pen_color_map[\"DEFAULT\"]}\n          />);   \n        }\n        \n        // var curve_str = \"\";\n        if(this.state.mode == \"debug\"){\n          var splines = stroke['bezier_splines'] || [];\n          var circles = []\n          for (let j=0; j<splines.length;j++){\n            var b = splines[j];\n          // for (const b of splines){\n            var curve_str = \"M\"+b[0]+\" \"+b[1]+\" C\"+b[2]+\" \"+b[3]+\" \"+b[4]+\" \" +b[5]+\" \"+b[6]+\" \"+b[7]+\" \";\n            svg_content.push(<Path\n              d= {curve_str}\n              fill=\"none\"\n              stroke={'blue'}\n              strokeWidth=\"3\"\n              strokeLinecap='round'\n            />);\n\n            circles.push( <Circle cx={b[0]+\"\"} cy={b[1]+\"\"} r=\"3\" fill=\"red\" />);\n          }\n          \n          var points = stroke['points'] || [];\n          for (let j=0; j<points.length;j++){\n            var p = points[j];\n            circles.push( <Circle cx={p[0]+\"\"} cy={p[1]+\"\"} r=\"1\" fill=\"red\" />);\n          }\n          svg_content = svg_content.concat(circles);   \n\n          \n        }\n    }\n\n    var winWidth = this.state.width//Dimensions.get(\"window\").width\n    var winHeight = this.state.height//Dimensions.get(\"window\").height\n    var gridWidth = this.props.gridWidth || 100\n    for (let i=0; i<winWidth/gridWidth;i++){\n      svg_content.push(<Polyline\n        points= {i*gridWidth+\",\"+\"0\"+\" \"+i*gridWidth+\",\"+winHeight}\n        fill=\"none\"\n        stroke={'gray'}\n        strokeWidth=\".5\"\n        strokeOpacity={0.4}\n      />);\n    }\n\n    for (let i=0; i<winHeight/gridWidth;i++){\n      svg_content.push(<Polyline\n        points= {\"0\"+\",\"+i*gridWidth+\" \"+winWidth+\",\"+i*gridWidth}\n        fill=\"none\"\n        stroke={'gray'}\n        strokeWidth=\".5\"\n        strokeOpacity={0.4}\n      />);\n    }\n    // console.log(\"svg_content\",svg_content)\n\n    // for (let j=0; j<10;j++){\n        \n    // }\n\n    // svg_content.push(<SvgText x={100} y={100}\n    //                                  fontSize={80}\n    //                                  stroke={this.where_colors[2]}\n    //                                  strokeOpacity={0.15}\n    //                                  strokeWidth={3*(80.0/40.0) + 1}\n    //                         > {7} </SvgText>);  \n    // svg_content.push(<SvgText x={100} y={100}\n    //                                  fontSize={80}\n    //                                  stroke={this.where_colors[2]}\n    //                                  strokeOpacity={0.45}\n    //                                  strokeWidth={2*(80.0/40.0)}\n    //                         > {7} </SvgText>);  \n    // svg_content.push(<SvgText x={100} y={100} fontSize={80}\n                            // > {42} </SvgText>);\n    // var elems = this.elements || {};\n    // for (let j=0; j<elems.length;j++){\n    for (let [id, elm] of Object.entries(this.elements)) {\n       var b = elm.bounds;\n        if(elm.id == \"done\"){continue}\n        if(elm.type == 'text'){\n          if(elm.highlight != null){\n            svg_content.push(<SvgText x={elm.x} y={elm.y}\n                                     fontSize={elm.fontSize}\n                                     stroke={this.where_colors[elm.highlight]}\n                                     strokeOpacity={0.15}\n                                     strokeWidth={elm.fontSize/14.0 + 1}\n                                     textAnchor=\"middle\"\n                            > {elm.value.toString()} </SvgText>);  \n            svg_content.push(<SvgText x={elm.x} y={elm.y} \n                                    fontSize={elm.fontSize}\n                                     stroke={this.where_colors[elm.highlight]}\n                                     strokeOpacity={0.45}\n                                     strokeWidth={elm.fontSize/20.0}\n                                     textAnchor=\"middle\"\n                            > {elm.value.toString()} </SvgText>);\n          }else{\n            svg_content.push(<SvgText x={elm.x} y={elm.y} \n                            fontSize={elm.fontSize}\n                            textAnchor=\"middle\"\n                            > {elm.value.toString()} </SvgText>);\n          }\n          \n          // console.log(elm.value.toString())\n        }else if(elm.type == 'strokes'){\n          svg_content.push( <Rect x={b.minX} y={b.minY} width={b.maxX-b.minX} height={b.maxY-b.minY}\n                            stroke='orange' strokeWidth=\".5\" fill='none'/> ); \n        }\n\n    }\n\n\n\n    // let check_button_callback\n    // if(this.state.mode == \"set_start_state\"){\n    //   check_button_callback = this.setStartState\n    // }else if(this.state.mode == \"set_start_state\"){\n    //   check_button_callback = this.demonstrate\n    // }else{  \n      \n    //   check_button_callback = this.evaluate\n    // }\n    \n    \n    var cursor;\n    if(this.state.mode == \"foci\"){\n      cursor = this.state.elmUnderPoint == null ? \"default\" : \"pointer\"\n    }else{\n      cursor = cursor_map[this.state.mode] || cursor_map[null]\n    }\n\n\n    // console.log(\"CURSOR\", cursor)\n    return (\n\n      <TouchableWithoutFeedback\n        /*onStartShouldSetResponder = {(e) => true}\n        onMoveShouldSetResponder = {(e) => true}*/\n        onMouseDown = {this.penDown}\n        onMouseUp = {this.penUp}\n        onMouseLeave = {this.penUp}\n        onMouseMove = {this.penMove}\n        style={{height:\"100%\", width:\"100%\" }}\n        /*onResponderStart = {this.penDown.bind(this)}\n        onResponderRelease = {this.penUp.bind(this)}\n        onResponderMove = {this.penMove.bind(this)}*/\n        >\n      \n      <View\n        onLayout = {this.onLayout}\n        style={[\n          StyleSheet.absoluteFill,\n          {  justifyContent: 'center', height:\"100%\", width:\"100%\" },\n        ]}>\n        \n        \n        <Svg className=\"svg_canvas\" style ={{\"cursor\" : cursor}} height=\"100%\" width=\"100%\" >\n         <Defs>\n            {/*<Filter\n                id=\"a\"\n                filterUnits=\"userSpaceOnUse\"\n                x={0}\n                y={0}\n                width={200}\n                height={120}\n            >\n                <FEGaussianBlur\n                    in=\"SourceAlpha\"\n                    stdDeviation={4}\n                    result=\"blur\"\n                />\n                <FEOffset in=\"blur\" dx={4} dy={4} result=\"offsetBlur\" />\n                <FEMerge>\n                    <FEMergeNode in=\"offsetBlur\" />\n                    <FEMergeNode in=\"SourceGraphic\" />\n                </FEMerge>\n            </Filter>*/}\n        </Defs>\n          {svg_content}\n        </Svg>\n\n        {(this.state.mode != \"foci\" && this.state.mode != \"loading\")  &&\n          <View>\n            <TouchableHighlight\n              style = {[styles.circle_buttons,styles.undo_button]}\n              onPress = {this.undoStroke}>\n              <Text style={styles.undo_button_text}>{'\\u21B6'}</Text>\n            </TouchableHighlight>\n            {(this.state.mode != \"set_start_state\") && [\n            <TouchableHighlight\n              style = {[styles.circle_buttons,styles.check_button]}\n              onPress = {this.state.check_button_callback}>\n              <Text style={styles.check_button_text}>{'\\u2713'}</Text>\n            </TouchableHighlight>,\n            <TouchableHighlight\n              style = {[styles.circle_buttons,styles.done_button]}\n              onPress = {this.pressDone}>\n              <Text style={styles.done_button_text}>{'Done'}</Text>\n            </TouchableHighlight>\n            ]}\n            \n          </View>\n        }\n\n      </View>\n      </TouchableWithoutFeedback>\n\n      \n    );\n  }\n}\n\nStylusTutor.defaultProps = {\n    gridWidth : 100,\n    groupMode : \"grid\"\n  };\n\nconst pen_color_map = { \n  'DEFAULT' : 'black',\n  'ATTEMPT' : 'slategray',\n  'TUTOR' : 'black',\n  'DEMONSTRATE' : 'dodgerblue',\n  'START_STATE' : 'teal',\n  'CORRECT' : 'limegreen', \n  'INCORRECT' : 'crimson', //Crimson better than red since looks same as limegreen for people w/ deuteranopia \n}\n\nvar cursor_map = {\n    \"debug\" : \"crosshair\",\n    \"foci\" : \"pointer\",\n    \"set_start_state\" : \"crosshair\",\n    \"feedback\" : \"crosshair\",\n    null : \"progress\",\n    \"loading\" : \"progress\"\n  }\n\nconst styles = StyleSheet.create({\n  circle_buttons: {\n    position : \"absolute\",\n    backgroundColor : \"gray\",\n    borderRadius:60,\n    height:60,\n    width:60,\n    justifyContent: 'center',\n    alignItems: 'center',\n    zIndex: 1,\n    shadowColor: '#000',\n    shadowOffset: { width: 2, height: 2 },\n    shadowOpacity: 0.8,\n    shadowRadius: 2\n  },\n  undo_button: {\n    bottom : 50,\n    right : 120,\n  },\n  undo_button_text: {\n    fontSize: 40\n  },\n  check_button: {\n    bottom : 50,\n    right: 50,\n  },\n  check_button_text: {\n    fontSize: 40\n  },\n  done_button : {\n    bottom : 50,\n    left: 50,\n    width:80,\n    height:40,\n  },\n  done_button_text: {\n    fontSize: 24\n  },\n  \n\n\n\n})","/* eslint-disable */\n\nvar c_BezierFit = (function() {\n  var _scriptDir = '/dist/';\n  \n  return (\nfunction(c_BezierFit) {\n  c_BezierFit = c_BezierFit || {};\n\n\n\n// The Module object: Our interface to the outside world. We import\n// and export values on it. There are various ways Module can be used:\n// 1. Not defined. We create it here\n// 2. A function parameter, function(Module) { ..generated code.. }\n// 3. pre-run appended it, var Module = {}; ..generated code..\n// 4. External script tag defines var Module.\n// We need to check if Module already exists (e.g. case 3 above).\n// Substitution will be replaced with actual code on later stage of the build,\n// this way Closure Compiler will not mangle it (e.g. case 4. above).\n// Note that if you want to run closure, and also to use Module\n// after the generated code, you will need to define   var Module = {};\n// before the code. Then that object will be used in the code, and you\n// can continue to use Module afterwards as well.\nvar Module = typeof c_BezierFit !== 'undefined' ? c_BezierFit : {};\n\n\n// Set up the promise that indicates the Module is initialized\nvar readyPromiseResolve, readyPromiseReject;\nModule['ready'] = new Promise(function(resolve, reject) {\n  readyPromiseResolve = resolve;\n  readyPromiseReject = reject;\n});\n\n      if (!Object.getOwnPropertyDescriptor(Module['ready'], '_c_FitCurve')) {\n        Object.defineProperty(Module['ready'], '_c_FitCurve', { configurable: true, get: function() { abort('You are getting _c_FitCurve on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n        Object.defineProperty(Module['ready'], '_c_FitCurve', { configurable: true, set: function() { abort('You are setting _c_FitCurve on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n      }\n    \n\n      if (!Object.getOwnPropertyDescriptor(Module['ready'], '_c_ML_EncodeCurves')) {\n        Object.defineProperty(Module['ready'], '_c_ML_EncodeCurves', { configurable: true, get: function() { abort('You are getting _c_ML_EncodeCurves on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n        Object.defineProperty(Module['ready'], '_c_ML_EncodeCurves', { configurable: true, set: function() { abort('You are setting _c_ML_EncodeCurves on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n      }\n    \n\n      if (!Object.getOwnPropertyDescriptor(Module['ready'], '_c_GroupStrokes')) {\n        Object.defineProperty(Module['ready'], '_c_GroupStrokes', { configurable: true, get: function() { abort('You are getting _c_GroupStrokes on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n        Object.defineProperty(Module['ready'], '_c_GroupStrokes', { configurable: true, set: function() { abort('You are setting _c_GroupStrokes on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n      }\n    \n\n      if (!Object.getOwnPropertyDescriptor(Module['ready'], '_malloc')) {\n        Object.defineProperty(Module['ready'], '_malloc', { configurable: true, get: function() { abort('You are getting _malloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n        Object.defineProperty(Module['ready'], '_malloc', { configurable: true, set: function() { abort('You are setting _malloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n      }\n    \n\n      if (!Object.getOwnPropertyDescriptor(Module['ready'], '_free')) {\n        Object.defineProperty(Module['ready'], '_free', { configurable: true, get: function() { abort('You are getting _free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n        Object.defineProperty(Module['ready'], '_free', { configurable: true, set: function() { abort('You are setting _free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n      }\n    \n\n      if (!Object.getOwnPropertyDescriptor(Module['ready'], '_stackSave')) {\n        Object.defineProperty(Module['ready'], '_stackSave', { configurable: true, get: function() { abort('You are getting _stackSave on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n        Object.defineProperty(Module['ready'], '_stackSave', { configurable: true, set: function() { abort('You are setting _stackSave on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n      }\n    \n\n      if (!Object.getOwnPropertyDescriptor(Module['ready'], '_stackRestore')) {\n        Object.defineProperty(Module['ready'], '_stackRestore', { configurable: true, get: function() { abort('You are getting _stackRestore on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n        Object.defineProperty(Module['ready'], '_stackRestore', { configurable: true, set: function() { abort('You are setting _stackRestore on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n      }\n    \n\n      if (!Object.getOwnPropertyDescriptor(Module['ready'], '_stackAlloc')) {\n        Object.defineProperty(Module['ready'], '_stackAlloc', { configurable: true, get: function() { abort('You are getting _stackAlloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n        Object.defineProperty(Module['ready'], '_stackAlloc', { configurable: true, set: function() { abort('You are setting _stackAlloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n      }\n    \n\n      if (!Object.getOwnPropertyDescriptor(Module['ready'], '___data_end')) {\n        Object.defineProperty(Module['ready'], '___data_end', { configurable: true, get: function() { abort('You are getting ___data_end on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n        Object.defineProperty(Module['ready'], '___data_end', { configurable: true, set: function() { abort('You are setting ___data_end on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n      }\n    \n\n      if (!Object.getOwnPropertyDescriptor(Module['ready'], '___wasm_call_ctors')) {\n        Object.defineProperty(Module['ready'], '___wasm_call_ctors', { configurable: true, get: function() { abort('You are getting ___wasm_call_ctors on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n        Object.defineProperty(Module['ready'], '___wasm_call_ctors', { configurable: true, set: function() { abort('You are setting ___wasm_call_ctors on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n      }\n    \n\n      if (!Object.getOwnPropertyDescriptor(Module['ready'], '___errno_location')) {\n        Object.defineProperty(Module['ready'], '___errno_location', { configurable: true, get: function() { abort('You are getting ___errno_location on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n        Object.defineProperty(Module['ready'], '___errno_location', { configurable: true, set: function() { abort('You are setting ___errno_location on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n      }\n    \n\n      if (!Object.getOwnPropertyDescriptor(Module['ready'], '_setThrew')) {\n        Object.defineProperty(Module['ready'], '_setThrew', { configurable: true, get: function() { abort('You are getting _setThrew on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n        Object.defineProperty(Module['ready'], '_setThrew', { configurable: true, set: function() { abort('You are setting _setThrew on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n      }\n    \n\n      if (!Object.getOwnPropertyDescriptor(Module['ready'], 'onRuntimeInitialized')) {\n        Object.defineProperty(Module['ready'], 'onRuntimeInitialized', { configurable: true, get: function() { abort('You are getting onRuntimeInitialized on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n        Object.defineProperty(Module['ready'], 'onRuntimeInitialized', { configurable: true, set: function() { abort('You are setting onRuntimeInitialized on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js') } });\n      }\n    \n\n// --pre-jses are emitted after the Module integration code, so that they can\n// refer to Module (if they choose; they can also define Module)\n// {{PRE_JSES}}\n\n// Sometimes an existing Module object exists with properties\n// meant to overwrite the default module functionality. Here\n// we collect those properties and reapply _after_ we configure\n// the current environment's defaults to avoid having to be so\n// defensive during initialization.\nvar moduleOverrides = {};\nvar key;\nfor (key in Module) {\n  if (Module.hasOwnProperty(key)) {\n    moduleOverrides[key] = Module[key];\n  }\n}\n\nvar arguments_ = [];\nvar thisProgram = './this.program';\nvar quit_ = function(status, toThrow) {\n  throw toThrow;\n};\n\n// Determine the runtime environment we are in. You can customize this by\n// setting the ENVIRONMENT setting at compile time (see settings.js).\n\nvar ENVIRONMENT_IS_WEB = true;\nvar ENVIRONMENT_IS_WORKER = false;\nvar ENVIRONMENT_IS_NODE = false;\nvar ENVIRONMENT_IS_SHELL = false;\n\nif (Module['ENVIRONMENT']) {\n  throw new Error('Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -s ENVIRONMENT=web or -s ENVIRONMENT=node)');\n}\n\n\n\n// `/` should be present at the end if `scriptDirectory` is not empty\nvar scriptDirectory = '';\nfunction locateFile(path) {\n  if (Module['locateFile']) {\n    return Module['locateFile'](path, scriptDirectory);\n  }\n  return scriptDirectory + path;\n}\n\n// Hooks that are implemented differently in different runtime environments.\nvar read_,\n    readAsync,\n    readBinary,\n    setWindowTitle;\n\n\n// Note that this includes Node.js workers when relevant (pthreads is enabled).\n// Node.js workers are detected as a combination of ENVIRONMENT_IS_WORKER and\n// ENVIRONMENT_IS_NODE.\nif (ENVIRONMENT_IS_WEB || ENVIRONMENT_IS_WORKER) {\n  if (ENVIRONMENT_IS_WORKER) { // Check worker, not web, since window could be polyfilled\n    scriptDirectory = self.location.href;\n  } else if (document.currentScript) { // web\n    scriptDirectory = document.currentScript.src;\n  }\n  // When MODULARIZE, this JS may be executed later, after document.currentScript\n  // is gone, so we saved it, and we use it here instead of any other info.\n  if (_scriptDir) {\n    scriptDirectory = _scriptDir;\n  }\n  // blob urls look like blob:http://site.com/etc/etc and we cannot infer anything from them.\n  // otherwise, slice off the final part of the url to find the script directory.\n  // if scriptDirectory does not contain a slash, lastIndexOf will return -1,\n  // and scriptDirectory will correctly be replaced with an empty string.\n  if (scriptDirectory.indexOf('blob:') !== 0) {\n    scriptDirectory = scriptDirectory.substr(0, scriptDirectory.lastIndexOf('/')+1);\n  } else {\n    scriptDirectory = '';\n  }\n\n  if (!(typeof window === 'object' || typeof importScripts === 'function')) throw new Error('not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)');\n\n  // Differentiate the Web Worker from the Node Worker case, as reading must\n  // be done differently.\n  {\n\n\n\n\n  read_ = function shell_read(url) {\n      var xhr = new XMLHttpRequest();\n      xhr.open('GET', url, false);\n      xhr.send(null);\n      return xhr.responseText;\n  };\n\n  if (ENVIRONMENT_IS_WORKER) {\n    readBinary = function readBinary(url) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', url, false);\n        xhr.responseType = 'arraybuffer';\n        xhr.send(null);\n        return new Uint8Array(/** @type{!ArrayBuffer} */(xhr.response));\n    };\n  }\n\n  readAsync = function readAsync(url, onload, onerror) {\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', url, true);\n    xhr.responseType = 'arraybuffer';\n    xhr.onload = function xhr_onload() {\n      if (xhr.status == 200 || (xhr.status == 0 && xhr.response)) { // file URLs can return 0\n        onload(xhr.response);\n        return;\n      }\n      onerror();\n    };\n    xhr.onerror = onerror;\n    xhr.send(null);\n  };\n\n\n\n\n  }\n\n  setWindowTitle = function(title) { document.title = title };\n} else\n{\n  throw new Error('environment detection error');\n}\n\n\n// Set up the out() and err() hooks, which are how we can print to stdout or\n// stderr, respectively.\nvar out = Module['print'] || console.log.bind(console);\nvar err = Module['printErr'] || console.warn.bind(console);\n\n// Merge back in the overrides\nfor (key in moduleOverrides) {\n  if (moduleOverrides.hasOwnProperty(key)) {\n    Module[key] = moduleOverrides[key];\n  }\n}\n// Free the object hierarchy contained in the overrides, this lets the GC\n// reclaim data used e.g. in memoryInitializerRequest, which is a large typed array.\nmoduleOverrides = null;\n\n// Emit code to handle expected values on the Module object. This applies Module.x\n// to the proper local x. This has two benefits: first, we only emit it if it is\n// expected to arrive, and second, by using a local everywhere else that can be\n// minified.\nif (Module['arguments']) arguments_ = Module['arguments'];if (!Object.getOwnPropertyDescriptor(Module, 'arguments')) Object.defineProperty(Module, 'arguments', { configurable: true, get: function() { abort('Module.arguments has been replaced with plain arguments_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)') } });\nif (Module['thisProgram']) thisProgram = Module['thisProgram'];if (!Object.getOwnPropertyDescriptor(Module, 'thisProgram')) Object.defineProperty(Module, 'thisProgram', { configurable: true, get: function() { abort('Module.thisProgram has been replaced with plain thisProgram (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)') } });\nif (Module['quit']) quit_ = Module['quit'];if (!Object.getOwnPropertyDescriptor(Module, 'quit')) Object.defineProperty(Module, 'quit', { configurable: true, get: function() { abort('Module.quit has been replaced with plain quit_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)') } });\n\n// perform assertions in shell.js after we set up out() and err(), as otherwise if an assertion fails it cannot print the message\n// Assertions on removed incoming Module JS APIs.\nassert(typeof Module['memoryInitializerPrefixURL'] === 'undefined', 'Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead');\nassert(typeof Module['pthreadMainPrefixURL'] === 'undefined', 'Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead');\nassert(typeof Module['cdInitializerPrefixURL'] === 'undefined', 'Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead');\nassert(typeof Module['filePackagePrefixURL'] === 'undefined', 'Module.filePackagePrefixURL option was removed, use Module.locateFile instead');\nassert(typeof Module['read'] === 'undefined', 'Module.read option was removed (modify read_ in JS)');\nassert(typeof Module['readAsync'] === 'undefined', 'Module.readAsync option was removed (modify readAsync in JS)');\nassert(typeof Module['readBinary'] === 'undefined', 'Module.readBinary option was removed (modify readBinary in JS)');\nassert(typeof Module['setWindowTitle'] === 'undefined', 'Module.setWindowTitle option was removed (modify setWindowTitle in JS)');\nassert(typeof Module['TOTAL_MEMORY'] === 'undefined', 'Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY');\nif (!Object.getOwnPropertyDescriptor(Module, 'read')) Object.defineProperty(Module, 'read', { configurable: true, get: function() { abort('Module.read has been replaced with plain read_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)') } });\nif (!Object.getOwnPropertyDescriptor(Module, 'readAsync')) Object.defineProperty(Module, 'readAsync', { configurable: true, get: function() { abort('Module.readAsync has been replaced with plain readAsync (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)') } });\nif (!Object.getOwnPropertyDescriptor(Module, 'readBinary')) Object.defineProperty(Module, 'readBinary', { configurable: true, get: function() { abort('Module.readBinary has been replaced with plain readBinary (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)') } });\nif (!Object.getOwnPropertyDescriptor(Module, 'setWindowTitle')) Object.defineProperty(Module, 'setWindowTitle', { configurable: true, get: function() { abort('Module.setWindowTitle has been replaced with plain setWindowTitle (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)') } });\nvar IDBFS = 'IDBFS is no longer included by default; build with -lidbfs.js';\nvar PROXYFS = 'PROXYFS is no longer included by default; build with -lproxyfs.js';\nvar WORKERFS = 'WORKERFS is no longer included by default; build with -lworkerfs.js';\nvar NODEFS = 'NODEFS is no longer included by default; build with -lnodefs.js';\n\n\n\n\n\n\n// {{PREAMBLE_ADDITIONS}}\n\nvar STACK_ALIGN = 16;\n\nfunction dynamicAlloc(size) {\n  assert(DYNAMICTOP_PTR);\n  var ret = HEAP32[DYNAMICTOP_PTR>>2];\n  var end = (ret + size + 15) & -16;\n  assert(end <= HEAP8.length, 'failure to dynamicAlloc - memory growth etc. is not supported there, call malloc/sbrk directly');\n  HEAP32[DYNAMICTOP_PTR>>2] = end;\n  return ret;\n}\n\nfunction alignMemory(size, factor) {\n  if (!factor) factor = STACK_ALIGN; // stack alignment (16-byte) by default\n  return Math.ceil(size / factor) * factor;\n}\n\nfunction getNativeTypeSize(type) {\n  switch (type) {\n    case 'i1': case 'i8': return 1;\n    case 'i16': return 2;\n    case 'i32': return 4;\n    case 'i64': return 8;\n    case 'float': return 4;\n    case 'double': return 8;\n    default: {\n      if (type[type.length-1] === '*') {\n        return 4; // A pointer\n      } else if (type[0] === 'i') {\n        var bits = Number(type.substr(1));\n        assert(bits % 8 === 0, 'getNativeTypeSize invalid bits ' + bits + ', type ' + type);\n        return bits / 8;\n      } else {\n        return 0;\n      }\n    }\n  }\n}\n\nfunction warnOnce(text) {\n  if (!warnOnce.shown) warnOnce.shown = {};\n  if (!warnOnce.shown[text]) {\n    warnOnce.shown[text] = 1;\n    err(text);\n  }\n}\n\n\n\n\n\n\n\n\n// Wraps a JS function as a wasm function with a given signature.\nfunction convertJsFunctionToWasm(func, sig) {\n\n  // If the type reflection proposal is available, use the new\n  // \"WebAssembly.Function\" constructor.\n  // Otherwise, construct a minimal wasm module importing the JS function and\n  // re-exporting it.\n  if (typeof WebAssembly.Function === \"function\") {\n    var typeNames = {\n      'i': 'i32',\n      'j': 'i64',\n      'f': 'f32',\n      'd': 'f64'\n    };\n    var type = {\n      parameters: [],\n      results: sig[0] == 'v' ? [] : [typeNames[sig[0]]]\n    };\n    for (var i = 1; i < sig.length; ++i) {\n      type.parameters.push(typeNames[sig[i]]);\n    }\n    return new WebAssembly.Function(type, func);\n  }\n\n  // The module is static, with the exception of the type section, which is\n  // generated based on the signature passed in.\n  var typeSection = [\n    0x01, // id: section,\n    0x00, // length: 0 (placeholder)\n    0x01, // count: 1\n    0x60, // form: func\n  ];\n  var sigRet = sig.slice(0, 1);\n  var sigParam = sig.slice(1);\n  var typeCodes = {\n    'i': 0x7f, // i32\n    'j': 0x7e, // i64\n    'f': 0x7d, // f32\n    'd': 0x7c, // f64\n  };\n\n  // Parameters, length + signatures\n  typeSection.push(sigParam.length);\n  for (var i = 0; i < sigParam.length; ++i) {\n    typeSection.push(typeCodes[sigParam[i]]);\n  }\n\n  // Return values, length + signatures\n  // With no multi-return in MVP, either 0 (void) or 1 (anything else)\n  if (sigRet == 'v') {\n    typeSection.push(0x00);\n  } else {\n    typeSection = typeSection.concat([0x01, typeCodes[sigRet]]);\n  }\n\n  // Write the overall length of the type section back into the section header\n  // (excepting the 2 bytes for the section id and length)\n  typeSection[1] = typeSection.length - 2;\n\n  // Rest of the module is static\n  var bytes = new Uint8Array([\n    0x00, 0x61, 0x73, 0x6d, // magic (\"\\0asm\")\n    0x01, 0x00, 0x00, 0x00, // version: 1\n  ].concat(typeSection, [\n    0x02, 0x07, // import section\n      // (import \"e\" \"f\" (func 0 (type 0)))\n      0x01, 0x01, 0x65, 0x01, 0x66, 0x00, 0x00,\n    0x07, 0x05, // export section\n      // (export \"f\" (func 0 (type 0)))\n      0x01, 0x01, 0x66, 0x00, 0x00,\n  ]));\n\n   // We can compile this wasm module synchronously because it is very small.\n  // This accepts an import (at \"e.f\"), that it reroutes to an export (at \"f\")\n  var module = new WebAssembly.Module(bytes);\n  var instance = new WebAssembly.Instance(module, {\n    'e': {\n      'f': func\n    }\n  });\n  var wrappedFunc = instance.exports['f'];\n  return wrappedFunc;\n}\n\nvar freeTableIndexes = [];\n\n// Weak map of functions in the table to their indexes, created on first use.\nvar functionsInTableMap;\n\n// Add a wasm function to the table.\nfunction addFunctionWasm(func, sig) {\n  var table = wasmTable;\n\n  // Check if the function is already in the table, to ensure each function\n  // gets a unique index. First, create the map if this is the first use.\n  if (!functionsInTableMap) {\n    functionsInTableMap = new WeakMap();\n    for (var i = 0; i < table.length; i++) {\n      var item = table.get(i);\n      // Ignore null values.\n      if (item) {\n        functionsInTableMap.set(item, i);\n      }\n    }\n  }\n  if (functionsInTableMap.has(func)) {\n    return functionsInTableMap.get(func);\n  }\n\n  // It's not in the table, add it now.\n\n\n  var ret;\n  // Reuse a free index if there is one, otherwise grow.\n  if (freeTableIndexes.length) {\n    ret = freeTableIndexes.pop();\n  } else {\n    ret = table.length;\n    // Grow the table\n    try {\n      table.grow(1);\n    } catch (err) {\n      if (!(err instanceof RangeError)) {\n        throw err;\n      }\n      throw 'Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.';\n    }\n  }\n\n  // Set the new value.\n  try {\n    // Attempting to call this with JS function will cause of table.set() to fail\n    table.set(ret, func);\n  } catch (err) {\n    if (!(err instanceof TypeError)) {\n      throw err;\n    }\n    assert(typeof sig !== 'undefined', 'Missing signature argument to addFunction');\n    var wrapped = convertJsFunctionToWasm(func, sig);\n    table.set(ret, wrapped);\n  }\n\n  functionsInTableMap.set(func, ret);\n\n  return ret;\n}\n\nfunction removeFunctionWasm(index) {\n  functionsInTableMap.delete(wasmTable.get(index));\n  freeTableIndexes.push(index);\n}\n\n// 'sig' parameter is required for the llvm backend but only when func is not\n// already a WebAssembly function.\nfunction addFunction(func, sig) {\n  assert(typeof func !== 'undefined');\n\n  return addFunctionWasm(func, sig);\n}\n\nfunction removeFunction(index) {\n  removeFunctionWasm(index);\n}\n\n\n\nvar funcWrappers = {};\n\nfunction getFuncWrapper(func, sig) {\n  if (!func) return; // on null pointer, return undefined\n  assert(sig);\n  if (!funcWrappers[sig]) {\n    funcWrappers[sig] = {};\n  }\n  var sigCache = funcWrappers[sig];\n  if (!sigCache[func]) {\n    // optimize away arguments usage in common cases\n    if (sig.length === 1) {\n      sigCache[func] = function dynCall_wrapper() {\n        return dynCall(sig, func);\n      };\n    } else if (sig.length === 2) {\n      sigCache[func] = function dynCall_wrapper(arg) {\n        return dynCall(sig, func, [arg]);\n      };\n    } else {\n      // general case\n      sigCache[func] = function dynCall_wrapper() {\n        return dynCall(sig, func, Array.prototype.slice.call(arguments));\n      };\n    }\n  }\n  return sigCache[func];\n}\n\n\n\n\n\n\n\nfunction makeBigInt(low, high, unsigned) {\n  return unsigned ? ((+((low>>>0)))+((+((high>>>0)))*4294967296.0)) : ((+((low>>>0)))+((+((high|0)))*4294967296.0));\n}\n\n/** @param {Array=} args */\nfunction dynCall(sig, ptr, args) {\n  if (args && args.length) {\n    // j (64-bit integer) must be passed in as two numbers [low 32, high 32].\n    assert(args.length === sig.substring(1).replace(/j/g, '--').length);\n    assert(('dynCall_' + sig) in Module, 'bad function pointer type - no table for sig \\'' + sig + '\\'');\n    return Module['dynCall_' + sig].apply(null, [ptr].concat(args));\n  } else {\n    assert(sig.length == 1);\n    assert(('dynCall_' + sig) in Module, 'bad function pointer type - no table for sig \\'' + sig + '\\'');\n    return Module['dynCall_' + sig].call(null, ptr);\n  }\n}\n\nvar tempRet0 = 0;\n\nvar setTempRet0 = function(value) {\n  tempRet0 = value;\n};\n\nvar getTempRet0 = function() {\n  return tempRet0;\n};\n\nfunction getCompilerSetting(name) {\n  throw 'You must build with -s RETAIN_COMPILER_SETTINGS=1 for getCompilerSetting or emscripten_get_compiler_setting to work';\n}\n\n// The address globals begin at. Very low in memory, for code size and optimization opportunities.\n// Above 0 is static memory, starting with globals.\n// Then the stack.\n// Then 'dynamic' memory for sbrk.\nvar GLOBAL_BASE = 1024;\n\n\n\n\n\n// === Preamble library stuff ===\n\n// Documentation for the public APIs defined in this file must be updated in:\n//    site/source/docs/api_reference/preamble.js.rst\n// A prebuilt local version of the documentation is available at:\n//    site/build/text/docs/api_reference/preamble.js.txt\n// You can also build docs locally as HTML or other formats in site/\n// An online HTML version (which may be of a different version of Emscripten)\n//    is up at http://kripken.github.io/emscripten-site/docs/api_reference/preamble.js.html\n\n\nvar wasmBinary;if (Module['wasmBinary']) wasmBinary = Module['wasmBinary'];if (!Object.getOwnPropertyDescriptor(Module, 'wasmBinary')) Object.defineProperty(Module, 'wasmBinary', { configurable: true, get: function() { abort('Module.wasmBinary has been replaced with plain wasmBinary (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)') } });\nvar noExitRuntime;if (Module['noExitRuntime']) noExitRuntime = Module['noExitRuntime'];if (!Object.getOwnPropertyDescriptor(Module, 'noExitRuntime')) Object.defineProperty(Module, 'noExitRuntime', { configurable: true, get: function() { abort('Module.noExitRuntime has been replaced with plain noExitRuntime (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)') } });\n\n\nif (typeof WebAssembly !== 'object') {\n  abort('No WebAssembly support found. Build with -s WASM=0 to target JavaScript instead.');\n}\n\n\n\n\n// In MINIMAL_RUNTIME, setValue() and getValue() are only available when building with safe heap enabled, for heap safety checking.\n// In traditional runtime, setValue() and getValue() are always available (although their use is highly discouraged due to perf penalties)\n\n/** @param {number} ptr\n    @param {number} value\n    @param {string} type\n    @param {number|boolean=} noSafe */\nfunction setValue(ptr, value, type, noSafe) {\n  type = type || 'i8';\n  if (type.charAt(type.length-1) === '*') type = 'i32'; // pointers are 32-bit\n    switch(type) {\n      case 'i1': HEAP8[((ptr)>>0)]=value; break;\n      case 'i8': HEAP8[((ptr)>>0)]=value; break;\n      case 'i16': HEAP16[((ptr)>>1)]=value; break;\n      case 'i32': HEAP32[((ptr)>>2)]=value; break;\n      case 'i64': (tempI64 = [value>>>0,(tempDouble=value,(+(Math_abs(tempDouble))) >= 1.0 ? (tempDouble > 0.0 ? ((Math_min((+(Math_floor((tempDouble)/4294967296.0))), 4294967295.0))|0)>>>0 : (~~((+(Math_ceil((tempDouble - +(((~~(tempDouble)))>>>0))/4294967296.0)))))>>>0) : 0)],HEAP32[((ptr)>>2)]=tempI64[0],HEAP32[(((ptr)+(4))>>2)]=tempI64[1]); break;\n      case 'float': HEAPF32[((ptr)>>2)]=value; break;\n      case 'double': HEAPF64[((ptr)>>3)]=value; break;\n      default: abort('invalid type for setValue: ' + type);\n    }\n}\n\n/** @param {number} ptr\n    @param {string} type\n    @param {number|boolean=} noSafe */\nfunction getValue(ptr, type, noSafe) {\n  type = type || 'i8';\n  if (type.charAt(type.length-1) === '*') type = 'i32'; // pointers are 32-bit\n    switch(type) {\n      case 'i1': return HEAP8[((ptr)>>0)];\n      case 'i8': return HEAP8[((ptr)>>0)];\n      case 'i16': return HEAP16[((ptr)>>1)];\n      case 'i32': return HEAP32[((ptr)>>2)];\n      case 'i64': return HEAP32[((ptr)>>2)];\n      case 'float': return HEAPF32[((ptr)>>2)];\n      case 'double': return HEAPF64[((ptr)>>3)];\n      default: abort('invalid type for getValue: ' + type);\n    }\n  return null;\n}\n\n\n\n\n\n\n// Wasm globals\n\nvar wasmMemory;\n\n// In fastcomp asm.js, we don't need a wasm Table at all.\n// In the wasm backend, we polyfill the WebAssembly object,\n// so this creates a (non-native-wasm) table for us.\nvar wasmTable = new WebAssembly.Table({\n  'initial': 354,\n  'maximum': 354 + 0,\n  'element': 'anyfunc'\n});\n\n\n//========================================\n// Runtime essentials\n//========================================\n\n// whether we are quitting the application. no code should run after this.\n// set in exit() and abort()\nvar ABORT = false;\n\n// set by exit() and abort().  Passed to 'onExit' handler.\n// NOTE: This is also used as the process return code code in shell environments\n// but only when noExitRuntime is false.\nvar EXITSTATUS = 0;\n\n/** @type {function(*, string=)} */\nfunction assert(condition, text) {\n  if (!condition) {\n    abort('Assertion failed: ' + text);\n  }\n}\n\n// Returns the C function with a specified identifier (for C++, you need to do manual name mangling)\nfunction getCFunc(ident) {\n  var func = Module['_' + ident]; // closure exported function\n  assert(func, 'Cannot call unknown function ' + ident + ', make sure it is exported');\n  return func;\n}\n\n// C calling interface.\n/** @param {string|null=} returnType\n    @param {Array=} argTypes\n    @param {Arguments|Array=} args\n    @param {Object=} opts */\nfunction ccall(ident, returnType, argTypes, args, opts) {\n  // For fast lookup of conversion functions\n  var toC = {\n    'string': function(str) {\n      var ret = 0;\n      if (str !== null && str !== undefined && str !== 0) { // null string\n        // at most 4 bytes per UTF-8 code point, +1 for the trailing '\\0'\n        var len = (str.length << 2) + 1;\n        ret = stackAlloc(len);\n        stringToUTF8(str, ret, len);\n      }\n      return ret;\n    },\n    'array': function(arr) {\n      var ret = stackAlloc(arr.length);\n      writeArrayToMemory(arr, ret);\n      return ret;\n    }\n  };\n\n  function convertReturnValue(ret) {\n    if (returnType === 'string') return UTF8ToString(ret);\n    if (returnType === 'boolean') return Boolean(ret);\n    return ret;\n  }\n\n  var func = getCFunc(ident);\n  var cArgs = [];\n  var stack = 0;\n  assert(returnType !== 'array', 'Return type should not be \"array\".');\n  if (args) {\n    for (var i = 0; i < args.length; i++) {\n      var converter = toC[argTypes[i]];\n      if (converter) {\n        if (stack === 0) stack = stackSave();\n        cArgs[i] = converter(args[i]);\n      } else {\n        cArgs[i] = args[i];\n      }\n    }\n  }\n  var ret = func.apply(null, cArgs);\n\n  ret = convertReturnValue(ret);\n  if (stack !== 0) stackRestore(stack);\n  return ret;\n}\n\n/** @param {string=} returnType\n    @param {Array=} argTypes\n    @param {Object=} opts */\nfunction cwrap(ident, returnType, argTypes, opts) {\n  return function() {\n    return ccall(ident, returnType, argTypes, arguments, opts);\n  }\n}\n\nvar ALLOC_NORMAL = 0; // Tries to use _malloc()\nvar ALLOC_STACK = 1; // Lives for the duration of the current function call\nvar ALLOC_DYNAMIC = 2; // Cannot be freed except through sbrk\nvar ALLOC_NONE = 3; // Do not allocate\n\n// allocate(): This is for internal use. You can use it yourself as well, but the interface\n//             is a little tricky (see docs right below). The reason is that it is optimized\n//             for multiple syntaxes to save space in generated code. So you should\n//             normally not use allocate(), and instead allocate memory using _malloc(),\n//             initialize it with setValue(), and so forth.\n// @slab: An array of data, or a number. If a number, then the size of the block to allocate,\n//        in *bytes* (note that this is sometimes confusing: the next parameter does not\n//        affect this!)\n// @types: Either an array of types, one for each byte (or 0 if no type at that position),\n//         or a single type which is used for the entire block. This only matters if there\n//         is initial data - if @slab is a number, then this does not matter at all and is\n//         ignored.\n// @allocator: How to allocate memory, see ALLOC_*\n/** @type {function((TypedArray|Array<number>|number), string, number, number=)} */\nfunction allocate(slab, types, allocator, ptr) {\n  var zeroinit, size;\n  if (typeof slab === 'number') {\n    zeroinit = true;\n    size = slab;\n  } else {\n    zeroinit = false;\n    size = slab.length;\n  }\n\n  var singleType = typeof types === 'string' ? types : null;\n\n  var ret;\n  if (allocator == ALLOC_NONE) {\n    ret = ptr;\n  } else {\n    ret = [_malloc,\n    stackAlloc,\n    dynamicAlloc][allocator](Math.max(size, singleType ? 1 : types.length));\n  }\n\n  if (zeroinit) {\n    var stop;\n    ptr = ret;\n    assert((ret & 3) == 0);\n    stop = ret + (size & ~3);\n    for (; ptr < stop; ptr += 4) {\n      HEAP32[((ptr)>>2)]=0;\n    }\n    stop = ret + size;\n    while (ptr < stop) {\n      HEAP8[((ptr++)>>0)]=0;\n    }\n    return ret;\n  }\n\n  if (singleType === 'i8') {\n    if (slab.subarray || slab.slice) {\n      HEAPU8.set(/** @type {!Uint8Array} */ (slab), ret);\n    } else {\n      HEAPU8.set(new Uint8Array(slab), ret);\n    }\n    return ret;\n  }\n\n  var i = 0, type, typeSize, previousType;\n  while (i < size) {\n    var curr = slab[i];\n\n    type = singleType || types[i];\n    if (type === 0) {\n      i++;\n      continue;\n    }\n    assert(type, 'Must know what type to store in allocate!');\n\n    if (type == 'i64') type = 'i32'; // special case: we have one i32 here, and one i32 later\n\n    setValue(ret+i, curr, type);\n\n    // no need to look up size unless type changes, so cache it\n    if (previousType !== type) {\n      typeSize = getNativeTypeSize(type);\n      previousType = type;\n    }\n    i += typeSize;\n  }\n\n  return ret;\n}\n\n// Allocate memory during any stage of startup - static memory early on, dynamic memory later, malloc when ready\nfunction getMemory(size) {\n  if (!runtimeInitialized) return dynamicAlloc(size);\n  return _malloc(size);\n}\n\n\n\n\n// runtime_strings.js: Strings related runtime functions that are part of both MINIMAL_RUNTIME and regular runtime.\n\n// Given a pointer 'ptr' to a null-terminated UTF8-encoded string in the given array that contains uint8 values, returns\n// a copy of that string as a Javascript String object.\n\nvar UTF8Decoder = typeof TextDecoder !== 'undefined' ? new TextDecoder('utf8') : undefined;\n\n/**\n * @param {number} idx\n * @param {number=} maxBytesToRead\n * @return {string}\n */\nfunction UTF8ArrayToString(heap, idx, maxBytesToRead) {\n  var endIdx = idx + maxBytesToRead;\n  var endPtr = idx;\n  // TextDecoder needs to know the byte length in advance, it doesn't stop on null terminator by itself.\n  // Also, use the length info to avoid running tiny strings through TextDecoder, since .subarray() allocates garbage.\n  // (As a tiny code save trick, compare endPtr against endIdx using a negation, so that undefined means Infinity)\n  while (heap[endPtr] && !(endPtr >= endIdx)) ++endPtr;\n\n  if (endPtr - idx > 16 && heap.subarray && UTF8Decoder) {\n    return UTF8Decoder.decode(heap.subarray(idx, endPtr));\n  } else {\n    var str = '';\n    // If building with TextDecoder, we have already computed the string length above, so test loop end condition against that\n    while (idx < endPtr) {\n      // For UTF8 byte structure, see:\n      // http://en.wikipedia.org/wiki/UTF-8#Description\n      // https://www.ietf.org/rfc/rfc2279.txt\n      // https://tools.ietf.org/html/rfc3629\n      var u0 = heap[idx++];\n      if (!(u0 & 0x80)) { str += String.fromCharCode(u0); continue; }\n      var u1 = heap[idx++] & 63;\n      if ((u0 & 0xE0) == 0xC0) { str += String.fromCharCode(((u0 & 31) << 6) | u1); continue; }\n      var u2 = heap[idx++] & 63;\n      if ((u0 & 0xF0) == 0xE0) {\n        u0 = ((u0 & 15) << 12) | (u1 << 6) | u2;\n      } else {\n        if ((u0 & 0xF8) != 0xF0) warnOnce('Invalid UTF-8 leading byte 0x' + u0.toString(16) + ' encountered when deserializing a UTF-8 string on the asm.js/wasm heap to a JS string!');\n        u0 = ((u0 & 7) << 18) | (u1 << 12) | (u2 << 6) | (heap[idx++] & 63);\n      }\n\n      if (u0 < 0x10000) {\n        str += String.fromCharCode(u0);\n      } else {\n        var ch = u0 - 0x10000;\n        str += String.fromCharCode(0xD800 | (ch >> 10), 0xDC00 | (ch & 0x3FF));\n      }\n    }\n  }\n  return str;\n}\n\n// Given a pointer 'ptr' to a null-terminated UTF8-encoded string in the emscripten HEAP, returns a\n// copy of that string as a Javascript String object.\n// maxBytesToRead: an optional length that specifies the maximum number of bytes to read. You can omit\n//                 this parameter to scan the string until the first \\0 byte. If maxBytesToRead is\n//                 passed, and the string at [ptr, ptr+maxBytesToReadr[ contains a null byte in the\n//                 middle, then the string will cut short at that byte index (i.e. maxBytesToRead will\n//                 not produce a string of exact length [ptr, ptr+maxBytesToRead[)\n//                 N.B. mixing frequent uses of UTF8ToString() with and without maxBytesToRead may\n//                 throw JS JIT optimizations off, so it is worth to consider consistently using one\n//                 style or the other.\n/**\n * @param {number} ptr\n * @param {number=} maxBytesToRead\n * @return {string}\n */\nfunction UTF8ToString(ptr, maxBytesToRead) {\n  return ptr ? UTF8ArrayToString(HEAPU8, ptr, maxBytesToRead) : '';\n}\n\n// Copies the given Javascript String object 'str' to the given byte array at address 'outIdx',\n// encoded in UTF8 form and null-terminated. The copy will require at most str.length*4+1 bytes of space in the HEAP.\n// Use the function lengthBytesUTF8 to compute the exact number of bytes (excluding null terminator) that this function will write.\n// Parameters:\n//   str: the Javascript string to copy.\n//   heap: the array to copy to. Each index in this array is assumed to be one 8-byte element.\n//   outIdx: The starting offset in the array to begin the copying.\n//   maxBytesToWrite: The maximum number of bytes this function can write to the array.\n//                    This count should include the null terminator,\n//                    i.e. if maxBytesToWrite=1, only the null terminator will be written and nothing else.\n//                    maxBytesToWrite=0 does not write any bytes to the output, not even the null terminator.\n// Returns the number of bytes written, EXCLUDING the null terminator.\n\nfunction stringToUTF8Array(str, heap, outIdx, maxBytesToWrite) {\n  if (!(maxBytesToWrite > 0)) // Parameter maxBytesToWrite is not optional. Negative values, 0, null, undefined and false each don't write out any bytes.\n    return 0;\n\n  var startIdx = outIdx;\n  var endIdx = outIdx + maxBytesToWrite - 1; // -1 for string null terminator.\n  for (var i = 0; i < str.length; ++i) {\n    // Gotcha: charCodeAt returns a 16-bit word that is a UTF-16 encoded code unit, not a Unicode code point of the character! So decode UTF16->UTF32->UTF8.\n    // See http://unicode.org/faq/utf_bom.html#utf16-3\n    // For UTF8 byte structure, see http://en.wikipedia.org/wiki/UTF-8#Description and https://www.ietf.org/rfc/rfc2279.txt and https://tools.ietf.org/html/rfc3629\n    var u = str.charCodeAt(i); // possibly a lead surrogate\n    if (u >= 0xD800 && u <= 0xDFFF) {\n      var u1 = str.charCodeAt(++i);\n      u = 0x10000 + ((u & 0x3FF) << 10) | (u1 & 0x3FF);\n    }\n    if (u <= 0x7F) {\n      if (outIdx >= endIdx) break;\n      heap[outIdx++] = u;\n    } else if (u <= 0x7FF) {\n      if (outIdx + 1 >= endIdx) break;\n      heap[outIdx++] = 0xC0 | (u >> 6);\n      heap[outIdx++] = 0x80 | (u & 63);\n    } else if (u <= 0xFFFF) {\n      if (outIdx + 2 >= endIdx) break;\n      heap[outIdx++] = 0xE0 | (u >> 12);\n      heap[outIdx++] = 0x80 | ((u >> 6) & 63);\n      heap[outIdx++] = 0x80 | (u & 63);\n    } else {\n      if (outIdx + 3 >= endIdx) break;\n      if (u >= 0x200000) warnOnce('Invalid Unicode code point 0x' + u.toString(16) + ' encountered when serializing a JS string to an UTF-8 string on the asm.js/wasm heap! (Valid unicode code points should be in range 0-0x1FFFFF).');\n      heap[outIdx++] = 0xF0 | (u >> 18);\n      heap[outIdx++] = 0x80 | ((u >> 12) & 63);\n      heap[outIdx++] = 0x80 | ((u >> 6) & 63);\n      heap[outIdx++] = 0x80 | (u & 63);\n    }\n  }\n  // Null-terminate the pointer to the buffer.\n  heap[outIdx] = 0;\n  return outIdx - startIdx;\n}\n\n// Copies the given Javascript String object 'str' to the emscripten HEAP at address 'outPtr',\n// null-terminated and encoded in UTF8 form. The copy will require at most str.length*4+1 bytes of space in the HEAP.\n// Use the function lengthBytesUTF8 to compute the exact number of bytes (excluding null terminator) that this function will write.\n// Returns the number of bytes written, EXCLUDING the null terminator.\n\nfunction stringToUTF8(str, outPtr, maxBytesToWrite) {\n  assert(typeof maxBytesToWrite == 'number', 'stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!');\n  return stringToUTF8Array(str, HEAPU8,outPtr, maxBytesToWrite);\n}\n\n// Returns the number of bytes the given Javascript string takes if encoded as a UTF8 byte array, EXCLUDING the null terminator byte.\nfunction lengthBytesUTF8(str) {\n  var len = 0;\n  for (var i = 0; i < str.length; ++i) {\n    // Gotcha: charCodeAt returns a 16-bit word that is a UTF-16 encoded code unit, not a Unicode code point of the character! So decode UTF16->UTF32->UTF8.\n    // See http://unicode.org/faq/utf_bom.html#utf16-3\n    var u = str.charCodeAt(i); // possibly a lead surrogate\n    if (u >= 0xD800 && u <= 0xDFFF) u = 0x10000 + ((u & 0x3FF) << 10) | (str.charCodeAt(++i) & 0x3FF);\n    if (u <= 0x7F) ++len;\n    else if (u <= 0x7FF) len += 2;\n    else if (u <= 0xFFFF) len += 3;\n    else len += 4;\n  }\n  return len;\n}\n\n\n\n\n\n// runtime_strings_extra.js: Strings related runtime functions that are available only in regular runtime.\n\n// Given a pointer 'ptr' to a null-terminated ASCII-encoded string in the emscripten HEAP, returns\n// a copy of that string as a Javascript String object.\n\nfunction AsciiToString(ptr) {\n  var str = '';\n  while (1) {\n    var ch = HEAPU8[((ptr++)>>0)];\n    if (!ch) return str;\n    str += String.fromCharCode(ch);\n  }\n}\n\n// Copies the given Javascript String object 'str' to the emscripten HEAP at address 'outPtr',\n// null-terminated and encoded in ASCII form. The copy will require at most str.length+1 bytes of space in the HEAP.\n\nfunction stringToAscii(str, outPtr) {\n  return writeAsciiToMemory(str, outPtr, false);\n}\n\n// Given a pointer 'ptr' to a null-terminated UTF16LE-encoded string in the emscripten HEAP, returns\n// a copy of that string as a Javascript String object.\n\nvar UTF16Decoder = typeof TextDecoder !== 'undefined' ? new TextDecoder('utf-16le') : undefined;\n\nfunction UTF16ToString(ptr, maxBytesToRead) {\n  assert(ptr % 2 == 0, 'Pointer passed to UTF16ToString must be aligned to two bytes!');\n  var endPtr = ptr;\n  // TextDecoder needs to know the byte length in advance, it doesn't stop on null terminator by itself.\n  // Also, use the length info to avoid running tiny strings through TextDecoder, since .subarray() allocates garbage.\n  var idx = endPtr >> 1;\n  var maxIdx = idx + maxBytesToRead / 2;\n  // If maxBytesToRead is not passed explicitly, it will be undefined, and this\n  // will always evaluate to true. This saves on code size.\n  while (!(idx >= maxIdx) && HEAPU16[idx]) ++idx;\n  endPtr = idx << 1;\n\n  if (endPtr - ptr > 32 && UTF16Decoder) {\n    return UTF16Decoder.decode(HEAPU8.subarray(ptr, endPtr));\n  } else {\n    var i = 0;\n\n    var str = '';\n    while (1) {\n      var codeUnit = HEAP16[(((ptr)+(i*2))>>1)];\n      if (codeUnit == 0 || i == maxBytesToRead / 2) return str;\n      ++i;\n      // fromCharCode constructs a character from a UTF-16 code unit, so we can pass the UTF16 string right through.\n      str += String.fromCharCode(codeUnit);\n    }\n  }\n}\n\n// Copies the given Javascript String object 'str' to the emscripten HEAP at address 'outPtr',\n// null-terminated and encoded in UTF16 form. The copy will require at most str.length*4+2 bytes of space in the HEAP.\n// Use the function lengthBytesUTF16() to compute the exact number of bytes (excluding null terminator) that this function will write.\n// Parameters:\n//   str: the Javascript string to copy.\n//   outPtr: Byte address in Emscripten HEAP where to write the string to.\n//   maxBytesToWrite: The maximum number of bytes this function can write to the array. This count should include the null\n//                    terminator, i.e. if maxBytesToWrite=2, only the null terminator will be written and nothing else.\n//                    maxBytesToWrite<2 does not write any bytes to the output, not even the null terminator.\n// Returns the number of bytes written, EXCLUDING the null terminator.\n\nfunction stringToUTF16(str, outPtr, maxBytesToWrite) {\n  assert(outPtr % 2 == 0, 'Pointer passed to stringToUTF16 must be aligned to two bytes!');\n  assert(typeof maxBytesToWrite == 'number', 'stringToUTF16(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!');\n  // Backwards compatibility: if max bytes is not specified, assume unsafe unbounded write is allowed.\n  if (maxBytesToWrite === undefined) {\n    maxBytesToWrite = 0x7FFFFFFF;\n  }\n  if (maxBytesToWrite < 2) return 0;\n  maxBytesToWrite -= 2; // Null terminator.\n  var startPtr = outPtr;\n  var numCharsToWrite = (maxBytesToWrite < str.length*2) ? (maxBytesToWrite / 2) : str.length;\n  for (var i = 0; i < numCharsToWrite; ++i) {\n    // charCodeAt returns a UTF-16 encoded code unit, so it can be directly written to the HEAP.\n    var codeUnit = str.charCodeAt(i); // possibly a lead surrogate\n    HEAP16[((outPtr)>>1)]=codeUnit;\n    outPtr += 2;\n  }\n  // Null-terminate the pointer to the HEAP.\n  HEAP16[((outPtr)>>1)]=0;\n  return outPtr - startPtr;\n}\n\n// Returns the number of bytes the given Javascript string takes if encoded as a UTF16 byte array, EXCLUDING the null terminator byte.\n\nfunction lengthBytesUTF16(str) {\n  return str.length*2;\n}\n\nfunction UTF32ToString(ptr, maxBytesToRead) {\n  assert(ptr % 4 == 0, 'Pointer passed to UTF32ToString must be aligned to four bytes!');\n  var i = 0;\n\n  var str = '';\n  // If maxBytesToRead is not passed explicitly, it will be undefined, and this\n  // will always evaluate to true. This saves on code size.\n  while (!(i >= maxBytesToRead / 4)) {\n    var utf32 = HEAP32[(((ptr)+(i*4))>>2)];\n    if (utf32 == 0) break;\n    ++i;\n    // Gotcha: fromCharCode constructs a character from a UTF-16 encoded code (pair), not from a Unicode code point! So encode the code point to UTF-16 for constructing.\n    // See http://unicode.org/faq/utf_bom.html#utf16-3\n    if (utf32 >= 0x10000) {\n      var ch = utf32 - 0x10000;\n      str += String.fromCharCode(0xD800 | (ch >> 10), 0xDC00 | (ch & 0x3FF));\n    } else {\n      str += String.fromCharCode(utf32);\n    }\n  }\n  return str;\n}\n\n// Copies the given Javascript String object 'str' to the emscripten HEAP at address 'outPtr',\n// null-terminated and encoded in UTF32 form. The copy will require at most str.length*4+4 bytes of space in the HEAP.\n// Use the function lengthBytesUTF32() to compute the exact number of bytes (excluding null terminator) that this function will write.\n// Parameters:\n//   str: the Javascript string to copy.\n//   outPtr: Byte address in Emscripten HEAP where to write the string to.\n//   maxBytesToWrite: The maximum number of bytes this function can write to the array. This count should include the null\n//                    terminator, i.e. if maxBytesToWrite=4, only the null terminator will be written and nothing else.\n//                    maxBytesToWrite<4 does not write any bytes to the output, not even the null terminator.\n// Returns the number of bytes written, EXCLUDING the null terminator.\n\nfunction stringToUTF32(str, outPtr, maxBytesToWrite) {\n  assert(outPtr % 4 == 0, 'Pointer passed to stringToUTF32 must be aligned to four bytes!');\n  assert(typeof maxBytesToWrite == 'number', 'stringToUTF32(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!');\n  // Backwards compatibility: if max bytes is not specified, assume unsafe unbounded write is allowed.\n  if (maxBytesToWrite === undefined) {\n    maxBytesToWrite = 0x7FFFFFFF;\n  }\n  if (maxBytesToWrite < 4) return 0;\n  var startPtr = outPtr;\n  var endPtr = startPtr + maxBytesToWrite - 4;\n  for (var i = 0; i < str.length; ++i) {\n    // Gotcha: charCodeAt returns a 16-bit word that is a UTF-16 encoded code unit, not a Unicode code point of the character! We must decode the string to UTF-32 to the heap.\n    // See http://unicode.org/faq/utf_bom.html#utf16-3\n    var codeUnit = str.charCodeAt(i); // possibly a lead surrogate\n    if (codeUnit >= 0xD800 && codeUnit <= 0xDFFF) {\n      var trailSurrogate = str.charCodeAt(++i);\n      codeUnit = 0x10000 + ((codeUnit & 0x3FF) << 10) | (trailSurrogate & 0x3FF);\n    }\n    HEAP32[((outPtr)>>2)]=codeUnit;\n    outPtr += 4;\n    if (outPtr + 4 > endPtr) break;\n  }\n  // Null-terminate the pointer to the HEAP.\n  HEAP32[((outPtr)>>2)]=0;\n  return outPtr - startPtr;\n}\n\n// Returns the number of bytes the given Javascript string takes if encoded as a UTF16 byte array, EXCLUDING the null terminator byte.\n\nfunction lengthBytesUTF32(str) {\n  var len = 0;\n  for (var i = 0; i < str.length; ++i) {\n    // Gotcha: charCodeAt returns a 16-bit word that is a UTF-16 encoded code unit, not a Unicode code point of the character! We must decode the string to UTF-32 to the heap.\n    // See http://unicode.org/faq/utf_bom.html#utf16-3\n    var codeUnit = str.charCodeAt(i);\n    if (codeUnit >= 0xD800 && codeUnit <= 0xDFFF) ++i; // possibly a lead surrogate, so skip over the tail surrogate.\n    len += 4;\n  }\n\n  return len;\n}\n\n// Allocate heap space for a JS string, and write it there.\n// It is the responsibility of the caller to free() that memory.\nfunction allocateUTF8(str) {\n  var size = lengthBytesUTF8(str) + 1;\n  var ret = _malloc(size);\n  if (ret) stringToUTF8Array(str, HEAP8, ret, size);\n  return ret;\n}\n\n// Allocate stack space for a JS string, and write it there.\nfunction allocateUTF8OnStack(str) {\n  var size = lengthBytesUTF8(str) + 1;\n  var ret = stackAlloc(size);\n  stringToUTF8Array(str, HEAP8, ret, size);\n  return ret;\n}\n\n// Deprecated: This function should not be called because it is unsafe and does not provide\n// a maximum length limit of how many bytes it is allowed to write. Prefer calling the\n// function stringToUTF8Array() instead, which takes in a maximum length that can be used\n// to be secure from out of bounds writes.\n/** @deprecated\n    @param {boolean=} dontAddNull */\nfunction writeStringToMemory(string, buffer, dontAddNull) {\n  warnOnce('writeStringToMemory is deprecated and should not be called! Use stringToUTF8() instead!');\n\n  var /** @type {number} */ lastChar, /** @type {number} */ end;\n  if (dontAddNull) {\n    // stringToUTF8Array always appends null. If we don't want to do that, remember the\n    // character that existed at the location where the null will be placed, and restore\n    // that after the write (below).\n    end = buffer + lengthBytesUTF8(string);\n    lastChar = HEAP8[end];\n  }\n  stringToUTF8(string, buffer, Infinity);\n  if (dontAddNull) HEAP8[end] = lastChar; // Restore the value under the null character.\n}\n\nfunction writeArrayToMemory(array, buffer) {\n  assert(array.length >= 0, 'writeArrayToMemory array must have a length (should be an array or typed array)')\n  HEAP8.set(array, buffer);\n}\n\n/** @param {boolean=} dontAddNull */\nfunction writeAsciiToMemory(str, buffer, dontAddNull) {\n  for (var i = 0; i < str.length; ++i) {\n    assert(str.charCodeAt(i) === str.charCodeAt(i)&0xff);\n    HEAP8[((buffer++)>>0)]=str.charCodeAt(i);\n  }\n  // Null-terminate the pointer to the HEAP.\n  if (!dontAddNull) HEAP8[((buffer)>>0)]=0;\n}\n\n\n\n// Memory management\n\nvar PAGE_SIZE = 16384;\nvar WASM_PAGE_SIZE = 65536;\nvar ASMJS_PAGE_SIZE = 16777216;\n\nfunction alignUp(x, multiple) {\n  if (x % multiple > 0) {\n    x += multiple - (x % multiple);\n  }\n  return x;\n}\n\nvar HEAP,\n/** @type {ArrayBuffer} */\n  buffer,\n/** @type {Int8Array} */\n  HEAP8,\n/** @type {Uint8Array} */\n  HEAPU8,\n/** @type {Int16Array} */\n  HEAP16,\n/** @type {Uint16Array} */\n  HEAPU16,\n/** @type {Int32Array} */\n  HEAP32,\n/** @type {Uint32Array} */\n  HEAPU32,\n/** @type {Float32Array} */\n  HEAPF32,\n/** @type {Float64Array} */\n  HEAPF64;\n\nfunction updateGlobalBufferAndViews(buf) {\n  buffer = buf;\n  Module['HEAP8'] = HEAP8 = new Int8Array(buf);\n  Module['HEAP16'] = HEAP16 = new Int16Array(buf);\n  Module['HEAP32'] = HEAP32 = new Int32Array(buf);\n  Module['HEAPU8'] = HEAPU8 = new Uint8Array(buf);\n  Module['HEAPU16'] = HEAPU16 = new Uint16Array(buf);\n  Module['HEAPU32'] = HEAPU32 = new Uint32Array(buf);\n  Module['HEAPF32'] = HEAPF32 = new Float32Array(buf);\n  Module['HEAPF64'] = HEAPF64 = new Float64Array(buf);\n}\n\nvar STATIC_BASE = 1024,\n    STACK_BASE = 5264464,\n    STACKTOP = STACK_BASE,\n    STACK_MAX = 21584,\n    DYNAMIC_BASE = 5264464,\n    DYNAMICTOP_PTR = 21424;\n\nassert(STACK_BASE % 16 === 0, 'stack must start aligned');\nassert(DYNAMIC_BASE % 16 === 0, 'heap must start aligned');\n\n\nvar TOTAL_STACK = 5242880;\nif (Module['TOTAL_STACK']) assert(TOTAL_STACK === Module['TOTAL_STACK'], 'the stack size can no longer be determined at runtime')\n\nvar INITIAL_INITIAL_MEMORY = Module['INITIAL_MEMORY'] || 16777216;if (!Object.getOwnPropertyDescriptor(Module, 'INITIAL_MEMORY')) Object.defineProperty(Module, 'INITIAL_MEMORY', { configurable: true, get: function() { abort('Module.INITIAL_MEMORY has been replaced with plain INITIAL_INITIAL_MEMORY (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)') } });\n\nassert(INITIAL_INITIAL_MEMORY >= TOTAL_STACK, 'INITIAL_MEMORY should be larger than TOTAL_STACK, was ' + INITIAL_INITIAL_MEMORY + '! (TOTAL_STACK=' + TOTAL_STACK + ')');\n\n// check for full engine support (use string 'subarray' to avoid closure compiler confusion)\nassert(typeof Int32Array !== 'undefined' && typeof Float64Array !== 'undefined' && Int32Array.prototype.subarray !== undefined && Int32Array.prototype.set !== undefined,\n       'JS engine does not provide full typed array support');\n\n\n\n\n\n\n\n\n// In non-standalone/normal mode, we create the memory here.\n\n\n\n// Create the main memory. (Note: this isn't used in STANDALONE_WASM mode since the wasm\n// memory is created in the wasm, not in JS.)\n\n  if (Module['wasmMemory']) {\n    wasmMemory = Module['wasmMemory'];\n  } else\n  {\n    wasmMemory = new WebAssembly.Memory({\n      'initial': INITIAL_INITIAL_MEMORY / WASM_PAGE_SIZE\n      ,\n      'maximum': INITIAL_INITIAL_MEMORY / WASM_PAGE_SIZE\n    });\n  }\n\n\nif (wasmMemory) {\n  buffer = wasmMemory.buffer;\n}\n\n// If the user provides an incorrect length, just use that length instead rather than providing the user to\n// specifically provide the memory length with Module['INITIAL_MEMORY'].\nINITIAL_INITIAL_MEMORY = buffer.byteLength;\nassert(INITIAL_INITIAL_MEMORY % WASM_PAGE_SIZE === 0);\nupdateGlobalBufferAndViews(buffer);\n\nHEAP32[DYNAMICTOP_PTR>>2] = DYNAMIC_BASE;\n\n\n\n\n\n\n// Initializes the stack cookie. Called at the startup of main and at the startup of each thread in pthreads mode.\nfunction writeStackCookie() {\n  assert((STACK_MAX & 3) == 0);\n  // The stack grows downwards\n  HEAPU32[(STACK_MAX >> 2)+1] = 0x2135467;\n  HEAPU32[(STACK_MAX >> 2)+2] = 0x89BACDFE;\n  // Also test the global address 0 for integrity.\n  // We don't do this with ASan because ASan does its own checks for this.\n  HEAP32[0] = 0x63736d65; /* 'emsc' */\n}\n\nfunction checkStackCookie() {\n  var cookie1 = HEAPU32[(STACK_MAX >> 2)+1];\n  var cookie2 = HEAPU32[(STACK_MAX >> 2)+2];\n  if (cookie1 != 0x2135467 || cookie2 != 0x89BACDFE) {\n    abort('Stack overflow! Stack cookie has been overwritten, expected hex dwords 0x89BACDFE and 0x2135467, but received 0x' + cookie2.toString(16) + ' ' + cookie1.toString(16));\n  }\n  // Also test the global address 0 for integrity.\n  // We don't do this with ASan because ASan does its own checks for this.\n  if (HEAP32[0] !== 0x63736d65 /* 'emsc' */) abort('Runtime error: The application has corrupted its heap memory area (address zero)!');\n}\n\n\n\n\n\n// Endianness check (note: assumes compiler arch was little-endian)\n(function() {\n  var h16 = new Int16Array(1);\n  var h8 = new Int8Array(h16.buffer);\n  h16[0] = 0x6373;\n  if (h8[0] !== 0x73 || h8[1] !== 0x63) throw 'Runtime error: expected the system to be little-endian!';\n})();\n\nfunction abortFnPtrError(ptr, sig) {\n\tabort(\"Invalid function pointer \" + ptr + \" called with signature '\" + sig + \"'. Perhaps this is an invalid value (e.g. caused by calling a virtual method on a NULL pointer)? Or calling a function with an incorrect type, which will fail? (it is worth building your source files with -Werror (warnings are errors), as warnings can indicate undefined behavior which can cause this). Build with ASSERTIONS=2 for more info.\");\n}\n\n\n\nfunction callRuntimeCallbacks(callbacks) {\n  while(callbacks.length > 0) {\n    var callback = callbacks.shift();\n    if (typeof callback == 'function') {\n      callback(Module); // Pass the module as the first argument.\n      continue;\n    }\n    var func = callback.func;\n    if (typeof func === 'number') {\n      if (callback.arg === undefined) {\n        Module['dynCall_v'](func);\n      } else {\n        Module['dynCall_vi'](func, callback.arg);\n      }\n    } else {\n      func(callback.arg === undefined ? null : callback.arg);\n    }\n  }\n}\n\nvar __ATPRERUN__  = []; // functions called before the runtime is initialized\nvar __ATINIT__    = []; // functions called during startup\nvar __ATMAIN__    = []; // functions called when main() is to be run\nvar __ATEXIT__    = []; // functions called during shutdown\nvar __ATPOSTRUN__ = []; // functions called after the main() is called\n\nvar runtimeInitialized = false;\nvar runtimeExited = false;\n\n\nfunction preRun() {\n\n  if (Module['preRun']) {\n    if (typeof Module['preRun'] == 'function') Module['preRun'] = [Module['preRun']];\n    while (Module['preRun'].length) {\n      addOnPreRun(Module['preRun'].shift());\n    }\n  }\n\n  callRuntimeCallbacks(__ATPRERUN__);\n}\n\nfunction initRuntime() {\n  checkStackCookie();\n  assert(!runtimeInitialized);\n  runtimeInitialized = true;\n  \n  callRuntimeCallbacks(__ATINIT__);\n}\n\nfunction preMain() {\n  checkStackCookie();\n  \n  callRuntimeCallbacks(__ATMAIN__);\n}\n\nfunction exitRuntime() {\n  checkStackCookie();\n  runtimeExited = true;\n}\n\nfunction postRun() {\n  checkStackCookie();\n\n  if (Module['postRun']) {\n    if (typeof Module['postRun'] == 'function') Module['postRun'] = [Module['postRun']];\n    while (Module['postRun'].length) {\n      addOnPostRun(Module['postRun'].shift());\n    }\n  }\n\n  callRuntimeCallbacks(__ATPOSTRUN__);\n}\n\nfunction addOnPreRun(cb) {\n  __ATPRERUN__.unshift(cb);\n}\n\nfunction addOnInit(cb) {\n  __ATINIT__.unshift(cb);\n}\n\nfunction addOnPreMain(cb) {\n  __ATMAIN__.unshift(cb);\n}\n\nfunction addOnExit(cb) {\n}\n\nfunction addOnPostRun(cb) {\n  __ATPOSTRUN__.unshift(cb);\n}\n\n/** @param {number|boolean=} ignore */\nfunction unSign(value, bits, ignore) {\n  if (value >= 0) {\n    return value;\n  }\n  return bits <= 32 ? 2*Math.abs(1 << (bits-1)) + value // Need some trickery, since if bits == 32, we are right at the limit of the bits JS uses in bitshifts\n                    : Math.pow(2, bits)         + value;\n}\n/** @param {number|boolean=} ignore */\nfunction reSign(value, bits, ignore) {\n  if (value <= 0) {\n    return value;\n  }\n  var half = bits <= 32 ? Math.abs(1 << (bits-1)) // abs is needed if bits == 32\n                        : Math.pow(2, bits-1);\n  if (value >= half && (bits <= 32 || value > half)) { // for huge values, we can hit the precision limit and always get true here. so don't do that\n                                                       // but, in general there is no perfect solution here. With 64-bit ints, we get rounding and errors\n                                                       // TODO: In i64 mode 1, resign the two parts separately and safely\n    value = -2*half + value; // Cannot bitshift half, as it may be at the limit of the bits JS uses in bitshifts\n  }\n  return value;\n}\n\n\n\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/imul\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/fround\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/clz32\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/trunc\n\nassert(Math.imul, 'This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill');\nassert(Math.fround, 'This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill');\nassert(Math.clz32, 'This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill');\nassert(Math.trunc, 'This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill');\n\nvar Math_abs = Math.abs;\nvar Math_cos = Math.cos;\nvar Math_sin = Math.sin;\nvar Math_tan = Math.tan;\nvar Math_acos = Math.acos;\nvar Math_asin = Math.asin;\nvar Math_atan = Math.atan;\nvar Math_atan2 = Math.atan2;\nvar Math_exp = Math.exp;\nvar Math_log = Math.log;\nvar Math_sqrt = Math.sqrt;\nvar Math_ceil = Math.ceil;\nvar Math_floor = Math.floor;\nvar Math_pow = Math.pow;\nvar Math_imul = Math.imul;\nvar Math_fround = Math.fround;\nvar Math_round = Math.round;\nvar Math_min = Math.min;\nvar Math_max = Math.max;\nvar Math_clz32 = Math.clz32;\nvar Math_trunc = Math.trunc;\n\n\n\n// A counter of dependencies for calling run(). If we need to\n// do asynchronous work before running, increment this and\n// decrement it. Incrementing must happen in a place like\n// Module.preRun (used by emcc to add file preloading).\n// Note that you can add dependencies in preRun, even though\n// it happens right before run - run will be postponed until\n// the dependencies are met.\nvar runDependencies = 0;\nvar runDependencyWatcher = null;\nvar dependenciesFulfilled = null; // overridden to take different actions when all run dependencies are fulfilled\nvar runDependencyTracking = {};\n\nfunction getUniqueRunDependency(id) {\n  var orig = id;\n  while (1) {\n    if (!runDependencyTracking[id]) return id;\n    id = orig + Math.random();\n  }\n}\n\nfunction addRunDependency(id) {\n  runDependencies++;\n\n  if (Module['monitorRunDependencies']) {\n    Module['monitorRunDependencies'](runDependencies);\n  }\n\n  if (id) {\n    assert(!runDependencyTracking[id]);\n    runDependencyTracking[id] = 1;\n    if (runDependencyWatcher === null && typeof setInterval !== 'undefined') {\n      // Check for missing dependencies every few seconds\n      runDependencyWatcher = setInterval(function() {\n        if (ABORT) {\n          clearInterval(runDependencyWatcher);\n          runDependencyWatcher = null;\n          return;\n        }\n        var shown = false;\n        for (var dep in runDependencyTracking) {\n          if (!shown) {\n            shown = true;\n            err('still waiting on run dependencies:');\n          }\n          err('dependency: ' + dep);\n        }\n        if (shown) {\n          err('(end of list)');\n        }\n      }, 10000);\n    }\n  } else {\n    err('warning: run dependency added without ID');\n  }\n}\n\nfunction removeRunDependency(id) {\n  runDependencies--;\n\n  if (Module['monitorRunDependencies']) {\n    Module['monitorRunDependencies'](runDependencies);\n  }\n\n  if (id) {\n    assert(runDependencyTracking[id]);\n    delete runDependencyTracking[id];\n  } else {\n    err('warning: run dependency removed without ID');\n  }\n  if (runDependencies == 0) {\n    if (runDependencyWatcher !== null) {\n      clearInterval(runDependencyWatcher);\n      runDependencyWatcher = null;\n    }\n    if (dependenciesFulfilled) {\n      var callback = dependenciesFulfilled;\n      dependenciesFulfilled = null;\n      callback(); // can add another dependenciesFulfilled\n    }\n  }\n}\n\nModule[\"preloadedImages\"] = {}; // maps url to image data\nModule[\"preloadedAudios\"] = {}; // maps url to audio data\n\n/** @param {string|number=} what */\nfunction abort(what) {\n  if (Module['onAbort']) {\n    Module['onAbort'](what);\n  }\n\n  what += '';\n  out(what);\n  err(what);\n\n  ABORT = true;\n  EXITSTATUS = 1;\n\n  var output = 'abort(' + what + ') at ' + stackTrace();\n  what = output;\n\n  // Throw a wasm runtime error, because a JS error might be seen as a foreign\n  // exception, which means we'd run destructors on it. We need the error to\n  // simply make the program stop.\n  throw new WebAssembly.RuntimeError(what);\n}\n\n\nvar memoryInitializer = null;\n\n\n\n\n\n\n\n// show errors on likely calls to FS when it was not included\nvar FS = {\n  error: function() {\n    abort('Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with  -s FORCE_FILESYSTEM=1');\n  },\n  init: function() { FS.error() },\n  createDataFile: function() { FS.error() },\n  createPreloadedFile: function() { FS.error() },\n  createLazyFile: function() { FS.error() },\n  open: function() { FS.error() },\n  mkdev: function() { FS.error() },\n  registerDevice: function() { FS.error() },\n  analyzePath: function() { FS.error() },\n  loadFilesFromDB: function() { FS.error() },\n\n  ErrnoError: function ErrnoError() { FS.error() },\n};\nModule['FS_createDataFile'] = FS.createDataFile;\nModule['FS_createPreloadedFile'] = FS.createPreloadedFile;\n\n\n\n\n\nfunction hasPrefix(str, prefix) {\n  return String.prototype.startsWith ?\n      str.startsWith(prefix) :\n      str.indexOf(prefix) === 0;\n}\n\n// Prefix of data URIs emitted by SINGLE_FILE and related options.\nvar dataURIPrefix = 'data:application/octet-stream;base64,';\n\n// Indicates whether filename is a base64 data URI.\nfunction isDataURI(filename) {\n  return hasPrefix(filename, dataURIPrefix);\n}\n\nvar fileURIPrefix = \"file://\";\n\n// Indicates whether filename is delivered via file protocol (as opposed to http/https)\nfunction isFileURI(filename) {\n  return hasPrefix(filename, fileURIPrefix);\n}\n\n\n\nfunction createExportWrapper(name, fixedasm) {\n  return function() {\n    var displayName = name;\n    var asm = fixedasm;\n    if (!fixedasm) {\n      asm = Module['asm'];\n    }\n    assert(runtimeInitialized, 'native function `' + displayName + '` called before runtime initialization');\n    assert(!runtimeExited, 'native function `' + displayName + '` called after runtime exit (use NO_EXIT_RUNTIME to keep it alive after main() exits)');\n    if (!asm[name]) {\n      assert(asm[name], 'exported native function `' + displayName + '` not found');\n    }\n    return asm[name].apply(null, arguments);\n  };\n}\n\nvar wasmBinaryFile = 'bezier_fit.wasm';\nif (!isDataURI(wasmBinaryFile)) {\n  wasmBinaryFile = locateFile(wasmBinaryFile);\n}\n\nfunction getBinary() {\n  try {\n    if (wasmBinary) {\n      return new Uint8Array(wasmBinary);\n    }\n\n    if (readBinary) {\n      return readBinary(wasmBinaryFile);\n    } else {\n      throw \"both async and sync fetching of the wasm failed\";\n    }\n  }\n  catch (err) {\n    abort(err);\n  }\n}\n\nfunction getBinaryPromise() {\n  // If we don't have the binary yet, and have the Fetch api, use that;\n  // in some environments, like Electron's render process, Fetch api may be present, but have a different context than expected, let's only use it on the Web\n  if (!wasmBinary && (ENVIRONMENT_IS_WEB || ENVIRONMENT_IS_WORKER) && typeof fetch === 'function'\n      ) {\n    return fetch(wasmBinaryFile, { credentials: 'same-origin' }).then(function(response) {\n      if (!response['ok']) {\n        throw \"failed to load wasm binary file at '\" + wasmBinaryFile + \"'\";\n      }\n      return response['arrayBuffer']();\n    }).catch(function () {\n      return getBinary();\n    });\n  }\n  // Otherwise, getBinary should be able to get it synchronously\n  return new Promise(function(resolve, reject) {\n    resolve(getBinary());\n  });\n}\n\n\n\n// Create the wasm instance.\n// Receives the wasm imports, returns the exports.\nfunction createWasm() {\n  // prepare imports\n  var info = {\n    'env': asmLibraryArg,\n    'wasi_snapshot_preview1': asmLibraryArg\n  };\n  // Load the wasm module and create an instance of using native support in the JS engine.\n  // handle a generated wasm instance, receiving its exports and\n  // performing other necessary setup\n  /** @param {WebAssembly.Module=} module*/\n  function receiveInstance(instance, module) {\n    var exports = instance.exports;\n    Module['asm'] = exports;\n    removeRunDependency('wasm-instantiate');\n  }\n  // we can't run yet (except in a pthread, where we have a custom sync instantiator)\n  addRunDependency('wasm-instantiate');\n\n\n  // Async compilation can be confusing when an error on the page overwrites Module\n  // (for example, if the order of elements is wrong, and the one defining Module is\n  // later), so we save Module and check it later.\n  var trueModule = Module;\n  function receiveInstantiatedSource(output) {\n    // 'output' is a WebAssemblyInstantiatedSource object which has both the module and instance.\n    // receiveInstance() will swap in the exports (to Module.asm) so they can be called\n    assert(Module === trueModule, 'the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?');\n    trueModule = null;\n    // TODO: Due to Closure regression https://github.com/google/closure-compiler/issues/3193, the above line no longer optimizes out down to the following line.\n    // When the regression is fixed, can restore the above USE_PTHREADS-enabled path.\n    receiveInstance(output['instance']);\n  }\n\n\n  function instantiateArrayBuffer(receiver) {\n    return getBinaryPromise().then(function(binary) {\n      return WebAssembly.instantiate(binary, info);\n    }).then(receiver, function(reason) {\n      err('failed to asynchronously prepare wasm: ' + reason);\n      abort(reason);\n    });\n  }\n\n  // Prefer streaming instantiation if available.\n  function instantiateAsync() {\n    if (!wasmBinary &&\n        typeof WebAssembly.instantiateStreaming === 'function' &&\n        !isDataURI(wasmBinaryFile) &&\n        typeof fetch === 'function') {\n      fetch(wasmBinaryFile, { credentials: 'same-origin' }).then(function (response) {\n        var result = WebAssembly.instantiateStreaming(response, info);\n        return result.then(receiveInstantiatedSource, function(reason) {\n            // We expect the most common failure cause to be a bad MIME type for the binary,\n            // in which case falling back to ArrayBuffer instantiation should work.\n            err('wasm streaming compile failed: ' + reason);\n            err('falling back to ArrayBuffer instantiation');\n            return instantiateArrayBuffer(receiveInstantiatedSource);\n          });\n      });\n    } else {\n      return instantiateArrayBuffer(receiveInstantiatedSource);\n    }\n  }\n  // User shell pages can write their own Module.instantiateWasm = function(imports, successCallback) callback\n  // to manually instantiate the Wasm module themselves. This allows pages to run the instantiation parallel\n  // to any other async startup actions they are performing.\n  if (Module['instantiateWasm']) {\n    try {\n      var exports = Module['instantiateWasm'](info, receiveInstance);\n      return exports;\n    } catch(e) {\n      err('Module.instantiateWasm callback failed with error: ' + e);\n      return false;\n    }\n  }\n\n  instantiateAsync();\n  return {}; // no exports yet; we'll fill them in later\n}\n\n\n// Globals used by JS i64 conversions\nvar tempDouble;\nvar tempI64;\n\n// === Body ===\n\nvar ASM_CONSTS = {\n  \n};\n\n\n\n\n// STATICTOP = STATIC_BASE + 20560;\n/* global initializers */  __ATINIT__.push({ func: function() { ___wasm_call_ctors() } });\n\n\n\n\n/* no memory initializer */\n// {{PRE_LIBRARY}}\n\n\n  function abortStackOverflow(allocSize) {\n      abort('Stack overflow! Attempted to allocate ' + allocSize + ' bytes on the stack, but stack has only ' + (STACK_MAX - stackSave() + allocSize) + ' bytes available!');\n    }\n\n  function demangle(func) {\n      warnOnce('warning: build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling');\n      return func;\n    }\n\n  function demangleAll(text) {\n      var regex =\n        /\\b_Z[\\w\\d_]+/g;\n      return text.replace(regex,\n        function(x) {\n          var y = demangle(x);\n          return x === y ? x : (y + ' [' + x + ']');\n        });\n    }\n\n  function jsStackTrace() {\n      var err = new Error();\n      if (!err.stack) {\n        // IE10+ special cases: It does have callstack info, but it is only populated if an Error object is thrown,\n        // so try that as a special-case.\n        try {\n          throw new Error();\n        } catch(e) {\n          err = e;\n        }\n        if (!err.stack) {\n          return '(no stack trace available)';\n        }\n      }\n      return err.stack.toString();\n    }\n\n  function stackTrace() {\n      var js = jsStackTrace();\n      if (Module['extraStackTrace']) js += '\\n' + Module['extraStackTrace']();\n      return demangleAll(js);\n    }\n\n  function ___cxa_allocate_exception(size) {\n      return _malloc(size);\n    }\n\n  \n  function _atexit(func, arg) {\n      warnOnce('atexit() called, but EXIT_RUNTIME is not set, so atexits() will not be called. set EXIT_RUNTIME to 1 (see the FAQ)');\n      __ATEXIT__.unshift({ func: func, arg: arg });\n    }function ___cxa_atexit(a0,a1\n  ) {\n  return _atexit(a0,a1);\n  }\n\n  \n  var ___exception_infos={};\n  \n  var ___exception_last=0;\n  \n  function __ZSt18uncaught_exceptionv() { // std::uncaught_exception()\n      return __ZSt18uncaught_exceptionv.uncaught_exceptions > 0;\n    }function ___cxa_throw(ptr, type, destructor) {\n      ___exception_infos[ptr] = {\n        ptr: ptr,\n        adjusted: [ptr],\n        type: type,\n        destructor: destructor,\n        refcount: 0,\n        caught: false,\n        rethrown: false\n      };\n      ___exception_last = ptr;\n      if (!(\"uncaught_exception\" in __ZSt18uncaught_exceptionv)) {\n        __ZSt18uncaught_exceptionv.uncaught_exceptions = 1;\n      } else {\n        __ZSt18uncaught_exceptionv.uncaught_exceptions++;\n      }\n      throw ptr + \" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch.\";\n    }\n\n  function ___handle_stack_overflow() {\n      abort('stack overflow')\n    }\n\n  \n  function setErrNo(value) {\n      HEAP32[((___errno_location())>>2)]=value;\n      return value;\n    }function ___map_file(pathname, size) {\n      setErrNo(63);\n      return -1;\n    }\n\n  \n  \n  \n  var PATH={splitPath:function(filename) {\n        var splitPathRe = /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\n        return splitPathRe.exec(filename).slice(1);\n      },normalizeArray:function(parts, allowAboveRoot) {\n        // if the path tries to go above the root, `up` ends up > 0\n        var up = 0;\n        for (var i = parts.length - 1; i >= 0; i--) {\n          var last = parts[i];\n          if (last === '.') {\n            parts.splice(i, 1);\n          } else if (last === '..') {\n            parts.splice(i, 1);\n            up++;\n          } else if (up) {\n            parts.splice(i, 1);\n            up--;\n          }\n        }\n        // if the path is allowed to go above the root, restore leading ..s\n        if (allowAboveRoot) {\n          for (; up; up--) {\n            parts.unshift('..');\n          }\n        }\n        return parts;\n      },normalize:function(path) {\n        var isAbsolute = path.charAt(0) === '/',\n            trailingSlash = path.substr(-1) === '/';\n        // Normalize the path\n        path = PATH.normalizeArray(path.split('/').filter(function(p) {\n          return !!p;\n        }), !isAbsolute).join('/');\n        if (!path && !isAbsolute) {\n          path = '.';\n        }\n        if (path && trailingSlash) {\n          path += '/';\n        }\n        return (isAbsolute ? '/' : '') + path;\n      },dirname:function(path) {\n        var result = PATH.splitPath(path),\n            root = result[0],\n            dir = result[1];\n        if (!root && !dir) {\n          // No dirname whatsoever\n          return '.';\n        }\n        if (dir) {\n          // It has a dirname, strip trailing slash\n          dir = dir.substr(0, dir.length - 1);\n        }\n        return root + dir;\n      },basename:function(path) {\n        // EMSCRIPTEN return '/'' for '/', not an empty string\n        if (path === '/') return '/';\n        var lastSlash = path.lastIndexOf('/');\n        if (lastSlash === -1) return path;\n        return path.substr(lastSlash+1);\n      },extname:function(path) {\n        return PATH.splitPath(path)[3];\n      },join:function() {\n        var paths = Array.prototype.slice.call(arguments, 0);\n        return PATH.normalize(paths.join('/'));\n      },join2:function(l, r) {\n        return PATH.normalize(l + '/' + r);\n      }};var SYSCALLS={mappings:{},buffers:[null,[],[]],printChar:function(stream, curr) {\n        var buffer = SYSCALLS.buffers[stream];\n        assert(buffer);\n        if (curr === 0 || curr === 10) {\n          (stream === 1 ? out : err)(UTF8ArrayToString(buffer, 0));\n          buffer.length = 0;\n        } else {\n          buffer.push(curr);\n        }\n      },varargs:undefined,get:function() {\n        assert(SYSCALLS.varargs != undefined);\n        SYSCALLS.varargs += 4;\n        var ret = HEAP32[(((SYSCALLS.varargs)-(4))>>2)];\n        return ret;\n      },getStr:function(ptr) {\n        var ret = UTF8ToString(ptr);\n        return ret;\n      },get64:function(low, high) {\n        if (low >= 0) assert(high === 0);\n        else assert(high === -1);\n        return low;\n      }};function syscallMunmap(addr, len) {\n      if ((addr | 0) === -1 || len === 0) {\n        return -28;\n      }\n      // TODO: support unmmap'ing parts of allocations\n      var info = SYSCALLS.mappings[addr];\n      if (!info) return 0;\n      if (len === info.len) {\n        // Without FS support, only anonymous mappings are supported.\n        assert(SYSCALLS.mappings[addr].flags & 32);\n        SYSCALLS.mappings[addr] = null;\n        if (info.allocated) {\n          _free(info.malloc);\n        }\n      }\n      return 0;\n    }function ___sys_munmap(addr, len) {\n      return syscallMunmap(addr, len);\n    }\n\n  function _abort() {\n      abort();\n    }\n\n  function _emscripten_get_sbrk_ptr() {\n      return 21424;\n    }\n\n  function _emscripten_memcpy_big(dest, src, num) {\n      HEAPU8.copyWithin(dest, src, src + num);\n    }\n\n  \n  function _emscripten_get_heap_size() {\n      return HEAPU8.length;\n    }\n  \n  function abortOnCannotGrowMemory(requestedSize) {\n      abort('Cannot enlarge memory arrays to size ' + requestedSize + ' bytes (OOM). Either (1) compile with  -s INITIAL_MEMORY=X  with X higher than the current value ' + HEAP8.length + ', (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ');\n    }function _emscripten_resize_heap(requestedSize) {\n      requestedSize = requestedSize >>> 0;\n      abortOnCannotGrowMemory(requestedSize);\n    }\n\n  \n  \n  var ENV={};\n  \n  function __getExecutableName() {\n      return thisProgram || './this.program';\n    }function getEnvStrings() {\n      if (!getEnvStrings.strings) {\n        // Default values.\n        var env = {\n          'USER': 'web_user',\n          'LOGNAME': 'web_user',\n          'PATH': '/',\n          'PWD': '/',\n          'HOME': '/home/web_user',\n          // Browser language detection #8751\n          'LANG': ((typeof navigator === 'object' && navigator.languages && navigator.languages[0]) || 'C').replace('-', '_') + '.UTF-8',\n          '_': __getExecutableName()\n        };\n        // Apply the user-provided values, if any.\n        for (var x in ENV) {\n          env[x] = ENV[x];\n        }\n        var strings = [];\n        for (var x in env) {\n          strings.push(x + '=' + env[x]);\n        }\n        getEnvStrings.strings = strings;\n      }\n      return getEnvStrings.strings;\n    }function _environ_get(__environ, environ_buf) {\n      var bufSize = 0;\n      getEnvStrings().forEach(function(string, i) {\n        var ptr = environ_buf + bufSize;\n        HEAP32[(((__environ)+(i * 4))>>2)]=ptr;\n        writeAsciiToMemory(string, ptr);\n        bufSize += string.length + 1;\n      });\n      return 0;\n    }\n\n  function _environ_sizes_get(penviron_count, penviron_buf_size) {\n      var strings = getEnvStrings();\n      HEAP32[((penviron_count)>>2)]=strings.length;\n      var bufSize = 0;\n      strings.forEach(function(string) {\n        bufSize += string.length + 1;\n      });\n      HEAP32[((penviron_buf_size)>>2)]=bufSize;\n      return 0;\n    }\n\n  function _fd_close(fd) {\n      abort('it should not be possible to operate on streams when !SYSCALLS_REQUIRE_FILESYSTEM');\n      return 0;\n    }\n\n  function _fd_read(fd, iov, iovcnt, pnum) {\n      var stream = SYSCALLS.getStreamFromFD(fd);\n      var num = SYSCALLS.doReadv(stream, iov, iovcnt);\n      HEAP32[((pnum)>>2)]=num\n      return 0;\n    }\n\n  function _fd_seek(fd, offset_low, offset_high, whence, newOffset) {\n  abort('it should not be possible to operate on streams when !SYSCALLS_REQUIRE_FILESYSTEM')}\n\n  \n  function flush_NO_FILESYSTEM() {\n      // flush anything remaining in the buffers during shutdown\n      if (typeof _fflush !== 'undefined') _fflush(0);\n      var buffers = SYSCALLS.buffers;\n      if (buffers[1].length) SYSCALLS.printChar(1, 10);\n      if (buffers[2].length) SYSCALLS.printChar(2, 10);\n    }function _fd_write(fd, iov, iovcnt, pnum) {\n      // hack to support printf in SYSCALLS_REQUIRE_FILESYSTEM=0\n      var num = 0;\n      for (var i = 0; i < iovcnt; i++) {\n        var ptr = HEAP32[(((iov)+(i*8))>>2)];\n        var len = HEAP32[(((iov)+(i*8 + 4))>>2)];\n        for (var j = 0; j < len; j++) {\n          SYSCALLS.printChar(fd, HEAPU8[ptr+j]);\n        }\n        num += len;\n      }\n      HEAP32[((pnum)>>2)]=num\n      return 0;\n    }\n\n  function _setTempRet0($i) {\n      setTempRet0(($i) | 0);\n    }\n\n  \n  \n  function __isLeapYear(year) {\n        return year%4 === 0 && (year%100 !== 0 || year%400 === 0);\n    }\n  \n  function __arraySum(array, index) {\n      var sum = 0;\n      for (var i = 0; i <= index; sum += array[i++]) {\n        // no-op\n      }\n      return sum;\n    }\n  \n  \n  var __MONTH_DAYS_LEAP=[31,29,31,30,31,30,31,31,30,31,30,31];\n  \n  var __MONTH_DAYS_REGULAR=[31,28,31,30,31,30,31,31,30,31,30,31];function __addDays(date, days) {\n      var newDate = new Date(date.getTime());\n      while(days > 0) {\n        var leap = __isLeapYear(newDate.getFullYear());\n        var currentMonth = newDate.getMonth();\n        var daysInCurrentMonth = (leap ? __MONTH_DAYS_LEAP : __MONTH_DAYS_REGULAR)[currentMonth];\n  \n        if (days > daysInCurrentMonth-newDate.getDate()) {\n          // we spill over to next month\n          days -= (daysInCurrentMonth-newDate.getDate()+1);\n          newDate.setDate(1);\n          if (currentMonth < 11) {\n            newDate.setMonth(currentMonth+1)\n          } else {\n            newDate.setMonth(0);\n            newDate.setFullYear(newDate.getFullYear()+1);\n          }\n        } else {\n          // we stay in current month\n          newDate.setDate(newDate.getDate()+days);\n          return newDate;\n        }\n      }\n  \n      return newDate;\n    }function _strftime(s, maxsize, format, tm) {\n      // size_t strftime(char *restrict s, size_t maxsize, const char *restrict format, const struct tm *restrict timeptr);\n      // http://pubs.opengroup.org/onlinepubs/009695399/functions/strftime.html\n  \n      var tm_zone = HEAP32[(((tm)+(40))>>2)];\n  \n      var date = {\n        tm_sec: HEAP32[((tm)>>2)],\n        tm_min: HEAP32[(((tm)+(4))>>2)],\n        tm_hour: HEAP32[(((tm)+(8))>>2)],\n        tm_mday: HEAP32[(((tm)+(12))>>2)],\n        tm_mon: HEAP32[(((tm)+(16))>>2)],\n        tm_year: HEAP32[(((tm)+(20))>>2)],\n        tm_wday: HEAP32[(((tm)+(24))>>2)],\n        tm_yday: HEAP32[(((tm)+(28))>>2)],\n        tm_isdst: HEAP32[(((tm)+(32))>>2)],\n        tm_gmtoff: HEAP32[(((tm)+(36))>>2)],\n        tm_zone: tm_zone ? UTF8ToString(tm_zone) : ''\n      };\n  \n      var pattern = UTF8ToString(format);\n  \n      // expand format\n      var EXPANSION_RULES_1 = {\n        '%c': '%a %b %d %H:%M:%S %Y',     // Replaced by the locale's appropriate date and time representation - e.g., Mon Aug  3 14:02:01 2013\n        '%D': '%m/%d/%y',                 // Equivalent to %m / %d / %y\n        '%F': '%Y-%m-%d',                 // Equivalent to %Y - %m - %d\n        '%h': '%b',                       // Equivalent to %b\n        '%r': '%I:%M:%S %p',              // Replaced by the time in a.m. and p.m. notation\n        '%R': '%H:%M',                    // Replaced by the time in 24-hour notation\n        '%T': '%H:%M:%S',                 // Replaced by the time\n        '%x': '%m/%d/%y',                 // Replaced by the locale's appropriate date representation\n        '%X': '%H:%M:%S',                 // Replaced by the locale's appropriate time representation\n        // Modified Conversion Specifiers\n        '%Ec': '%c',                      // Replaced by the locale's alternative appropriate date and time representation.\n        '%EC': '%C',                      // Replaced by the name of the base year (period) in the locale's alternative representation.\n        '%Ex': '%m/%d/%y',                // Replaced by the locale's alternative date representation.\n        '%EX': '%H:%M:%S',                // Replaced by the locale's alternative time representation.\n        '%Ey': '%y',                      // Replaced by the offset from %EC (year only) in the locale's alternative representation.\n        '%EY': '%Y',                      // Replaced by the full alternative year representation.\n        '%Od': '%d',                      // Replaced by the day of the month, using the locale's alternative numeric symbols, filled as needed with leading zeros if there is any alternative symbol for zero; otherwise, with leading <space> characters.\n        '%Oe': '%e',                      // Replaced by the day of the month, using the locale's alternative numeric symbols, filled as needed with leading <space> characters.\n        '%OH': '%H',                      // Replaced by the hour (24-hour clock) using the locale's alternative numeric symbols.\n        '%OI': '%I',                      // Replaced by the hour (12-hour clock) using the locale's alternative numeric symbols.\n        '%Om': '%m',                      // Replaced by the month using the locale's alternative numeric symbols.\n        '%OM': '%M',                      // Replaced by the minutes using the locale's alternative numeric symbols.\n        '%OS': '%S',                      // Replaced by the seconds using the locale's alternative numeric symbols.\n        '%Ou': '%u',                      // Replaced by the weekday as a number in the locale's alternative representation (Monday=1).\n        '%OU': '%U',                      // Replaced by the week number of the year (Sunday as the first day of the week, rules corresponding to %U ) using the locale's alternative numeric symbols.\n        '%OV': '%V',                      // Replaced by the week number of the year (Monday as the first day of the week, rules corresponding to %V ) using the locale's alternative numeric symbols.\n        '%Ow': '%w',                      // Replaced by the number of the weekday (Sunday=0) using the locale's alternative numeric symbols.\n        '%OW': '%W',                      // Replaced by the week number of the year (Monday as the first day of the week) using the locale's alternative numeric symbols.\n        '%Oy': '%y',                      // Replaced by the year (offset from %C ) using the locale's alternative numeric symbols.\n      };\n      for (var rule in EXPANSION_RULES_1) {\n        pattern = pattern.replace(new RegExp(rule, 'g'), EXPANSION_RULES_1[rule]);\n      }\n  \n      var WEEKDAYS = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n      var MONTHS = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n  \n      function leadingSomething(value, digits, character) {\n        var str = typeof value === 'number' ? value.toString() : (value || '');\n        while (str.length < digits) {\n          str = character[0]+str;\n        }\n        return str;\n      }\n  \n      function leadingNulls(value, digits) {\n        return leadingSomething(value, digits, '0');\n      }\n  \n      function compareByDay(date1, date2) {\n        function sgn(value) {\n          return value < 0 ? -1 : (value > 0 ? 1 : 0);\n        }\n  \n        var compare;\n        if ((compare = sgn(date1.getFullYear()-date2.getFullYear())) === 0) {\n          if ((compare = sgn(date1.getMonth()-date2.getMonth())) === 0) {\n            compare = sgn(date1.getDate()-date2.getDate());\n          }\n        }\n        return compare;\n      }\n  \n      function getFirstWeekStartDate(janFourth) {\n          switch (janFourth.getDay()) {\n            case 0: // Sunday\n              return new Date(janFourth.getFullYear()-1, 11, 29);\n            case 1: // Monday\n              return janFourth;\n            case 2: // Tuesday\n              return new Date(janFourth.getFullYear(), 0, 3);\n            case 3: // Wednesday\n              return new Date(janFourth.getFullYear(), 0, 2);\n            case 4: // Thursday\n              return new Date(janFourth.getFullYear(), 0, 1);\n            case 5: // Friday\n              return new Date(janFourth.getFullYear()-1, 11, 31);\n            case 6: // Saturday\n              return new Date(janFourth.getFullYear()-1, 11, 30);\n          }\n      }\n  \n      function getWeekBasedYear(date) {\n          var thisDate = __addDays(new Date(date.tm_year+1900, 0, 1), date.tm_yday);\n  \n          var janFourthThisYear = new Date(thisDate.getFullYear(), 0, 4);\n          var janFourthNextYear = new Date(thisDate.getFullYear()+1, 0, 4);\n  \n          var firstWeekStartThisYear = getFirstWeekStartDate(janFourthThisYear);\n          var firstWeekStartNextYear = getFirstWeekStartDate(janFourthNextYear);\n  \n          if (compareByDay(firstWeekStartThisYear, thisDate) <= 0) {\n            // this date is after the start of the first week of this year\n            if (compareByDay(firstWeekStartNextYear, thisDate) <= 0) {\n              return thisDate.getFullYear()+1;\n            } else {\n              return thisDate.getFullYear();\n            }\n          } else {\n            return thisDate.getFullYear()-1;\n          }\n      }\n  \n      var EXPANSION_RULES_2 = {\n        '%a': function(date) {\n          return WEEKDAYS[date.tm_wday].substring(0,3);\n        },\n        '%A': function(date) {\n          return WEEKDAYS[date.tm_wday];\n        },\n        '%b': function(date) {\n          return MONTHS[date.tm_mon].substring(0,3);\n        },\n        '%B': function(date) {\n          return MONTHS[date.tm_mon];\n        },\n        '%C': function(date) {\n          var year = date.tm_year+1900;\n          return leadingNulls((year/100)|0,2);\n        },\n        '%d': function(date) {\n          return leadingNulls(date.tm_mday, 2);\n        },\n        '%e': function(date) {\n          return leadingSomething(date.tm_mday, 2, ' ');\n        },\n        '%g': function(date) {\n          // %g, %G, and %V give values according to the ISO 8601:2000 standard week-based year.\n          // In this system, weeks begin on a Monday and week 1 of the year is the week that includes\n          // January 4th, which is also the week that includes the first Thursday of the year, and\n          // is also the first week that contains at least four days in the year.\n          // If the first Monday of January is the 2nd, 3rd, or 4th, the preceding days are part of\n          // the last week of the preceding year; thus, for Saturday 2nd January 1999,\n          // %G is replaced by 1998 and %V is replaced by 53. If December 29th, 30th,\n          // or 31st is a Monday, it and any following days are part of week 1 of the following year.\n          // Thus, for Tuesday 30th December 1997, %G is replaced by 1998 and %V is replaced by 01.\n  \n          return getWeekBasedYear(date).toString().substring(2);\n        },\n        '%G': function(date) {\n          return getWeekBasedYear(date);\n        },\n        '%H': function(date) {\n          return leadingNulls(date.tm_hour, 2);\n        },\n        '%I': function(date) {\n          var twelveHour = date.tm_hour;\n          if (twelveHour == 0) twelveHour = 12;\n          else if (twelveHour > 12) twelveHour -= 12;\n          return leadingNulls(twelveHour, 2);\n        },\n        '%j': function(date) {\n          // Day of the year (001-366)\n          return leadingNulls(date.tm_mday+__arraySum(__isLeapYear(date.tm_year+1900) ? __MONTH_DAYS_LEAP : __MONTH_DAYS_REGULAR, date.tm_mon-1), 3);\n        },\n        '%m': function(date) {\n          return leadingNulls(date.tm_mon+1, 2);\n        },\n        '%M': function(date) {\n          return leadingNulls(date.tm_min, 2);\n        },\n        '%n': function() {\n          return '\\n';\n        },\n        '%p': function(date) {\n          if (date.tm_hour >= 0 && date.tm_hour < 12) {\n            return 'AM';\n          } else {\n            return 'PM';\n          }\n        },\n        '%S': function(date) {\n          return leadingNulls(date.tm_sec, 2);\n        },\n        '%t': function() {\n          return '\\t';\n        },\n        '%u': function(date) {\n          return date.tm_wday || 7;\n        },\n        '%U': function(date) {\n          // Replaced by the week number of the year as a decimal number [00,53].\n          // The first Sunday of January is the first day of week 1;\n          // days in the new year before this are in week 0. [ tm_year, tm_wday, tm_yday]\n          var janFirst = new Date(date.tm_year+1900, 0, 1);\n          var firstSunday = janFirst.getDay() === 0 ? janFirst : __addDays(janFirst, 7-janFirst.getDay());\n          var endDate = new Date(date.tm_year+1900, date.tm_mon, date.tm_mday);\n  \n          // is target date after the first Sunday?\n          if (compareByDay(firstSunday, endDate) < 0) {\n            // calculate difference in days between first Sunday and endDate\n            var februaryFirstUntilEndMonth = __arraySum(__isLeapYear(endDate.getFullYear()) ? __MONTH_DAYS_LEAP : __MONTH_DAYS_REGULAR, endDate.getMonth()-1)-31;\n            var firstSundayUntilEndJanuary = 31-firstSunday.getDate();\n            var days = firstSundayUntilEndJanuary+februaryFirstUntilEndMonth+endDate.getDate();\n            return leadingNulls(Math.ceil(days/7), 2);\n          }\n  \n          return compareByDay(firstSunday, janFirst) === 0 ? '01': '00';\n        },\n        '%V': function(date) {\n          // Replaced by the week number of the year (Monday as the first day of the week)\n          // as a decimal number [01,53]. If the week containing 1 January has four\n          // or more days in the new year, then it is considered week 1.\n          // Otherwise, it is the last week of the previous year, and the next week is week 1.\n          // Both January 4th and the first Thursday of January are always in week 1. [ tm_year, tm_wday, tm_yday]\n          var janFourthThisYear = new Date(date.tm_year+1900, 0, 4);\n          var janFourthNextYear = new Date(date.tm_year+1901, 0, 4);\n  \n          var firstWeekStartThisYear = getFirstWeekStartDate(janFourthThisYear);\n          var firstWeekStartNextYear = getFirstWeekStartDate(janFourthNextYear);\n  \n          var endDate = __addDays(new Date(date.tm_year+1900, 0, 1), date.tm_yday);\n  \n          if (compareByDay(endDate, firstWeekStartThisYear) < 0) {\n            // if given date is before this years first week, then it belongs to the 53rd week of last year\n            return '53';\n          }\n  \n          if (compareByDay(firstWeekStartNextYear, endDate) <= 0) {\n            // if given date is after next years first week, then it belongs to the 01th week of next year\n            return '01';\n          }\n  \n          // given date is in between CW 01..53 of this calendar year\n          var daysDifference;\n          if (firstWeekStartThisYear.getFullYear() < date.tm_year+1900) {\n            // first CW of this year starts last year\n            daysDifference = date.tm_yday+32-firstWeekStartThisYear.getDate()\n          } else {\n            // first CW of this year starts this year\n            daysDifference = date.tm_yday+1-firstWeekStartThisYear.getDate();\n          }\n          return leadingNulls(Math.ceil(daysDifference/7), 2);\n        },\n        '%w': function(date) {\n          return date.tm_wday;\n        },\n        '%W': function(date) {\n          // Replaced by the week number of the year as a decimal number [00,53].\n          // The first Monday of January is the first day of week 1;\n          // days in the new year before this are in week 0. [ tm_year, tm_wday, tm_yday]\n          var janFirst = new Date(date.tm_year, 0, 1);\n          var firstMonday = janFirst.getDay() === 1 ? janFirst : __addDays(janFirst, janFirst.getDay() === 0 ? 1 : 7-janFirst.getDay()+1);\n          var endDate = new Date(date.tm_year+1900, date.tm_mon, date.tm_mday);\n  \n          // is target date after the first Monday?\n          if (compareByDay(firstMonday, endDate) < 0) {\n            var februaryFirstUntilEndMonth = __arraySum(__isLeapYear(endDate.getFullYear()) ? __MONTH_DAYS_LEAP : __MONTH_DAYS_REGULAR, endDate.getMonth()-1)-31;\n            var firstMondayUntilEndJanuary = 31-firstMonday.getDate();\n            var days = firstMondayUntilEndJanuary+februaryFirstUntilEndMonth+endDate.getDate();\n            return leadingNulls(Math.ceil(days/7), 2);\n          }\n          return compareByDay(firstMonday, janFirst) === 0 ? '01': '00';\n        },\n        '%y': function(date) {\n          // Replaced by the last two digits of the year as a decimal number [00,99]. [ tm_year]\n          return (date.tm_year+1900).toString().substring(2);\n        },\n        '%Y': function(date) {\n          // Replaced by the year as a decimal number (for example, 1997). [ tm_year]\n          return date.tm_year+1900;\n        },\n        '%z': function(date) {\n          // Replaced by the offset from UTC in the ISO 8601:2000 standard format ( +hhmm or -hhmm ).\n          // For example, \"-0430\" means 4 hours 30 minutes behind UTC (west of Greenwich).\n          var off = date.tm_gmtoff;\n          var ahead = off >= 0;\n          off = Math.abs(off) / 60;\n          // convert from minutes into hhmm format (which means 60 minutes = 100 units)\n          off = (off / 60)*100 + (off % 60);\n          return (ahead ? '+' : '-') + String(\"0000\" + off).slice(-4);\n        },\n        '%Z': function(date) {\n          return date.tm_zone;\n        },\n        '%%': function() {\n          return '%';\n        }\n      };\n      for (var rule in EXPANSION_RULES_2) {\n        if (pattern.indexOf(rule) >= 0) {\n          pattern = pattern.replace(new RegExp(rule, 'g'), EXPANSION_RULES_2[rule](date));\n        }\n      }\n  \n      var bytes = intArrayFromString(pattern, false);\n      if (bytes.length > maxsize) {\n        return 0;\n      }\n  \n      writeArrayToMemory(bytes, s);\n      return bytes.length-1;\n    }function _strftime_l(s, maxsize, format, tm) {\n      return _strftime(s, maxsize, format, tm); // no locale support yet\n    }\nvar ASSERTIONS = true;\n\n\n\n/** @type {function(string, boolean=, number=)} */\nfunction intArrayFromString(stringy, dontAddNull, length) {\n  var len = length > 0 ? length : lengthBytesUTF8(stringy)+1;\n  var u8array = new Array(len);\n  var numBytesWritten = stringToUTF8Array(stringy, u8array, 0, u8array.length);\n  if (dontAddNull) u8array.length = numBytesWritten;\n  return u8array;\n}\n\nfunction intArrayToString(array) {\n  var ret = [];\n  for (var i = 0; i < array.length; i++) {\n    var chr = array[i];\n    if (chr > 0xFF) {\n      if (ASSERTIONS) {\n        assert(false, 'Character code ' + chr + ' (' + String.fromCharCode(chr) + ')  at offset ' + i + ' not in 0x00-0xFF.');\n      }\n      chr &= 0xFF;\n    }\n    ret.push(String.fromCharCode(chr));\n  }\n  return ret.join('');\n}\n\n\nvar asmGlobalArg = {};\nvar asmLibraryArg = { \"__cxa_allocate_exception\": ___cxa_allocate_exception, \"__cxa_atexit\": ___cxa_atexit, \"__cxa_throw\": ___cxa_throw, \"__handle_stack_overflow\": ___handle_stack_overflow, \"__map_file\": ___map_file, \"__sys_munmap\": ___sys_munmap, \"abort\": _abort, \"emscripten_get_sbrk_ptr\": _emscripten_get_sbrk_ptr, \"emscripten_memcpy_big\": _emscripten_memcpy_big, \"emscripten_resize_heap\": _emscripten_resize_heap, \"environ_get\": _environ_get, \"environ_sizes_get\": _environ_sizes_get, \"fd_close\": _fd_close, \"fd_read\": _fd_read, \"fd_seek\": _fd_seek, \"fd_write\": _fd_write, \"memory\": wasmMemory, \"setTempRet0\": _setTempRet0, \"strftime_l\": _strftime_l, \"table\": wasmTable };\nvar asm = createWasm();\n/** @type {function(...*):?} */\nvar ___wasm_call_ctors = Module[\"___wasm_call_ctors\"] = createExportWrapper(\"__wasm_call_ctors\");\n\n/** @type {function(...*):?} */\nvar _malloc = Module[\"_malloc\"] = createExportWrapper(\"malloc\");\n\n/** @type {function(...*):?} */\nvar _free = Module[\"_free\"] = createExportWrapper(\"free\");\n\n/** @type {function(...*):?} */\nvar _c_GroupStrokes = Module[\"_c_GroupStrokes\"] = createExportWrapper(\"c_GroupStrokes\");\n\n/** @type {function(...*):?} */\nvar _c_ML_EncodeCurves = Module[\"_c_ML_EncodeCurves\"] = createExportWrapper(\"c_ML_EncodeCurves\");\n\n/** @type {function(...*):?} */\nvar _c_FitCurve = Module[\"_c_FitCurve\"] = createExportWrapper(\"c_FitCurve\");\n\n/** @type {function(...*):?} */\nvar ___errno_location = Module[\"___errno_location\"] = createExportWrapper(\"__errno_location\");\n\n/** @type {function(...*):?} */\nvar _setThrew = Module[\"_setThrew\"] = createExportWrapper(\"setThrew\");\n\n/** @type {function(...*):?} */\nvar stackSave = Module[\"stackSave\"] = createExportWrapper(\"stackSave\");\n\n/** @type {function(...*):?} */\nvar stackRestore = Module[\"stackRestore\"] = createExportWrapper(\"stackRestore\");\n\n/** @type {function(...*):?} */\nvar stackAlloc = Module[\"stackAlloc\"] = createExportWrapper(\"stackAlloc\");\n\n/** @type {function(...*):?} */\nvar ___set_stack_limit = Module[\"___set_stack_limit\"] = createExportWrapper(\"__set_stack_limit\");\n\n/** @type {function(...*):?} */\nvar __growWasmMemory = Module[\"__growWasmMemory\"] = createExportWrapper(\"__growWasmMemory\");\n\n/** @type {function(...*):?} */\nvar dynCall_iii = Module[\"dynCall_iii\"] = createExportWrapper(\"dynCall_iii\");\n\n/** @type {function(...*):?} */\nvar dynCall_ii = Module[\"dynCall_ii\"] = createExportWrapper(\"dynCall_ii\");\n\n/** @type {function(...*):?} */\nvar dynCall_vi = Module[\"dynCall_vi\"] = createExportWrapper(\"dynCall_vi\");\n\n/** @type {function(...*):?} */\nvar dynCall_vii = Module[\"dynCall_vii\"] = createExportWrapper(\"dynCall_vii\");\n\n/** @type {function(...*):?} */\nvar dynCall_iiii = Module[\"dynCall_iiii\"] = createExportWrapper(\"dynCall_iiii\");\n\n/** @type {function(...*):?} */\nvar dynCall_viijii = Module[\"dynCall_viijii\"] = createExportWrapper(\"dynCall_viijii\");\n\n/** @type {function(...*):?} */\nvar dynCall_viiii = Module[\"dynCall_viiii\"] = createExportWrapper(\"dynCall_viiii\");\n\n/** @type {function(...*):?} */\nvar dynCall_jiji = Module[\"dynCall_jiji\"] = createExportWrapper(\"dynCall_jiji\");\n\n/** @type {function(...*):?} */\nvar dynCall_iidiiii = Module[\"dynCall_iidiiii\"] = createExportWrapper(\"dynCall_iidiiii\");\n\n/** @type {function(...*):?} */\nvar dynCall_iiiii = Module[\"dynCall_iiiii\"] = createExportWrapper(\"dynCall_iiiii\");\n\n/** @type {function(...*):?} */\nvar dynCall_iiiiii = Module[\"dynCall_iiiiii\"] = createExportWrapper(\"dynCall_iiiiii\");\n\n/** @type {function(...*):?} */\nvar dynCall_iiiiiiiii = Module[\"dynCall_iiiiiiiii\"] = createExportWrapper(\"dynCall_iiiiiiiii\");\n\n/** @type {function(...*):?} */\nvar dynCall_iiiiiii = Module[\"dynCall_iiiiiii\"] = createExportWrapper(\"dynCall_iiiiiii\");\n\n/** @type {function(...*):?} */\nvar dynCall_iiiiij = Module[\"dynCall_iiiiij\"] = createExportWrapper(\"dynCall_iiiiij\");\n\n/** @type {function(...*):?} */\nvar dynCall_iiiiid = Module[\"dynCall_iiiiid\"] = createExportWrapper(\"dynCall_iiiiid\");\n\n/** @type {function(...*):?} */\nvar dynCall_iiiiijj = Module[\"dynCall_iiiiijj\"] = createExportWrapper(\"dynCall_iiiiijj\");\n\n/** @type {function(...*):?} */\nvar dynCall_iiiiiiii = Module[\"dynCall_iiiiiiii\"] = createExportWrapper(\"dynCall_iiiiiiii\");\n\n/** @type {function(...*):?} */\nvar dynCall_iiiiiijj = Module[\"dynCall_iiiiiijj\"] = createExportWrapper(\"dynCall_iiiiiijj\");\n\n/** @type {function(...*):?} */\nvar dynCall_viiiiii = Module[\"dynCall_viiiiii\"] = createExportWrapper(\"dynCall_viiiiii\");\n\n/** @type {function(...*):?} */\nvar dynCall_v = Module[\"dynCall_v\"] = createExportWrapper(\"dynCall_v\");\n\n/** @type {function(...*):?} */\nvar dynCall_viiiii = Module[\"dynCall_viiiii\"] = createExportWrapper(\"dynCall_viiiii\");\n\n\n\n\n\n// === Auto-generated postamble setup entry stuff ===\n\n\nif (!Object.getOwnPropertyDescriptor(Module, \"intArrayFromString\")) Module[\"intArrayFromString\"] = function() { abort(\"'intArrayFromString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"intArrayToString\")) Module[\"intArrayToString\"] = function() { abort(\"'intArrayToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"ccall\")) Module[\"ccall\"] = function() { abort(\"'ccall' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"cwrap\")) Module[\"cwrap\"] = function() { abort(\"'cwrap' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"setValue\")) Module[\"setValue\"] = function() { abort(\"'setValue' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"getValue\")) Module[\"getValue\"] = function() { abort(\"'getValue' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"allocate\")) Module[\"allocate\"] = function() { abort(\"'allocate' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"getMemory\")) Module[\"getMemory\"] = function() { abort(\"'getMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"UTF8ArrayToString\")) Module[\"UTF8ArrayToString\"] = function() { abort(\"'UTF8ArrayToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"UTF8ToString\")) Module[\"UTF8ToString\"] = function() { abort(\"'UTF8ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"stringToUTF8Array\")) Module[\"stringToUTF8Array\"] = function() { abort(\"'stringToUTF8Array' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"stringToUTF8\")) Module[\"stringToUTF8\"] = function() { abort(\"'stringToUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"lengthBytesUTF8\")) Module[\"lengthBytesUTF8\"] = function() { abort(\"'lengthBytesUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"stackTrace\")) Module[\"stackTrace\"] = function() { abort(\"'stackTrace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"addOnPreRun\")) Module[\"addOnPreRun\"] = function() { abort(\"'addOnPreRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"addOnInit\")) Module[\"addOnInit\"] = function() { abort(\"'addOnInit' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"addOnPreMain\")) Module[\"addOnPreMain\"] = function() { abort(\"'addOnPreMain' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"addOnExit\")) Module[\"addOnExit\"] = function() { abort(\"'addOnExit' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"addOnPostRun\")) Module[\"addOnPostRun\"] = function() { abort(\"'addOnPostRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"writeStringToMemory\")) Module[\"writeStringToMemory\"] = function() { abort(\"'writeStringToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"writeArrayToMemory\")) Module[\"writeArrayToMemory\"] = function() { abort(\"'writeArrayToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"writeAsciiToMemory\")) Module[\"writeAsciiToMemory\"] = function() { abort(\"'writeAsciiToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"addRunDependency\")) Module[\"addRunDependency\"] = function() { abort(\"'addRunDependency' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"removeRunDependency\")) Module[\"removeRunDependency\"] = function() { abort(\"'removeRunDependency' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"FS_createFolder\")) Module[\"FS_createFolder\"] = function() { abort(\"'FS_createFolder' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"FS_createPath\")) Module[\"FS_createPath\"] = function() { abort(\"'FS_createPath' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"FS_createDataFile\")) Module[\"FS_createDataFile\"] = function() { abort(\"'FS_createDataFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"FS_createPreloadedFile\")) Module[\"FS_createPreloadedFile\"] = function() { abort(\"'FS_createPreloadedFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"FS_createLazyFile\")) Module[\"FS_createLazyFile\"] = function() { abort(\"'FS_createLazyFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"FS_createLink\")) Module[\"FS_createLink\"] = function() { abort(\"'FS_createLink' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"FS_createDevice\")) Module[\"FS_createDevice\"] = function() { abort(\"'FS_createDevice' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"FS_unlink\")) Module[\"FS_unlink\"] = function() { abort(\"'FS_unlink' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"dynamicAlloc\")) Module[\"dynamicAlloc\"] = function() { abort(\"'dynamicAlloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"loadDynamicLibrary\")) Module[\"loadDynamicLibrary\"] = function() { abort(\"'loadDynamicLibrary' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"loadWebAssemblyModule\")) Module[\"loadWebAssemblyModule\"] = function() { abort(\"'loadWebAssemblyModule' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"getLEB\")) Module[\"getLEB\"] = function() { abort(\"'getLEB' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"getFunctionTables\")) Module[\"getFunctionTables\"] = function() { abort(\"'getFunctionTables' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"alignFunctionTables\")) Module[\"alignFunctionTables\"] = function() { abort(\"'alignFunctionTables' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"registerFunctions\")) Module[\"registerFunctions\"] = function() { abort(\"'registerFunctions' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"addFunction\")) Module[\"addFunction\"] = function() { abort(\"'addFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"removeFunction\")) Module[\"removeFunction\"] = function() { abort(\"'removeFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"getFuncWrapper\")) Module[\"getFuncWrapper\"] = function() { abort(\"'getFuncWrapper' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"prettyPrint\")) Module[\"prettyPrint\"] = function() { abort(\"'prettyPrint' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"makeBigInt\")) Module[\"makeBigInt\"] = function() { abort(\"'makeBigInt' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"dynCall\")) Module[\"dynCall\"] = function() { abort(\"'dynCall' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"getCompilerSetting\")) Module[\"getCompilerSetting\"] = function() { abort(\"'getCompilerSetting' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"print\")) Module[\"print\"] = function() { abort(\"'print' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"printErr\")) Module[\"printErr\"] = function() { abort(\"'printErr' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"getTempRet0\")) Module[\"getTempRet0\"] = function() { abort(\"'getTempRet0' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"setTempRet0\")) Module[\"setTempRet0\"] = function() { abort(\"'setTempRet0' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"callMain\")) Module[\"callMain\"] = function() { abort(\"'callMain' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"abort\")) Module[\"abort\"] = function() { abort(\"'abort' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"stringToNewUTF8\")) Module[\"stringToNewUTF8\"] = function() { abort(\"'stringToNewUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"abortOnCannotGrowMemory\")) Module[\"abortOnCannotGrowMemory\"] = function() { abort(\"'abortOnCannotGrowMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"emscripten_realloc_buffer\")) Module[\"emscripten_realloc_buffer\"] = function() { abort(\"'emscripten_realloc_buffer' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"ENV\")) Module[\"ENV\"] = function() { abort(\"'ENV' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"ERRNO_CODES\")) Module[\"ERRNO_CODES\"] = function() { abort(\"'ERRNO_CODES' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"ERRNO_MESSAGES\")) Module[\"ERRNO_MESSAGES\"] = function() { abort(\"'ERRNO_MESSAGES' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"setErrNo\")) Module[\"setErrNo\"] = function() { abort(\"'setErrNo' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"DNS\")) Module[\"DNS\"] = function() { abort(\"'DNS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"GAI_ERRNO_MESSAGES\")) Module[\"GAI_ERRNO_MESSAGES\"] = function() { abort(\"'GAI_ERRNO_MESSAGES' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"Protocols\")) Module[\"Protocols\"] = function() { abort(\"'Protocols' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"Sockets\")) Module[\"Sockets\"] = function() { abort(\"'Sockets' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"UNWIND_CACHE\")) Module[\"UNWIND_CACHE\"] = function() { abort(\"'UNWIND_CACHE' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"readAsmConstArgs\")) Module[\"readAsmConstArgs\"] = function() { abort(\"'readAsmConstArgs' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"jstoi_q\")) Module[\"jstoi_q\"] = function() { abort(\"'jstoi_q' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"jstoi_s\")) Module[\"jstoi_s\"] = function() { abort(\"'jstoi_s' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"abortStackOverflow\")) Module[\"abortStackOverflow\"] = function() { abort(\"'abortStackOverflow' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"reallyNegative\")) Module[\"reallyNegative\"] = function() { abort(\"'reallyNegative' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"formatString\")) Module[\"formatString\"] = function() { abort(\"'formatString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"PATH\")) Module[\"PATH\"] = function() { abort(\"'PATH' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"PATH_FS\")) Module[\"PATH_FS\"] = function() { abort(\"'PATH_FS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"SYSCALLS\")) Module[\"SYSCALLS\"] = function() { abort(\"'SYSCALLS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"syscallMmap2\")) Module[\"syscallMmap2\"] = function() { abort(\"'syscallMmap2' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"syscallMunmap\")) Module[\"syscallMunmap\"] = function() { abort(\"'syscallMunmap' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"flush_NO_FILESYSTEM\")) Module[\"flush_NO_FILESYSTEM\"] = function() { abort(\"'flush_NO_FILESYSTEM' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"JSEvents\")) Module[\"JSEvents\"] = function() { abort(\"'JSEvents' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"specialHTMLTargets\")) Module[\"specialHTMLTargets\"] = function() { abort(\"'specialHTMLTargets' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"demangle\")) Module[\"demangle\"] = function() { abort(\"'demangle' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"demangleAll\")) Module[\"demangleAll\"] = function() { abort(\"'demangleAll' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"jsStackTrace\")) Module[\"jsStackTrace\"] = function() { abort(\"'jsStackTrace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"stackTrace\")) Module[\"stackTrace\"] = function() { abort(\"'stackTrace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"getEnvStrings\")) Module[\"getEnvStrings\"] = function() { abort(\"'getEnvStrings' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"checkWasiClock\")) Module[\"checkWasiClock\"] = function() { abort(\"'checkWasiClock' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"writeI53ToI64\")) Module[\"writeI53ToI64\"] = function() { abort(\"'writeI53ToI64' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"writeI53ToI64Clamped\")) Module[\"writeI53ToI64Clamped\"] = function() { abort(\"'writeI53ToI64Clamped' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"writeI53ToI64Signaling\")) Module[\"writeI53ToI64Signaling\"] = function() { abort(\"'writeI53ToI64Signaling' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"writeI53ToU64Clamped\")) Module[\"writeI53ToU64Clamped\"] = function() { abort(\"'writeI53ToU64Clamped' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"writeI53ToU64Signaling\")) Module[\"writeI53ToU64Signaling\"] = function() { abort(\"'writeI53ToU64Signaling' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"readI53FromI64\")) Module[\"readI53FromI64\"] = function() { abort(\"'readI53FromI64' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"readI53FromU64\")) Module[\"readI53FromU64\"] = function() { abort(\"'readI53FromU64' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"convertI32PairToI53\")) Module[\"convertI32PairToI53\"] = function() { abort(\"'convertI32PairToI53' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"convertU32PairToI53\")) Module[\"convertU32PairToI53\"] = function() { abort(\"'convertU32PairToI53' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"Browser\")) Module[\"Browser\"] = function() { abort(\"'Browser' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"GL\")) Module[\"GL\"] = function() { abort(\"'GL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"emscriptenWebGLGet\")) Module[\"emscriptenWebGLGet\"] = function() { abort(\"'emscriptenWebGLGet' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"emscriptenWebGLGetTexPixelData\")) Module[\"emscriptenWebGLGetTexPixelData\"] = function() { abort(\"'emscriptenWebGLGetTexPixelData' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"emscriptenWebGLGetUniform\")) Module[\"emscriptenWebGLGetUniform\"] = function() { abort(\"'emscriptenWebGLGetUniform' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"emscriptenWebGLGetVertexAttrib\")) Module[\"emscriptenWebGLGetVertexAttrib\"] = function() { abort(\"'emscriptenWebGLGetVertexAttrib' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"AL\")) Module[\"AL\"] = function() { abort(\"'AL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"SDL_unicode\")) Module[\"SDL_unicode\"] = function() { abort(\"'SDL_unicode' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"SDL_ttfContext\")) Module[\"SDL_ttfContext\"] = function() { abort(\"'SDL_ttfContext' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"SDL_audio\")) Module[\"SDL_audio\"] = function() { abort(\"'SDL_audio' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"SDL\")) Module[\"SDL\"] = function() { abort(\"'SDL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"SDL_gfx\")) Module[\"SDL_gfx\"] = function() { abort(\"'SDL_gfx' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"GLUT\")) Module[\"GLUT\"] = function() { abort(\"'GLUT' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"EGL\")) Module[\"EGL\"] = function() { abort(\"'EGL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"GLFW_Window\")) Module[\"GLFW_Window\"] = function() { abort(\"'GLFW_Window' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"GLFW\")) Module[\"GLFW\"] = function() { abort(\"'GLFW' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"GLEW\")) Module[\"GLEW\"] = function() { abort(\"'GLEW' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"IDBStore\")) Module[\"IDBStore\"] = function() { abort(\"'IDBStore' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"runAndAbortIfError\")) Module[\"runAndAbortIfError\"] = function() { abort(\"'runAndAbortIfError' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"warnOnce\")) Module[\"warnOnce\"] = function() { abort(\"'warnOnce' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"stackSave\")) Module[\"stackSave\"] = function() { abort(\"'stackSave' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"stackRestore\")) Module[\"stackRestore\"] = function() { abort(\"'stackRestore' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"stackAlloc\")) Module[\"stackAlloc\"] = function() { abort(\"'stackAlloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"AsciiToString\")) Module[\"AsciiToString\"] = function() { abort(\"'AsciiToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"stringToAscii\")) Module[\"stringToAscii\"] = function() { abort(\"'stringToAscii' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"UTF16ToString\")) Module[\"UTF16ToString\"] = function() { abort(\"'UTF16ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"stringToUTF16\")) Module[\"stringToUTF16\"] = function() { abort(\"'stringToUTF16' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"lengthBytesUTF16\")) Module[\"lengthBytesUTF16\"] = function() { abort(\"'lengthBytesUTF16' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"UTF32ToString\")) Module[\"UTF32ToString\"] = function() { abort(\"'UTF32ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"stringToUTF32\")) Module[\"stringToUTF32\"] = function() { abort(\"'stringToUTF32' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"lengthBytesUTF32\")) Module[\"lengthBytesUTF32\"] = function() { abort(\"'lengthBytesUTF32' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"allocateUTF8\")) Module[\"allocateUTF8\"] = function() { abort(\"'allocateUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nif (!Object.getOwnPropertyDescriptor(Module, \"allocateUTF8OnStack\")) Module[\"allocateUTF8OnStack\"] = function() { abort(\"'allocateUTF8OnStack' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") };\nModule[\"writeStackCookie\"] = writeStackCookie;\nModule[\"checkStackCookie\"] = checkStackCookie;if (!Object.getOwnPropertyDescriptor(Module, \"ALLOC_NORMAL\")) Object.defineProperty(Module, \"ALLOC_NORMAL\", { configurable: true, get: function() { abort(\"'ALLOC_NORMAL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") } });\nif (!Object.getOwnPropertyDescriptor(Module, \"ALLOC_STACK\")) Object.defineProperty(Module, \"ALLOC_STACK\", { configurable: true, get: function() { abort(\"'ALLOC_STACK' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") } });\nif (!Object.getOwnPropertyDescriptor(Module, \"ALLOC_DYNAMIC\")) Object.defineProperty(Module, \"ALLOC_DYNAMIC\", { configurable: true, get: function() { abort(\"'ALLOC_DYNAMIC' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") } });\nif (!Object.getOwnPropertyDescriptor(Module, \"ALLOC_NONE\")) Object.defineProperty(Module, \"ALLOC_NONE\", { configurable: true, get: function() { abort(\"'ALLOC_NONE' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)\") } });\n\n\n\nvar calledRun;\n\n/**\n * @constructor\n * @this {ExitStatus}\n */\nfunction ExitStatus(status) {\n  this.name = \"ExitStatus\";\n  this.message = \"Program terminated with exit(\" + status + \")\";\n  this.status = status;\n}\n\nvar calledMain = false;\n\n\ndependenciesFulfilled = function runCaller() {\n  // If run has never been called, and we should call run (INVOKE_RUN is true, and Module.noInitialRun is not false)\n  if (!calledRun) run();\n  if (!calledRun) dependenciesFulfilled = runCaller; // try this again later, after new deps are fulfilled\n};\n\n\n\n\n\n/** @type {function(Array=)} */\nfunction run(args) {\n  args = args || arguments_;\n\n  if (runDependencies > 0) {\n    return;\n  }\n\n  writeStackCookie();\n\n  preRun();\n\n  if (runDependencies > 0) return; // a preRun added a dependency, run will be called later\n\n  function doRun() {\n    // run may have just been called through dependencies being fulfilled just in this very frame,\n    // or while the async setStatus time below was happening\n    if (calledRun) return;\n    calledRun = true;\n    Module['calledRun'] = true;\n\n    if (ABORT) return;\n\n    initRuntime();\n\n    preMain();\n\n    readyPromiseResolve(Module);\n    if (Module['onRuntimeInitialized']) Module['onRuntimeInitialized']();\n\n    assert(!Module['_main'], 'compiled without a main, but one is present. if you added it from JS, use Module[\"onRuntimeInitialized\"]');\n\n    postRun();\n  }\n\n  if (Module['setStatus']) {\n    Module['setStatus']('Running...');\n    setTimeout(function() {\n      setTimeout(function() {\n        Module['setStatus']('');\n      }, 1);\n      doRun();\n    }, 1);\n  } else\n  {\n    doRun();\n  }\n  checkStackCookie();\n}\nModule['run'] = run;\n\nfunction checkUnflushedContent() {\n  // Compiler settings do not allow exiting the runtime, so flushing\n  // the streams is not possible. but in ASSERTIONS mode we check\n  // if there was something to flush, and if so tell the user they\n  // should request that the runtime be exitable.\n  // Normally we would not even include flush() at all, but in ASSERTIONS\n  // builds we do so just for this check, and here we see if there is any\n  // content to flush, that is, we check if there would have been\n  // something a non-ASSERTIONS build would have not seen.\n  // How we flush the streams depends on whether we are in SYSCALLS_REQUIRE_FILESYSTEM=0\n  // mode (which has its own special function for this; otherwise, all\n  // the code is inside libc)\n  var print = out;\n  var printErr = err;\n  var has = false;\n  out = err = function(x) {\n    has = true;\n  }\n  try { // it doesn't matter if it fails\n    var flush = flush_NO_FILESYSTEM;\n    if (flush) flush();\n  } catch(e) {}\n  out = print;\n  err = printErr;\n  if (has) {\n    warnOnce('stdio streams had content in them that was not flushed. you should set EXIT_RUNTIME to 1 (see the FAQ), or make sure to emit a newline when you printf etc.');\n    warnOnce('(this may also be due to not including full filesystem support - try building with -s FORCE_FILESYSTEM=1)');\n  }\n}\n\n/** @param {boolean|number=} implicit */\nfunction exit(status, implicit) {\n  checkUnflushedContent();\n\n  // if this is just main exit-ing implicitly, and the status is 0, then we\n  // don't need to do anything here and can just leave. if the status is\n  // non-zero, though, then we need to report it.\n  // (we may have warned about this earlier, if a situation justifies doing so)\n  if (implicit && noExitRuntime && status === 0) {\n    return;\n  }\n\n  if (noExitRuntime) {\n    // if exit() was called, we may warn the user if the runtime isn't actually being shut down\n    if (!implicit) {\n      var msg = 'program exited (with status: ' + status + '), but EXIT_RUNTIME is not set, so halting execution but not exiting the runtime or preventing further async execution (build with EXIT_RUNTIME=1, if you want a true shutdown)';\n      readyPromiseReject(msg);\n    }\n  } else {\n\n    ABORT = true;\n    EXITSTATUS = status;\n\n    exitRuntime();\n\n    if (Module['onExit']) Module['onExit'](status);\n  }\n\n  quit_(status, new ExitStatus(status));\n}\n\nif (Module['preInit']) {\n  if (typeof Module['preInit'] == 'function') Module['preInit'] = [Module['preInit']];\n  while (Module['preInit'].length > 0) {\n    Module['preInit'].pop()();\n  }\n}\n\n\n  noExitRuntime = true;\n\nrun();\n\n\n\n\n\n\n// {{MODULE_ADDITIONS}}\n\n\n\n\n\n  return c_BezierFit.ready\n}\n);\n})();\nexport default c_BezierFit;","import * as tf from '@tensorflow/tfjs';\nimport {setWasmPath} from '@tensorflow/tfjs-backend-wasm';\nimport BezierFit from './c_modules/bezier_fit/bezier_fit'\n\n\nconst model_json = '/dist/danny_modeljs/model.json'\n\nvar model_url = 'https://raw.githubusercontent.com/khluu/smartsheet/master/tfjs/model-4.json'\n\nconst alphabet = ['!' ,'(' ,')', '+', ',', '-', '.', '/', '0', '1', '2', '3' ,'4', '5', '6', '7', '8', '9',\n'=' ,'A', 'B', 'C', 'E', 'F', 'G', 'H', 'I', 'L', 'M', 'N', 'P', 'R', 'S', 'T' ,'V', 'X',\n'Y', '[', '\\\\Delta' ,'\\\\alpha', '\\\\beta', '\\\\cos', '\\\\div', '\\\\exists',\n'\\\\forall', '\\\\gamma', '\\\\geq', '\\\\gt' ,'\\\\in', '\\\\infty', '\\\\int', '\\\\lambda',\n'\\\\ldots', '\\\\leq' ,'\\\\lim', '\\\\log' ,'\\\\lt', '\\\\mu', '\\\\neq', '\\\\phi', '\\\\pi',\n'\\\\pm', '\\\\prime' ,'\\\\rightarrow' ,'\\\\sigma', '\\\\sin', '\\\\sqrt', '\\\\sum',\n'\\\\tan', '\\\\theta' ,'\\\\times', '\\\\{', '\\\\}', ']', 'a', 'b', 'c', 'd', 'e', 'f', 'g',\n'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y',\n'z', '|']\n\nfunction argsort(arr,k=0){\n  var sorted = arr.map(((val,index) => [val,index])).sort((a,b) => b[0]-a[0]) \n  if(k){sorted = sorted.slice(0,k)}\n  var vals = sorted.map(x => x[0])\n  var indicies = sorted.map(x => x[1])\n  return [vals, indicies]\n}\n\n\nexport default class StrokeClassifier {\n  constructor(){\n    setWasmPath(\"/dist/tfjs-backend-wasm.wasm\")\n    var tf_promise = tf.setBackend('wasm');\n\n    this.BezierFit = new BezierFit();\n    this.BezierFit.promise.then(() => {\n      this.fitCurve = this.BezierFit.fitCurve\n      this.fitCurveFeatures = this.BezierFit.fitCurveFeatures\n      this.groupStrokes = this.BezierFit.groupStrokes\n      // this.fitCurve([[1,2],[3,4],[5,6],[7,8]])\n    })\n    \n    this.promise = Promise.all([tf_promise, this.BezierFit.promise, this.model_promise]).then(async () => {\n      this.model_promise = await tf.loadLayersModel(model_json).then((model) => {\n      this.model = model\n      })\n    }).then(() => {\n    // this.promise = Promise.all([ this.BezierFit.promise, this.model_promise]).then(() => {\n\n      this.normalize_strokes = (strokes) => {\n        console.log(\"STROKES\", strokes)\n        var minx = 2400000000, miny = 2400000000;\n        var maxx = -2400000000, maxy = -2400000000;\n        var out_strokes = []\n        for (var i = 0; i < strokes.length; i++) {\n          out_strokes.push([])\n          for (var j = 0; j < strokes[i].length; j++) {\n              minx = Math.min(minx, strokes[i][j][0]);\n              miny = Math.min(miny, strokes[i][j][1]);\n              out_strokes[i].push([strokes[i][j][0],strokes[i][j][1]] )\n          }\n        }\n        \n        for (var i = 0; i < strokes.length; i++) {\n          for (var j = 0; j < strokes[i].length; j++) {\n              out_strokes[i][j][0] -= minx;\n              out_strokes[i][j][1] -= miny;\n              maxx = Math.max(maxx, out_strokes[i][j][0]);\n              maxy = Math.max(maxy, out_strokes[i][j][1]);\n          }\n        }\n        console.log(minx, maxx, miny, maxy);\n        for (var i = 0; i < strokes.length; i++) {\n          for (var j = 0; j < strokes[i].length; j++) {\n              out_strokes[i][j][0] /= Math.min(maxx, maxy) / 100;\n              out_strokes[i][j][1] /= Math.min(maxx, maxy) / 100;\n          }\n        }\n        return out_strokes\n      }\n\n      this.recognize_symbol = (strokes) => {\n        var inp = []\n        var n_strokes = strokes.length\n        for(var stroke of strokes){\n          if(typeof stroke === 'object' && stroke != null){\n            inp.push(stroke.points)\n          } \n        }\n        inp = this.normalize_strokes(inp)\n        console.log(\"normed\",inp)\n        var curve_features = []\n        for(var stroke of inp){\n          var curves = this.fitCurve(stroke)  \n          for(var feats of this.fitCurveFeatures(stroke)){\n            console.log(\"feats\", feats)\n            curve_features.push(feats)\n          }\n        }\n        console.log(\"curve_features\",curve_features)\n        var input = tf.tensor([curve_features], DocumentType=tf.float32);\n        // console.log(this.model)\n        // console.log(curves)\n        // console.log(curve_features)\n        var s = this.model.predict(input).array().then((res) => {\n          var [probs, indicies] = argsort(res[0],10)\n          // console.log(\"probs\",probs)\n          // console.log(\"indicies\",indicies)\n          var out = {}\n          for(var i=0; i < probs.length; i++){\n            out[alphabet[indicies[i]]] = probs[i];\n          }\n          // console.log(\"OUT\",out)\n          return out\n          \n        });\n\n        return s\n        \n        \n        \n        \n      }\n\n\n    })\n  }\n\n  \n\n  \n}\n\n\n// var output = '';\n// async function run(traces) {\n//     //console.log('model loaded');\n//     //console.log(model.getWeights()[0].print());\n//     //console.log(a[0]);\n    \n    \n//     var fit = new BezierFit(512, traces);\n//     //console.log(fit);\n//     var res = await fit.promise.then();\n//     var input=[];\n//     input.push(res[0]);\n//     var i = 1;\n//     for (i=1; i < res.length; i++) {\n//       //console.log([res[i]]);\n//       input.push(res[i]);\n//     }\n//     var ten = tf.tensor([input], DocumentType=tf.float32);\n//     var s = model.predict(ten);\n//     ","// import Accordion from 'react-native-collapsible/Accordion';\n// import { CollapsingToolbar }  from 'react-native-collapsingtoolbar';\n// import CollapsibleList from './collapsible_list.js'\nimport SkillPanel from './components/skill_panel.js'\nimport Buttons from './components/buttons';\n// import { vw, vh, vmin, vmax } from 'react-native-expo-viewport-units';\n// import ButtonsMachine from './interactions.js'\nimport {build_interactions_sm} from './interactions.js'\nimport {build_training_sm, problem_props} from './training_handler.js'\nimport NetworkLayer from './network_layer.js'\nimport { interpret } from 'xstate';\nimport autobind from 'class-autobind';\nimport path from 'path';\nimport pick from 'object.pick';\n\n// \nimport React from 'react';\nimport Spinner from 'react-native-loading-spinner-overlay';\n// import \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\"\n// import Loader from 'react-loader-spinner'\n// import { View, Text, StyleSheet } from \"react-native\";\n// import logo from './logo.svg';\n// import './App.css';\n\nimport { TouchableHighlight,ScrollView,View, Text, Platform, StyleSheet,SectionList,AppRegistry } from \"react-native\";\n\n\n// const instructions = Platform.select({\n//   ios: \"Press Cmd+R to reload,\\n\" + \"Cmd+D or shake for dev menu\",\n//   android:\n//     \"Double tap R on your keyboard to reload,\\n\" +\n//     \"Shake or press menu button for dev menu\",\n//   web: \"Your browser will automatically refresh as soon as you save the file.\"\n// });\n// var state_machine = ButtonsMachine.initialState\n// var state_machine_service = interpret(ButtonsMachine)\n// state_machine_service.start()\n\n// var NonInteractive_SM = build_SM_NonInteractive()\n// var ctat_state_machine = NonInteractive_SM.initialState\n// var ctat_state_machine_service = interpret(NonInteractive_SM)\n// ctat_state_machine_service.start()\n// window.ctat_state_machine = ctat_state_machine\n// window.ctat_state_machine_service = ctat_state_machine_service\n\n// var urlParams = new URLSearchParams(window.location.search);\n// var AL_URL = urlParams.get('al_url');\n// var HOST_URL = window.location.origin\n// window.network_layer = new NetworkLayer(AL_URL,HOST_URL)\n\n// ctat_state_machine_service.onTr\n\n// ctat_state_machine_service.onTransition(current => {\n//     setButtonsState(current,window.debugmode)\n    \n//     // this.setState({ current : current })\n//     }\n//   );\nfunction shallow_diff(o1,o2,keys=null){\n  console.log(keys)\n  let diff = Object.keys(o2).reduce((diff, key) => {\n      if (o1[key] !== o2[key] && (keys == null || keys.includes(key))){\n        diff[key] = o2[key]\n      }\n      return diff\n    }, {})\n  return diff\n}\n\n\n\nexport default class ALReactInterface extends React.Component {\n  constructor(props){\n    super(props);\n    autobind(this);\n    this.onInteractionTransition = this.onInteractionTransition.bind(this)\n    // this.urlParams = new URLSearchParams(window.location.search);\n\n    // this.AL_URL = this.urlParams.get('al_url');\n    // this.HOST_URL = window.location.origin\n    // console.log(this.AL_URL + '/create/',this.HOST_URL)\n    this.network_layer = new NetworkLayer(props.AL_URL,props.HOST_URL,props.OUTER_LOOP_URL)\n    \n    // this.training_file = this.urlParams.get('training');\n    // this.interactive = this.urlParams.get('interactive') == \"true\";\n    // this.use_foci = this.urlParams.get('use_foci') == \"true\";\n\n    // var working_dir = this.urlParams.get('wd')\n    if(props.working_dir == null && props.training_file != null){\n        var match = props.training_file.match(/(.*)[\\/\\\\]/)\n        props.working_dir =  !!match ? match[1] : ''; //The directory of the training.json\n    }\n    this.tutor = React.createRef()\n    this.skill_panel = React.createRef()\n    this.buttons = React.createRef()\n\n    this.state = {\n      default_props: {},\n      buttons_props: {app: this},\n      tutor_props: this.props.tutor_props || {},\n      skill_panel_props: {},\n      \"training_description\" : \"????\",\n      \"agent_description\" : \"????\",\n      \"problem_description\" : \"????\",\n\n      \"interactive\" : this.props.interactive,\n      \"free_author\" : this.props.free_author,\n      \"tutor_mode\" : this.props.tutor_mode,\n    }\n    // this.state = {prob_obj : null};\n  }\n\n  onInteractionTransition(current){\n    console.log(\"#\",current.value, \":\", current.context, current)\n\n    var standard_props = {interactions_state: current,\n                          interactions_service : this.interactions_service}\n    this.setState({\n      default_props : standard_props,\n      \"Interactions_Machine_State\" : current.value\n      // buttons_props: standard_props,\n      // tutor_props: standard_props,\n      // skill_panel_props: standard_props,\n    })\n  }\n\n  onTrainingTransition(current){\n    var c = current.context\n    console.log(\"&\", current)\n    this.setState({\"Training_Machine_State\" : current.value})\n    if(!c.interactive){\n      this.setState({\n        training_description : c.training_description || \"???\",\n        agent_description : c.agent_description || \"???\",\n        problem_description : c.problem_description || \"???\"\n      })  \n    }\n    \n\n  }\n\n  changeInteractionMode(d){\n    this.setState(d)\n  }\n\n  componentDidUpdate(prevProps,prevState){\n\n    //Update from changeInteractionMode\n    var d = shallow_diff(prevState,this.state,[\"interactive\",\"free_author\",\"tutor_mode\"])\n    if(Object.keys(d).length > 0){\n      console.log(\"componentDidUpdate\", d)\n      this.training_service.send({\n        type : \"CHANGE_INTERACTION_MODE\",\n        data : d,\n      })  \n    }\n  }\n\n  componentDidMount(){\n    console.log(\"MOUNTED\")\n    var tutor, nl, wd,tf\n    [tutor, nl, wd,tf] = [this.tutor.current,this.network_layer,this.props.working_dir,this.props.training_file]\n    \n\n    // this.setState({\n     \n    // })\n    this.interactions_sm = build_interactions_sm(this,\n                                                 pick(this.props,problem_props))\n                                                 // this.props.interactive,\n                                                 // this.props.free_author,\n                                                 // this.props.tutor_mode)  \n    this.interactions_service = null //Will be spawned in training_sm \n\n    this.training_machine = build_training_sm(this,this.interactions_sm, tf, wd)\n    this.training_service = interpret(this.training_machine)\n    this.training_service.onTransition(this.onTrainingTransition)\n    this.training_service.start()\n\n    const sub = this.training_service.subscribe(state => {\n      console.log(\"SUBSCRIBE:\",state);\n    });\n    console.log(\"T MACHINE!\", this.training_service)\n\n    window.setTutorMode = (x) => {\n      this.changeInteractionMode({\"tutor_mode\" : x})\n    }\n\n    window.setInteractive = (x) => {\n      this.changeInteractionMode({\"interactive\" : x})\n    }\n\n    window.setFreeAuthor = (x) => {\n      this.changeInteractionMode({\"free_author\" : x})\n    }\n\n    //TODO MOVE TO NW_LAYER\n    window.generateBehaviorProfile = this.generateBehaviorProfile\n\n\n  }\n\n  generateBehaviorProfile(ground_truth_path=\"/ground_truth.json\",out_dir=\"\"){\n    // window.generateBehaviorProfile = (ground_truth_path,out_dir=\"\") => {\n    let f = this.network_layer.generateBehaviorProfile\n\n    let t_context = this.training_service._state.context\n    // let i_context = this.training_service.context\n    if(ground_truth_path != null){\n\n      let to_json_list = (in_list) => {\n        let out = []\n        for (let line of in_list){\n          if(line != \"\"){\n            let json = JSON.parse(line)\n            out.push(json)\n          }\n        }\n        return out;\n      }\n      // let rq_h = this.network_layer.return\n      // let path =  ground_truth_path\n      if(ground_truth_path[0] != \"/\"){\n        ground_truth_path = (t_context.working_dir|| \"/\") + ground_truth_path\n      }\n      return fetch(ground_truth_path)\n        .then((resp) => resp.text())\n        .then((text) => text.split(\"\\n\"))\n        .then((split) => to_json_list(split))\n        .then((resps) => f(t_context,{data:{requests:resps,out_dir: out_dir}}))\n\n    }else{\n      return f(t_context)  \n    }\n      \n  }\n\n  render(){\n    const Tutor = this.props.tutorClass\n\n    var lower_display;\n    var use_prompt = false\n    if(!this.state.interactive){\n      use_prompt = true\n      var prompt_text\n      // if(this.state.tutor_mode == true){\n      //   prompt_text = \"TUTOR MODE\\n\"\n      // }else if(!this.state.interactive){\n      prompt_text = \n        this.state.training_description + \"\\n\" +\n        this.state.agent_description + \"\\n\" +\n        this.state.problem_description + \"\\n\"\n\n      lower_display = \n      <View style={styles.prompt}>\n        <Text>\n        {prompt_text}\n        </Text>\n      </View>\n    }else{\n      lower_display = \n      <View style={styles.controls}>\n        {!this.state.tutor_mode &&\n        <View style={styles.skill_panel}>\n          <SkillPanel ref={this.skill_panel}\n          {...this.state.default_props}\n          {...this.state.skill_panel_props}/>\n        </View>\n        }\n        <View style={styles.buttons}>\n          <Buttons ref={this.buttons}\n          {...this.state.default_props}\n          {...this.state.buttons_props}\n          {...{tutor_mode: this.state.tutor_mode}}/>\n        </View>\n      </View>\n    }\n    \n    // <View style={styles.overlay}>\n        //   <Text style={styles.overlay_text}>\n        //     LOADING\n        //   </Text>\n        // </View>\n    console.log(\"TRANING MACHINE STATE\",this.state.Training_Machine_State)\n    return (\n  \t<View style={styles.container}>\n  \t\t<View style={styles.ctat_tutor}>\n        {(this.state.Training_Machine_State == \"Creating_Agent\") //||\n          // this.state.Interactions_Machine_State == \"Querying_Apprentice\" ||\n          // this.state.Interactions_Machine_State == \"Sending_Feedback\")\n          &&\n          <View style={styles.overlay}>\n            <Spinner\n              color={'#000000'}\n              size={150}\n              visible={true}\n              textContent={'Loading...'}\n              textStyle={styles.spinnerTextStyle}\n            />\n          </View> \n        }\n        \n  \t\t\t<Tutor\n          //tutor_props = {this.state.prob_obj}\n          ref={this.tutor}//{function(tutor) {window.tutor = tutor; console.log(\"TUTOR IS:\",tutor)}}\n          id=\"tutor_iframe\"\n          //current_state={ctat_state_machine}\n          //sm_service={ctat_state_machine_service}\n          interactive={false}\n          {...this.state.default_props}\n          {...this.state.tutor_props}\n        />\n  \t\t</View>\n\n  \t\t{lower_display}\n  \t</View>\n    );\n  }\n}\n\n//current={state_machine}\n//service={state_machine_service}\n//debugmode={true}\n//callbacks={window.button_callbacks}\n//nools_callback={window.nools_callback}/>\n\nconst styles = StyleSheet.create({\n      spinnerTextStyle: {\n        color: '#000000'\n      },\n      overlay: {\n        position: 'absolute',\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        backgroundColor: 'rgba(50, 50, 50, 0.3)',\n        flex: 1,\n        justifyContent: \"center\",\n        alignItems: \"center\"\n      },\n      overlay_text: {\n        textAlign: 'center',\n      },\n\t     container : {\n        // justifyContent: \"stretch\",\n        // padding: 20,\n        // alignItems:'center',\n        // backgroundColor: \"blue\",\n        flex: 1,\n        flexDirection: \"column\",\n        // flexWrap: \"wrap\"\n      },\n      ctat_tutor: {\n\n      \t// backgroundColor: 'powderblue',\n      \t\n      \t// flexGrow: 1,\n      \t// height : \"65%\",\n      \t// width : \"100%\",\n        // width:800,\n        // height: vh(64),\n        // flexGrow: 100,\n        margin: 4,\n        flexBasis: \"65%\",\n        flex: 1,\n        \n\n      },\n      prompt : {\n        flex: 1,\n        textAlign : \"center\"\n      },\n      controls :{\n\n      \t// flexGrow: 1,\n      \t// flexBasis: 300,\n        // display: \"flex\",\n        // height : \"35%\",\n        flex: 1,\n        flexBasis: \"35%\",\n        flexDirection: \"row\",\n        // flexWrap: \"wrap\",\n        // width : 600,\n        // flexGrow: 1,\n        // flexBasis:  600,\n        // height: vh(35),\n        // justifyContent: \"center\",\n      },\n      \n      skill_panel : {\n      \t// width: \"65%\",\n      \t// height: 300,\n        // height: vh(35),\n        flex : 1,\n        flexBasis: \"60%\",\n        // flexGrow : 0\n        // flexDirection: \"row\",\n        // flexShrink: 1,\n        // flexBasis: 1\n        /*height: 320px*/\n\n      },\n      \n\n      buttons : {\n        flexGrow: 1,\n        // display: \"flex\",\n        // width : 1000,\n        // flexBasis: 2,\n        flexDirection: \"column\",\n        // height: vh(35),\n        // width: \"35%\",\n        flexBasis : \"40%\",\n        /*width:300px;*/\n        // flexWrap: \"wrap\",\n        justifySelf : \"space-around\",\n        \n        // flexBasis: 32,\n        /*justify-self:  start;*/\n        /*align-self:  ;*/\n        /*padding: 60px,*/\n        // justifyContent: \"auto\",\n        \n        // alignContent: \"center\"\n        \n      }\n\n});","import { Machine, assign, interpret } from \"xstate\";\nimport RJSON from \"relaxed-json\";\nimport { build_interactions_sm } from \"./interactions.js\";\nimport { applyPriorKnowledge } from \"./prior_knowledge.js\";\nimport { evalJSONFunc } from \"./eval.js\";\nimport { Random } from \"random-js\";\n\nvar pick = require('object.pick');\nvar fs = require(\"fs\");\n// const path = require(\"path\")\n\nconst random = new Random();\n\n//A set of properties which are passed from the training handler SM context \n//  to the interactions SM as props \nexport const problem_props = ['agent_id','free_author', \n        'interactive','tutor_mode','examples_only','test_mode', 'outer_loop_controller']\nconst problem_props_dict = problem_props.reduce(function(obj, x) { obj[x] = null;return obj;}, {});        \n\nconst CTATGuid = {\n  s4: function s4() {\n    return Math.floor((1 + Math.random()) * 65536)\n      .toString(16)\n      .substring(1);\n  },\n  guid: function guid() {\n    return (\n      this.s4() +\n      this.s4() +\n      \"-\" +\n      this.s4() +\n      \"-\" +\n      this.s4() +\n      \"-\" +\n      this.s4() +\n      \"-\" +\n      this.s4() +\n      this.s4() +\n      this.s4()\n    );\n  }\n};\n\nfunction load_training_file(context, event) {\n  console.log(\"TRAINING JSON:\", context.training_file);\n  return fetch(context.training_file)\n    .then(response => response.text()) //response.json())\n    .then(response => RJSON.parse(response)) //response.json())\n    .then(response => Object.entries(response))\n    .then(response => {\n      return { updateContext: { training_iterator: response } };\n    });\n  // var promise = new Promise((resolve, reject) => {\n  // try{\n  // \tlet file_name = context.training_json\n  // \tlet rawdata = fs.readFileSync(file_name)\n  // \tlet training_json_obj = JSON.parse(rawdata);\n  // \tvar training_iterator = Object.entries(training_json_obj);\n  // }catch(error){\n  // \tconsole.error(error)\n  // \treject(error)\n  // }\n  // resolve(training_iterator)\n  // });\n  // return promise\n}\n\nfunction serve_next_training_set(context, event) {\n  var promise = new Promise(async (resolve, reject) => {\n    var training_iterator = context.training_iterator;\n    var file_params = context.file_params || {};\n    console.log(\"TRAINING ITERATOR\", training_iterator.length);\n    if (training_iterator.length > 0) {\n      var out = training_iterator.shift();\n      var name = out[0];\n\n      while (name == \"set_params\") {\n        file_params = { ...file_params, ...out[1] }; //join and prefer new one\n        out = training_iterator.shift();\n        name = out[0];\n      }\n\n      console.log(\"START TRAINING SET: \", name, file_params);\n      var agent_iterator = await evalJSONFunc(out[1],context);\n\n      resolve({\n        updateContext: {\n          training_iterator: training_iterator,\n          agent_iterator: agent_iterator,\n          file_params: file_params,\n          training_description:\n            context.training_file.replace(/^.*[\\\\\\/]/, \"\") + \" : \" + name\n        }\n      });\n    } else {\n      resolve(null);\n    }\n  });\n  return promise;\n}\n\nasync function parseOuterLoopController(x, context, problem_set = null) {\n  if (typeof x == \"string\") {\n    x = { type: x };\n  }\n  if(x['problem_set']){\n    x[\"problem_set\"] = await evalJSONFunc(x['problem_set'], context);\n  }else if(problem_set != null){\n    x[\"problem_set\"] = problem_set;\n  }\n  x[\"initialized\"] = false;\n  return { outer_loop_controller: x };\n}\n\n// function resolveProblemSet(spec, context){\n// \tvar promise = new Promise( async (resolve,reject) => {\n// \t\tvar rez;\n// \t\tif(typeof(spec) == 'object'){\n//         \tspec = {...spec};\n\n// \t\t\tvar key = Object.keys(spec)[0];\n// \t\t\tvar val = spec[key]\n// \t\t\tif(key == \"concatenate\"){\n// \t\t\t\tvar all = []\n// \t\t\t\tfor(var g of val){\n// \t\t\t\t\trez = await resolveProblemSet(g,context)\n// \t\t\t\t\tall = all.concat(rez)\n// \t\t\t\t}\n// \t\t\t\tresolve(all)\n// \t\t\t}else if(key == \"shuffle\"){\n// \t\t\t\trez = await resolveProblemSet(val,context)\n// \t\t\t\tresolve(random.shuffle(rez))\n// \t\t\t}else if(key == \"sample\"){\n// \t\t\t\tvar n = val['n']\n// \t\t\t\t//TODO: Implement -> var w_repl = val['with_replacement'] || false\n// \t\t\t\tvar set = val['set']\n// \t\t\t\tset = await resolveProblemSet(set,context)\n// \t\t\t\tconsole.log(\"IT IS THIS BIG:\", set.length)\n// \t\t\t\tresolve(random.sample(set, n))\n// \t\t\t}else if(key == \"glob\"){\n// \t\t\t\tvar glob_key = val['key']\n// \t\t\t\tvar pattern = val['pattern']\n// \t\t\t\tvar matches = await context.network_layer.glob(pattern,context)\n// \t\t\t\tmatches = matches.map(m => {var o = {}; o[glob_key]=\"/\"+m; return o})\n// \t\t\t\tresolve(matches)\n// \t\t\t}else if(key == \"from_file\"){\n\n// \t\t\t}else{\n// \t\t\t\tresolve(spec)\n// \t\t\t}\n//         }else{\n//         \tresolve([...spec]);\n//         }\n\n// \t})\n// \treturn promise\n// }\n\nfunction serve_next_agent(context, event) {\n  var promise = new Promise(async (resolve, reject) => {\n    var agent_iterator = context.agent_iterator;\n    console.log(\"AGENT ITERATOR\", agent_iterator.length);\n    if (context.agent_iterator.length > 0) {\n      var agent_obj = agent_iterator.shift();\n\n      if (\"repetitions\" in agent_obj) {\n        if (agent_obj[\"repetitions\"] < 0) {\n          agent_iterator.unshift({\n            ...agent_obj,\n            ...{ _rep_count: (agent_obj[\"_rep_count\"] || 1) + 1 }\n          });\n        } else if (agent_obj[\"repetitions\"] == 0) {\n          agent_obj = agent_iterator.shift();\n        } else if (agent_obj[\"repetitions\"] >= 2) {\n          agent_obj[\"repetitions\"] -= 1;\n          agent_iterator.unshift({\n            ...agent_obj,\n            ...{ _rep_count: (agent_obj[\"_rep_count\"] || 1) + 1 }\n          });\n        }\n        agent_obj[\"_rep_count\"] = agent_obj[\"_rep_count\"] || 1;\n      }\n\n      var problem_set = await evalJSONFunc(agent_obj[\"problem_set\"], context);\n      \n      if(agent_obj[\"problem_set\"]){\n        console.log(\"RESOLVED PROBLEM SET\", [...problem_set]);  \n      }\n      \n      // if(typeof(agent_obj[\"problem_set\"]) == 'object'){\n      // \tvar problem_set = {...agent_obj[\"problem_set\"]};\n      // \tproblem_set = await resolveProblemSet(problem_set)\n      // }else{\n      // \tvar problem_set = [...agent_obj[\"problem_set\"]];\n      // }\n\n      agent_obj = { ...(context.file_params[\"agent\"] || {}), ...agent_obj };\n\n      if (\n        context.file_params[\"agent\"] &&\n        context.file_params[\"agent\"][\"args\"]\n      ) {\n        agent_obj[\"args\"] = {\n          ...context.file_params[\"agent\"][\"args\"],\n          ...agent_obj[\"args\"]\n        };\n      }\n      var agent_params = agent_obj[\"set_params\"] || {};\n      var rep_count_str =\n        agent_obj[\"_rep_count\"] != null\n          ? \"(\" + agent_obj[\"_rep_count\"] + \")\"\n          : \"\";\n      agent_obj[\"agent_name\"] += rep_count_str;\n      var agent_description =\n        \"Agent Name: \" +\n        agent_obj[\"agent_name\"] +\n        \"\\nAgent Type: \" +\n        agent_obj[\"agent_type\"]; //+\"<br>\"\n\n      var prior_knowledge = [...(agent_obj[\"prior_knowledge\"] || [])];\n\n      var outer_loop_controller = null;\n      if (\"outer_loop_controller\" in agent_obj) {\n        outer_loop_controller = await parseOuterLoopController(\n          agent_obj[\"outer_loop_controller\"],\n          context,\n          problem_set,\n        );\n        problem_set = [outer_loop_controller];\n      }\n\n      var other_data = { ...agent_obj };\n      delete other_data[\"problem_set\"];\n      delete other_data[\"agent_name\"];\n      delete other_data[\"agent_type\"];\n\n      resolve({\n        updateContext: {\n          start_state_history: [],\n          request_history: [],\n          session_id: CTATGuid.guid(),\n          user_guid: agent_obj[\"agent_name\"], //\"Stu_\" + CTATGuid.guid(),\n\n          agent_params: agent_params,\n          agent_name: agent_obj[\"agent_name\"],\n          agent_type: agent_obj[\"agent_type\"],\n          agent_description: agent_description,\n          other_agent_data: other_data,\n\n          agent_iterator: agent_iterator,\n          problem_set: problem_set,\n          prior_knowledge: prior_knowledge,\n          agent_start_time: new Date(),\n          outer_loop_controller : outer_loop_controller,\n          \n        }\n      });\n    } else {\n      resolve(null);\n    }\n  });\n  return promise;\n}\n\nfunction handle_prior_knowledge(context, event) {\n  var promise = new Promise((resolve, reject) => {\n    // console.log(\"WOOP?\")\n    var prior_knowledge = context.prior_knowledge;\n    while (prior_knowledge.length > 0) {\n      console.log(\"CURRENT\", prior_knowledge);\n      var current = prior_knowledge.shift();\n      var out = applyPriorKnowledge(context, current, prior_knowledge);\n      if (out[\"updateContext\"]) {\n        resolve({ updateContext: out[\"updateContext\"] });\n      }\n      if (out[\"train_now\"] || false) {\n        return promise;\n      }\n    }\n\n    resolve({\n      updateContext: {\n        prior_knowledge: prior_knowledge,\n        problem_iterator: context.problem_set\n      }\n    });\n  });\n  return promise;\n}\n\nasync function _next_prob_obj(\n  problem_iterator,\n  agent_params,\n  file_params,\n  context\n) {\n  var promise = new Promise(async (resolve, reject) => {\n    var prob_obj = problem_iterator.shift();\n    console.log(\"prob_obj\",prob_obj)\n    while (prob_obj != null && \"outer_loop_controller\" in prob_obj) {\n      var nl = context.network_layer;\n      if (!nl.OUTER_LOOP_URL) {\n        nl.kill_this(\n          \"\\nCANNOT USE 'outer_loop_controller' : {} pattern unless \" +\n            \"running altrain with --outer-loop flag.\\n\"\n        );\n      }\n      // console.log(\"HERE1.5\")\n\n      var controller = prob_obj[\"outer_loop_controller\"];\n      if (!controller[\"initialized\"]) {\n        //TODO: allow for multiple controllers?\n        // console.log(\"HERE1.6\")\n        await nl.newOuterLoopController(controller, context);\n        controller[\"initialized\"] = true;\n        // console.log(\"HERE1.7\")\n      }\n      // console.log(\"HERE1.9\")\n      var next = await nl.nextProblem(controller, context);\n      // console.log(\"NXT\", next)\n      if (next != null) {\n        problem_iterator.unshift({ ...prob_obj });\n        prob_obj = next;\n      } else if (problem_iterator.length > 0) {\n        prob_obj = problem_iterator.shift();\n      } else {\n        resolve([null, agent_params]);\n        return\n      }\n    }\n\n    // console.log(prob_obj);trz\n    if (!prob_obj) {\n      resolve([null, agent_params]);\n      return;\n    }\n\n    while (\"set_params\" in prob_obj) {\n      agent_params = { ...agent_params, ...prob_obj[\"set_params\"] };\n      prob_obj = problem_iterator.shift();\n      if (!prob_obj) {\n        resolve([null, agent_params]);\n        return;\n      }\n    }\n    // console.log(prob_obj)\n    var fp_clone = { ...file_params };\n    delete fp_clone[\"agent\"];\n    prob_obj = { ...fp_clone, ...agent_params, ...prob_obj };\n    // console.log(prob_obj,agent_params)\n    resolve([prob_obj, agent_params]);\n    return;\n  });\n  return promise;\n}\n\nfunction serve_next_problem(context, event) {\n  var promise = new Promise(async (resolve, reject) => {\n    var prob_obj = null;\n    var agent_params = context.agent_params;\n    var file_params = context.file_params;\n    var problem_iterator = context.problem_iterator;\n    var nl = context.network_layer;\n    var interactive = context.interactive;\n    console.log(\"PROBLEM ITERATOR\", problem_iterator.length);\n\n    if (problem_iterator.length > 0) {\n      // console.log(\"HERE1\")\n      [prob_obj, agent_params] = await _next_prob_obj(\n        problem_iterator,\n        agent_params,\n        file_params,\n        context\n      );\n      // console.log(prob_obj,agent_params)\n      console.log(\"SLOOOP\")\n      console.log(prob_obj)\n      if (prob_obj) {\n        if (\"repetitions\" in prob_obj) {\n          if (prob_obj[\"repetitions\"] < 0) {\n            problem_iterator.unshift({ ...prob_obj });\n          } else if (prob_obj[\"repetitions\"] == 0) {\n            [prob_obj, agent_params] = await _next_prob_obj(\n              problem_iterator,\n              agent_params,\n              file_params,\n              context\n            );\n          } else if (prob_obj[\"repetitions\"] >= 2) {\n            prob_obj[\"repetitions\"] -= 1;\n            problem_iterator.unshift({ ...prob_obj });\n          }\n        }\n\n        // var EXAMPLES_ONLY = prob_obj[\"examples_only\"] || false;\n\n        var problem_description = Object.keys(prob_obj).reduce((s, key) => {\n          return s + key + \": \" + prob_obj[key] + \"\\n\";\n        }, \"\");\n\n        resolve({\n          updateContext: {\n            agent_params: agent_params,\n            problem_iterator: problem_iterator,\n            prob_obj: prob_obj,\n            problem_description: problem_description\n          }\n        });\n      } else {\n        resolve(null);\n      }\n    } else {\n      resolve(null);\n    }\n  });\n  return promise;\n}\nfunction load_problem(context, event) {\n  return context.tutor.loadProblem(context);\n}\nfunction query_outerloop(context, event) {}\n\nfunction iteratorEmpty(context, event) {\n  return event.data == null;\n}\nfunction AAID(interactions_state_machine) {\n  var boop = (context, event) => {\n    console.log(\"MOOOP\");\n    return {\n      ...interactions_state_machine.context,\n      ...{ agent_id: context.agent_id }\n    };\n  };\n}\n\nfunction sendProblemDone(context, event){\n  context.network_layer.sendProblemDone(context,event)\n}\n\n// function gerp(event){\n// \tconsole.log(\"GERP\")\n// \treturn event.data['agent_id']\n// }\n\nfunction start_training_interaction(context, event) {\n  console.log(\"START TRAINING INTERACTION\");\n  var app = context.app;\n\n  var pass_along_context = {...pick(context, problem_props),\n                            ...pick(context.prob_obj, problem_props)}\n  // {\n  //   agent_id: context.agent_id,\n  //   interactive: context.interactive,\n  //   free_author: context.free_author\n  // };\n\n  var interactions_sm = context.interactions_sm.withContext({\n    ...context.interactions_sm.context,\n    ...pass_along_context\n  });\n  var interactions_service = interpret(interactions_sm);\n  context.app.interactions_service = interactions_service;\n  interactions_service.onTransition(app.onInteractionTransition);\n  interactions_service.start();\n}\n\nfunction allDone(context, event) {\n  var nl = context.network_layer;\n  console.log(\"ITS ALL DONE!\");\n  nl.kill_this(\"\\n TRAINING FINISHED SUCCESSFULLY! \\n\", \"info\");\n  // nl.term_print('\\x1b[0;30;47m' + \"TRAINING FINISHED SUCCESSFULLY!\" + '\\x1b[0m');\n}\n\nconst assignInteractionSM = assign({\n  interactions_sm: (context, event) => {\n    var new_context = {\n      ...{app: context.app},\n      ...pick(context,problem_props),\n      ...pick(context.prob_obj,problem_props),\n      ...event.data\n    };\n    console.log(\"assignInteractionSM\", new_context);\n    var sm = build_interactions_sm(\n      new_context.app,\n      new_context\n    );\n    return sm;\n  }\n});\n\n// function create_agent(context,event){\n// \tvar nl = context.network_layer;\n\n// \treturn nl.create_agent(context,event)\n\n// }\n\nexport function build_training_sm(app, interactions_sm) {\n  // interactions_state_machine,network_layer,training_file,tutor,working_dir\n  var nl = app.network_layer;\n  var context = {\n    //Utils\n    app: app,\n    tutor: app.tutor.current,\n    skill_panel: app.skill_panel.current,\n    buttons: app.buttons.current,\n    network_layer: app.network_layer,\n\n    //Inherited\n    interactive: app.props.interactive,\n    training_file: app.props.training_file,\n    working_dir: app.props.working_dir,\n    interactions_sm: interactions_sm,\n\n    //Dynamic\n    file_params: null,\n    agent_params: null,\n    prob_obj: null,\n    // free_author: null\n  };\n  \n  context = {...problem_props_dict,...context}\n\n\n  const sm = Machine(\n    {\n      context: context,\n      initial: \"Loading_Training_File\",\n      states: {\n        Loading_Training_File: {\n          invoke: {\n            id: \"load_training_file\",\n            src: \"load_training_file\",\n            onDone: {\n              target: \"Serving_Training_Sets\",\n              actions: \"updateContext\"\n            },\n            onError: { target: \"Fail\", actions: \"logError\" }\n          }\n        },\n        Serving_Training_Sets: {\n          invoke: {\n            id: \"serve_next_training_set\",\n            src: \"serve_next_training_set\",\n            onDone: [\n              { target: \"All_Done\", cond: \"iteratorEmpty\" },\n              { target: \"Serving_Agents\", actions: \"updateContext\" }\n            ],\n            onError: { target: \"Fail\", actions: \"logError\" }\n          }\n        },\n        Serving_Agents: {\n          invoke: {\n            id: \"serve_next_agent\",\n            src: \"serve_next_agent\",\n            onDone: [\n              { target: \"Serving_Training_Sets\", cond: \"iteratorEmpty\" },\n              { target: \"Creating_Agent\", actions: \"updateContext\" }\n            ],\n            onError: { target: \"Fail\", actions: \"logError\" }\n          }\n        },\n        Creating_Agent: {\n          invoke: {\n            id: \"create_agent\",\n            src: \"create_agent\",\n            onDone: {\n              target: \"Handling_Prior_Knowledge\",\n              actions: \"assignAgentId\"\n            },\n            onError: { target: \"Fail\", actions: \"logError\" }\n          }\n        },\n        Handling_Prior_Knowledge: {\n          invoke: {\n            id: \"handle_prior_knowledge\",\n            src: \"handle_prior_knowledge\",\n            onDone: { target: \"Serving_Problems\", actions: \"updateContext\" },\n            onError: { target: \"Fail\", actions: \"logError\" }\n          }\n        },\n        Serving_Problems: {\n          invoke: {\n            id: \"serve_next_problem\",\n            src: \"serve_next_problem\",\n            onDone: [\n              { target: \"Serving_Agents\", cond: \"iteratorEmpty\" },\n              { target: \"Waiting_Problem_Load\", actions: \"updateContext\" }\n            ],\n            onError: { target: \"Fail\", actions: \"logError\" }\n          }\n        },\n        Waiting_Problem_Load: {\n          invoke: {\n            id: \"load_problem\",\n            src: \"load_problem\",\n            onDone: { target: \"Training\", actions: \"updateContext\" },\n            onError: { target: \"Fail\", actions: \"logError\" }\n          }\n        },\n        Training: {\n          entry: \"start_training_interaction\",\n          on: {\n            PROBLEM_DONE: {\n              target : \"Serving_Problems\",\n              actions : \"sendProblemDone\",\n            },\n            CHANGE_INTERACTION_MODE: {\n              target: \"Serving_Problems\",\n              actions: \"assignInteractionSM\"\n            }\n          }\n          // invoke : {\n          // \tid: \"interactions_state_machine\",\n          // \tsrc: \"interactions_state_machine\",\n          // \tdata : (context, event) => ({...interactions_state_machine.context, ...{\"agent_id\": context.agent_id}}),\n          // \tonDone: \"Serving_Problems\",\n          // \tonError: {target :'Fail', actions : \"logError\"}\n          // },\n          // entry : send({type: \"ASSIGN_AGENT\", \"agent_id\" : agent_id})\n        },\n        All_Done: {\n          entry: \"allDone\",\n          type: \"final\"\n        },\n        Fail: {\n          entry: [\"logError\", \"kill_this\"]\n        }\n      }\n    },\n    {\n      services: {\n        load_training_file: load_training_file,\n        serve_next_training_set: serve_next_training_set,\n        serve_next_agent: serve_next_agent,\n        create_agent: nl.createAgent,\n        serve_next_problem: serve_next_problem,\n        load_problem: load_problem,\n        handle_prior_knowledge: handle_prior_knowledge\n\n        // interactions_state_machine : interactions_state_machine,\n      },\n      actions: {\n        start_training_interaction: start_training_interaction,\n        logError: (context, event) => {\n          console.error(event.data);\n        },\n        updateContext: assign((context, event) => {\n          return event.data.updateContext;\n        }),\n        assignAgentId: assign((context, event) => {\n          return { agent_id: event.data[\"agent_id\"] };\n        }),\n        allDone: allDone,\n        assignInteractionSM: assignInteractionSM,\n        sendProblemDone : sendProblemDone\n      },\n      guards: {\n        iteratorEmpty: iteratorEmpty\n      }\n    }\n  );\n\n  // console.log(\"JSON MACHINE\",sm)\n  return sm;\n}\n","import path from 'path'\n\nconst type_map = {\n\t\"bestintersect\" : applyBestInstersect\n}\n\n\nexport function applyPriorKnowledge(context,spec,iter){\n\tvar type = spec.type.toLowerCase().replace(\"_\", \"\")\n\treturn type_map[type](spec,iter)\n\n}\n\n\nfunction buildTransactionCache(){\n\n}\n\nfunction assertTransactionCache(){\n\n}\n\nasync function applyBestInstersect(context,spec,pk_iter){\n\t// var promise = new Promise((resolve, reject) => {\n\tvar cache_folder = spec[\"cache_folder\"] || (context.working_dir + \"/\" + \".pkcache\")\n\tvar cache = cache_folder + \"/\" + path.basename(context.training_file) + \".cache\"\n\tconsole.log(\"MOOOOOOOOO\", cache)\n\tvar cache_content = await fetch(cache)\n\t \t.then(function(response) {\n\t \t\tif (!response.ok) {\n\t            throw Error(response.statusText);\n\t        }\n\t        return response\n\t \t})\n\t\t.then((response) => response.text())\n\t\t.catch((error) => {return null})\n\n\tvar out\n\tif(cache_content == null || (false && \"should also check md5sum of agentobj &&\")) {\n\t\t//No Cached Data -- Building by sampling from problems \n\t\tout = { updateContext : \n\t\t\t\t{\n\t\t\t\t\tprior_knowledge : [spec] + pk_iter,\n\t\t\t\t\tproblem_iterator : [] //?\n\t\t\t\t},\n\t\t\t\ttrain_now : true\n\t\t\t  }\n\t}else{\n\t\t//Cached Data Exists -- Training by \n\t\tout = { updateContext : \n\t\t\t\t{\n\t\t\t\t\tprior_knowledge : pk_iter,\n\t\t\t\t\tproblem_iterator : [] //?\n\t\t\t\t},\n\t\t\t\ttrain_now : true\n\t\t\t  }\n\t}\n\n\treturn out\n\n\n\t// }\n\n}","import {Random} from \"random-js\"\nimport papa from \"papaparse\"\nimport path from \"path\"\nconst random = new Random()\n\n\nexport var registedFunctions = {\n\t\"concatenate\" : concatenate,\n\t\"shuffle\" : shuffle,\n\t\"sample\" : sample,\n\t\"glob\" : glob,\n\t\"from_file\" : from_file,\n\t\"estimate_Pik\" : estimate_Pik,\n\t\"gen_pretraining\" : gen_pretraining,\n\t'gen_pivot_table' : gen_pivot_table,\n\t'mirror_students' : mirror_students\n}\n\nfunction abs_path(p,context){\n\tif(p[0] != \"/\"){\n\t\tp = context.working_dir + \"/\" + p\n\t}\n\treturn p\n}\n\nasync function concatenate(args, context){\n\tvar all = []\n\tfor(var g of args){\n\t\tvar rez = await evalJSONFunc(g,context)\n\t\tall = all.concat(rez)\n\t}\n\treturn all\n}\n\nasync function shuffle(args,context){\n\tvar rez = await evalJSONFunc(args,context)\n\treturn random.shuffle(rez)\n}\n\nasync function sample(args,context){\n\tvar n = args['n']\n\t//TODO: Implement -> var w_repl = val['with_replacement'] || false\n\tvar set = args['set']\n\tset = await evalJSONFunc(set,context)\n\tconsole.log(\"IT IS THIS BIG:\", set.length)\n\treturn random.sample(set, n)\n}\n\nasync function glob(args,context){\n\tif(typeof(args) == 'string'){\n\t\targs = {'pattern' : args}\n\t}\n\tvar glob_key = args['key'] || null\n\tvar pattern = args['pattern']\n\tvar matches = await context.network_layer.glob(pattern,context)\n\tif(glob_key || args['obj_template']){\n\t\tvar default_obj = args['obj_template'] || {}\n\t\tmatches = matches.map(m => {var o = {...default_obj}; o[glob_key]=\"/\"+m; return o})\t\n\t}else{\n\t\tmatches = matches.map(m => \"/\"+m)\n\t}\n\treturn matches\n}\n\nasync function from_file(args,context){\n\tthrow \"Not Implemented\"\n}\n\n\n//------------------PRIOR KNOWLEDGE STUFF------------------------\n\nasync function backcast(args,context){\n\n}\n\nfunction p_parse_csv(csv,config={},pre_fetch=false, is_path=true){\n\tif(is_path){csv = csv.replace(/\\.\\./g,\"!u\")}\n\tvar promise = new Promise(async function(resolve, reject) {\n\t\tconfig['complete'] = resolve\n\t\tif(pre_fetch){\n\t\t\tcsv = await fetch(csv).then(resp => resp.text())\n\t\t}\n\t\tpapa.parse(csv, config)\n\t})\n\treturn promise\n}\n\n\nasync function read_afm_table(file){\n\t// var promise = new Promise(async function(resolve, reject) {\n\tvar config = {\n\t\tdelimiter: \"\\t\",\n\t\theader: true,\n\t\tdynamicTyping: true\n\t}\n\tfile = file.replace(\"..\",\"!u\")\n\tvar promise = fetch(file)\n\t.then(resp => resp.text())\n\t.then((text) => {\n\t\tvar split = text.split(/\\n{2,}/g);\n\t\tvar kc_table = split[0].split(/Values for .* model.*\\n/)[1]\n\t\tvar student_table = split[1].split(\"in the selected KC model.\\n\")[1]\n\t\t// console.log(\"split\")\n\t\t// console.log(split)\n\t\t// console.log(kc_table)\n\t\t// console.log(student_table)\n\t\treturn [kc_table,student_table]\n\t})\n\t.then(async ([kc_table,stu_table]) => {\n\t\tvar kc_json = await p_parse_csv(kc_table, config,false,false)\n\t\tvar stu_json = await p_parse_csv(stu_table, config,false,false)\n\t\treturn [kc_json,stu_json]\n\t})\n    return promise\n}\n\nasync function exact_align(args,context){\n\tvar fo_err_by_kc\n\tif(args['fo_err_by_kc'] == null){\n\t\t// console.log(\"afm_stats\")\n\t\tvar [kc_json,stu_json] = await read_afm_table(abs_path(args['afm_stats'],context))\n\t\t// console.log(stu_json)\n\t\tvar stu_intr = stu_json.data.filter((x)=> x[\"Anon Student Id\"] == args['student_id'])[0][\"Intercept\"]\n\n\t\tfo_err_by_kc = {}\n\t\tfor(var row of kc_json.data){\n\t\t\tvar prob = 1.0/(1.0+Math.exp((stu_intr + row['Intercept (logit)'])))\n\t\t\tfo_err_by_kc[row['KC Name']] = prob\n\t\t}\n\t\t// console.log(fo_err_by_kc)\n\t}\n\tfo_err_by_kc = fo_err_by_kc || args['fo_err_by_kc']\n\n\tvar table_path = abs_path(args['error_table'],context)\n\t// console.log(\"table_path\")\n\t// console.log(table_path)\n\tvar error_table = await p_parse_csv(table_path, { delimiter: \"\\t\",header: true, dynamicTyping: true},true)\n\t// console.log(\"error_table\")\n\t// console.log(error_table)\n\tvar curve_by_kc = {}\n\t for (var r of error_table.data){\n\t\tvar key = r[\"KC Name\"]\n\t\tif(key){\n\t\t\tdelete r[\"KC Name\"]\n\t\t\tcurve_by_kc[key] = Object.values(r)\n\t\t}\n\t}\n\t// console.log(\"curve_by_kc\")\n\t// console.log(curve_by_kc)\n\tvar opps_by_kc = {}\n\tfor(var kc in curve_by_kc){\n\t\tvar curve = curve_by_kc[kc]\n\t\tvar min = Infinity;\n\t\tvar minIndex;\n\t\tvar y = fo_err_by_kc[kc]\n\n\t\t//Always round up\n\t\tfor(const [i,x] of curve.entries()){\n\t\t\tvar diff = y-x\n\t\t\tif(diff < min && diff > 0){\n\t\t\t\tmin = diff\n\t\t\t\tminIndex = i\n\t\t\t}\n\t\t}\n\t\topps_by_kc[kc] = minIndex\n\t}\n\n\t// console.log(\"opps_by_kc\")\n\t// console.log(opps_by_kc)\n\treturn opps_by_kc\n\t\n}\n\nasync function estimate_Pik(args,context){\n\t// console.log(\"ESTIMATE_PIK\")\n\tvar out;\n\tif(args['method'] == \"exact_align\"){\n\t\tout = await exact_align(args,context)\n\t}else if(args['method'] == \"backcast\"){\n\t\tout = await backcast(args,context)\n\t}\n\t// console.log(args['KCs'])\n\t// console.log(\"BEFORE\")\n\t// console.log({...out})\n\tif('KCs' in args && args['KCs'] != null){\n\t\tvar new_out = {}\n\t\tfor (var key of args['KCs']) {\n\t\t\tnew_out[key] = out[key]\n\t\t}\n\t\tout = new_out\n\t}\n\t// console.log(\"AFTER\")\n\t// console.log({...out})\n\tif('max' in args && args['max'] != null){\n\t\tfor (var key in out) {\n\t\t\tout[key] = Math.min(out[key],args['max']);\n\t\t}\n\t}\n\n\treturn out\n}\n\nasync function gen_pretraining(args,context,shuffle=false){\n\t//Get the number of opportunities for each KC\n\tvar opps_by_kc = await evalJSONFunc(args['opportunities'],context)\n\tvar only_attr = args['by_step_id'] || false ? \"step_id\" : \"Selection\" \n\tvar only_str = \"only_\" + only_attr + \"s\"\n\t// console.log(\"opps_by_kc\")\n\t// console.log(opps_by_kc)\n\topps_by_kc = {...opps_by_kc}\n\n\t\n\tvar pivot_table\n\tif(typeof(args['step_pivot_table']) == \"string\"){\n\t\talert(\"NOT IMPLEMENTED\")\n\t\t// pivot_table = await p_parse_csv(abs_path(args['step_pivot_table'],context),\n\t\t// { delimiter: \"\\t\",header: true, dynamicTyping: true},true)\t\n\t}else{\n\t\tpivot_table = await evalJSONFunc(args['step_pivot_table'],context)\n\t}\n\t\n\t\n\t// console.log(\"pivot_table\")\n\t// console.log(pivot_table)\n\n\tvar problem_pool = Object.keys(pivot_table)\n\tif(shuffle){problem_pool = random.shuffle(problem_pool)}\n\tvar out = []\n\n\t// console.log(\"problem_pool\")\n\t// console.log(problem_pool)\n\t\n\t//Not really a core feature, just necessary for this tutor\n\tvar onlys_map = args['onlys_map'] || null\n\n\t//For all problems add to problem set if any kc needs more practice. \n\t//\t If not all KCs need practice only train KCs that need practice.\n\tfor(var p of problem_pool){\n\t\tvar all=true\n\t\tvar any=false\n\t\tvar only_steps = []\n\t\tvar prob = pivot_table[p]\n\t\tfor(var kc in prob){\n\t\t\tif(opps_by_kc[kc] > 0){\n\t\t\t\topps_by_kc[kc] -= 1\n\t\t\t\tvar steps = prob[kc][only_attr]\n\t\t\t\tsteps = Array.from(steps)\n\t\t\t\tif(onlys_map){\n\t\t\t\t\tsteps = steps.map(x => onlys_map[x])\n\t\t\t\t}\n\t\t\t\tif(steps.length==1){steps = steps[0]}\n\t\t\t\tonly_steps.push(steps)\n\t\t\t\tany=true\n\t\t\t}else{\n\t\t\t\tall=false\n\t\t\t}\n\t\t}\n\n\t\t\n\t\tif(any){\n\t\t\tvar o = {}\n\t\t\to[args['problem_key']] = p\n\t\t\tif(!all){o[only_str] = only_steps}\n\t\t\tout.push(o)\n\t\t}\n\t}\n\n\t//Throw an error if there weren't enough problems\n\tif(Object.values(opps_by_kc).reduce((a,b) => a + b, 0) > 0){\n\t\tvar error = \"Insufficient problems in problem_pool to pretrain requested number of steps. \" + \n\t\t\t\"Additional problems required for KCs/Steps: \" + JSON.stringify(opps_by_kc)\n\t\tcontext.network_layer.kill_this(error)\n\t\tconsole.error(error)\n\t}\n\n\t// console.log(\"gen_pretraining\")\n\t// console.log(out)\n\n\tconsole.log(\"opps_by_kc\")\n\tconsole.log(opps_by_kc)\n\treturn out\n}\n\nasync function mirror_students(args,context){\n\tconsole.log(\"MIRROR_START\")\n\tvar human_transactions = abs_path(args['human_transactions'],context)\n\t\n\tvar human_afm_stats = args['human_afm_stats']\n\tvar pool_agent_error_table = args['pool_agent_error_table']\n\tvar Pik_method = args['Pik_method']\n\tvar problem_key = args['problem_key']\n\tvar kc_model = args['kc_model']\n\tvar KCs = args['KCs']\n\tvar maximum = args['max']\n\tvar human_problems = await evalJSONFunc(args['human_problems'],context)\n\tvar human_path_map = {}\n\tfor(var p of human_problems){\n\t\thuman_path_map[path.basename(p).split(\".\")[0]] = p\n\t}\t\n\n\tif('step_pivot_table' in args){\n\t\tvar step_pivot_table = await evalJSONFunc(args['step_pivot_table'],context)\n\t}else{\n\t\tvar pool_agent_problems = await evalJSONFunc(args['pool_agent_problems'],context)\n\t\tvar step_pivot_table = {\"gen_pivot_table\" : {\n\t\t\t\"transaction_file\" : args['pool_agent_transactions'],\n          \t\"problem_pool\" : pool_agent_problems,\n          \t\"kc_model\" : args['kc_model']\n\t\t  }\n\t\t}\n\t\tstep_pivot_table = await evalJSONFunc(step_pivot_table,context)\n\t}\n\n\t\n\n\t\n\n\t\n\tvar human_prob_seq = {}\n\t// var buggy_students = new Set()\n\tvar config = {\n\t\tdynamicTyping: true,\n\t\tdelimiter: \"\\t\",\n\t\theader : true,\n\t\tdownload : true,\n\t\tstep : function (row){\n\t\t\tvar row = row.data\n\t\t\tif(row && 'Anon Student Id' in row){\n\t\t\t\tvar sequence = human_prob_seq[row['Anon Student Id']] || []\n\t\t\t\tvar prob = row['Problem Name'] || \"\"\n\t\t\t\tvar view = row['Problem View'] || \"\"\n\t\t\t\tif(prob != \"\"){\n\t\t\t\t\tvar pv = String(prob) + \"#\"+ String(view)\n\t\t\t\t\tif(sequence.length == 0){\n\t\t\t\t\t\tsequence.push(pv)\n\t\t\t\t\t}else if(!sequence.includes(pv)){\n\t\t\t\t\t\t// if(sequence.includes(pv)){\n\t\t\t\t\t\t// \tconsole.log(\"BUGGY\")\n\t\t\t\t\t\t// \tconsole.log(pv,[...sequence])\n\t\t\t\t\t\t// \t// buggy_students.add(row['Anon Student Id'])\n\t\t\t\t\t\t// }\n\t\t\t\t\t\tsequence.push(pv)\t\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\thuman_prob_seq[row['Anon Student Id']] = sequence\n\t\t\t}\n\t\t}\n\t}\n\n\n\t//Run the 'step' function specified above line by line-by-line to find the problem sequences.\n\tvar url = context.network_layer.HOST_URL + human_transactions\n\t// console.log(\"human transactions\")\n\t// console.log(url)\n\n\tvar nothing = await p_parse_csv(url,config,false)\n\n\t// console.log(\"CRAFF\")\n\t// console.log(human_prob_seq)\n\t// console.log(buggy_students)\n\t// for(var std of buggy_students){\n\t// \tvar text = \"Will Skip Student \" + std + \". Multiple problems done concurrently.\"\n\t// \tconsole.warn(text)\n\t// \tcontext.network_layer.term_print(text,'warning')\n\t// \tdelete human_prob_seq[std]\n\t// }\n\tconsole.log(\"BEEE\")\n\tconsole.log(human_prob_seq)\n\t//Strip out view numbers\n\tfor(var std in human_prob_seq){\n\t\thuman_prob_seq[std] = human_prob_seq[std].map(x => x.substring(0, x.lastIndexOf(\"#\")))\n\t}\n\tconsole.log(\"AFFFF\")\n\tconsole.log(human_prob_seq)\n\n\n\tconsole.log(\"human_prob_seq\")\n\tconsole.log(human_prob_seq)\n\n\tconsole.log(\"human_path_map\")\n\tconsole.log(human_path_map)\n\n\t// Turn the problem names from the student transactions into paths\n\tfor(var student in human_prob_seq){\n\t\tvar seq = human_prob_seq[student]\n\t\tvar new_seq = []\n\t\tfor(var prob of seq){\n\t\t\tvar full_path = human_path_map[prob]\n\t\t\tif(full_path){\n\t\t\t\tvar o = {}\n\t\t\t\to[problem_key] = full_path\n\t\t\t\tnew_seq.push(o)\n\t\t\t}\n\t\t}\n\t\thuman_prob_seq[student] = new_seq\n\t}\n\n\tvar out = []\n\tif('store_opp_table' in args){\n\t\tvar opp_table = []\n\t}\n\n\tconsole.log(\"full_paths\")\n\tconsole.log(human_prob_seq)\n\tfor(var student_id in human_prob_seq){\n\t\tvar stu_seq = human_prob_seq[student_id]\n\t\tif(stu_seq.length > 0){\n\t\t\tvar opps_by_kc = {\"estimate_Pik\" :{\n\t\t              \"method\" : Pik_method,\n\t\t              \"afm_stats\" : human_afm_stats,\n\t\t              \"student_id\" : student_id,\n\t\t              \"error_table\" : pool_agent_error_table,\n\t\t              \"KCs\" : KCs,\n\t\t              \"max\" : maximum,\n\t\t              }\n\t\t            }\n\t\t    opps_by_kc = await evalJSONFunc(opps_by_kc,context)\n\n\t\t    //Just for debugging\n\t\t    if('store_opp_table' in args){\n\t\t    \tvar o = {}\n\t\t    \to['Anon Student Id'] = student_id\n\t\t    \tfor(var kc in opps_by_kc){\n\t\t    \t\to[kc] = opps_by_kc[kc]\n\t\t    \t}\n\t\t    \topp_table.push(o)\n\t\t    }\n\n\t\t\tvar pretraining = {\"gen_pretraining\" : \n\t\t\t\t{\"opportunities\" : opps_by_kc,\n\t\t\t\t\t// {\"estimate_Pik\" :{\n\t\t   //            \"method\" : Pik_method,\n\t\t   //            \"afm_stats\" : human_afm_stats,\n\t\t   //            \"student_id\" : student_id,\n\t\t   //            \"error_table\" : pool_agent_error_table,\n\t\t   //            \"KCs\" : KCs,\n\t\t   //            \"max\" : maximum,\n\t\t   //            }\n\t\t   //          },\n\t            \"step_pivot_table\" : step_pivot_table,\n\t            \"problem_key\" : problem_key,\n\t            \"kc_model\" : kc_model,\n\t            \"onlys_map\" : args[\"onlys_map\"] || null\n\t\t        }\n\t\t\t}\n\t\t\tpretraining = await evalJSONFunc(pretraining,context)\n\n\t\t\tvar d1 = {\"set_params\": {\n\t\t\t\t\"domain_name\" : 'prior_knowledge'\n\t\t\t}}\n\t\t\tvar d2 = {\"set_params\": {\n\t\t\t\t\"domain_name\" : undefined\n\t\t\t}}\n\t\t\n\t\t\tvar cat_list = [d1,pretraining,d2,stu_seq]\n\n\t\t\tvar agent_obj = {\n\t\t\t\t\"agent_name\" : student_id,\n\t\t\t\t\"problem_set\" : {\"concatenate\" : cat_list}\n\t\t\t}\n\t\t\tout.push(agent_obj)\t\n\t\t}else{\n\t\t\tvar text = \"Will Skip Student \" + student_id + \"because did not do any problems.\"\n\t\t\tconsole.warn(text)\n\t\t\tcontext.network_layer.term_print(text,'warning')\n\t\t}\n\t\t\n\t}\n\n\tif('store_opp_table' in args){\n\t\tvar csv = papa.unparse(opp_table,{delimiter: \"\\t\"})\n\t\tconsole.log(\"OUT CSV\")\n\t\tconsole.log(csv)\n\t}\n\tconsole.log(\"out\")\n\tconsole.log(out)\n\n\treturn out\n\n\n\n\n\n}\n\nasync function gen_pivot_table(args,context){\n\tvar pivot_table\n\n\t//If cache location speficied just read from the cache\n\tif(\"cache\" in args){\n\t\tvar pivot_table_csv = await p_parse_csv(abs_path(args['cache'],context))\n\t\tpivot_table = {}\n\t\tfor(var row of pivot_table_csv){\n\t\t\tpivot_table[row['Problem Path']] = pivot_table[row['Problem Path']] || {}\n\t\t\tpivot_table[row['Problem Path']][row['KC']][\"step_id\"] = row['step_id'].split(\",\")\n\t\t\tpivot_table[row['Problem Path']][row['KC']][\"Selection\"] = row['Selection'].split(\",\")\n\t\t}\n\t}\n\tif(pivot_table == null){\n\t\tvar transaction_file = abs_path(args['transaction_file'],context)\n\t\tvar problem_pool = await evalJSONFunc(args['problem_pool'],context)\n\t\tvar path_map = {}\n\t\tfor(var p of problem_pool){\n\t\t\tpath_map[path.basename(p).split(\".\")[0]] = p\n\t\t}\n\t\t\n\t\t//Get the column in the transaction file for the specified KC model.\n\t\tvar kc_model_id = args['kc_model'] || null\n\t\tkc_model_id = kc_model_id != null ? 'KC ('+kc_model_id+')' : \"Step Name\" \n\t\t\n\t\t//Read the transaction file on line at a time\n\t\tpivot_table = {}\n\t\tvar config = {\n\t\t\tdynamicTyping: true,\n\t\t\tdelimiter: \"\\t\",\n\t\t\theader : true,\n\t\t\tdownload : true,\n\t\t\tstep : function (row){\n\t\t\t\trow = row.data\n\t\t\t\t// console.log(\"row\", row)\n\t\t\t\t//Only record CORRECT steps (because others could be out of graph)\n\t\t\t\tif(row['Outcome'] === \"CORRECT\"){\n\t\t\t\t\tvar p = path_map[row['Problem Name']] || null\n\t\t\t\t\tif(p != null){\n\n\t\t\t\t\t\t//Fill the pivot table Problem Path, KC, Step id\n\t\t\t\t\t\tif(!(p in pivot_table)){\n\t\t\t\t\t\t\tpivot_table[p] = {}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar kc_str = row[kc_model_id]\n\t\t\t\t\t\tif(kc_str){\n\t\t\t\t\t\t\tif(!(kc_str in pivot_table[p])){\n\t\t\t\t\t\t\t\tpivot_table[p][kc_str] = {\"step_id\": new Set(), \"Selection\": new Set()}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar step_id_set = pivot_table[p][kc_str]\n\t\t\t\t\t\t\tstep_id_set['step_id'].add(row['CF (step_id)'])\n\t\t\t\t\t\t\tstep_id_set['Selection'].add(row['Selection'])\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t//Run the 'step' function specified above line by line-by-line to make the table.\n\t\tvar url = context.network_layer.HOST_URL + transaction_file\n\t\tvar nothing = await p_parse_csv(url,config,false)\n\n\t\t//If cache location specified cache the pivot table\n\t\tif(\"cache\" in args){\n\t\t\tvar csv = []\n\t\t\tfor(var prob in pivot_table){\n\t\t\t\tvar kc_table = pivot_table[prob]\n\t\t\t\tfor(var kc in kc_table){\n\t\t\t\t\tcsv.append({\"Problem Path\" : prob, \"KC\" : kc,\n\t\t\t\t\t\t \"step_id\": kc_table[kc]['step_id'].join(\",\"),\n\t\t\t\t\t\t \"Selection\": kc_table[kc]['Selection'].join(\",\")})\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tvar csv_str = papa.unparse(csv,{delimiter: \"\\t\", header:true, 'newline':'\\n'})\n\t\t\tcontext.network_layer.write_file(abs_path(args['cache'],context), csv_str)\n\t\t}\n\t\treturn pivot_table\n\t}\n}\n\nexport async function evalString(){\n\tthrow \"Not Implemented\"\n}\n\nexport async function evalJSONFunc(spec, context){\n\tif(Array.isArray(spec)){\n\t\treturn [...spec]\n\t}else if(typeof(spec) === 'object'){\n\t\tspec = {...spec};\n\n\t\tvar key = Object.keys(spec)[0];\n\t\tvar val = spec[key]\n\t\tif(key in registedFunctions){\n\t\t\treturn await registedFunctions[key](val,context)\n\t\t}else{\t\n\t\t\treturn spec\n\t\t}\n\t}else{\n\t\treturn spec\n\t}\n}\n\n// export async function evalFunc(name,args,context){\n// \tif(name in registedFunctions){\n// \t\treturn await registedFunctions[name](args,context)\n// \t}else{\t\n// \t\tthrow \"Function \" + name + \" is not a registed function.\"\n// \t}\n// }","import autobind from \"class-autobind\";\nconst AL_RETRY_LIMIT = 3;\nconst TIMEOUT = 100;\n\n// var $ = require('jquery');\n\n// var fetch = require(\"node-fetch\");\n\nfunction sleep(time) {\n  return new Promise(resolve => setTimeout(resolve, time));\n}\n\nfunction ignoreKeys(key, value) {\n  if (key == \"matches\") return undefined;\n  else return value;\n}\n\nasync function wait(ms) {\n  return new Promise(resolve => {\n    setTimeout(resolve, ms);\n  });\n}\n\n//https://dev.to/ycmjason/javascript-fetch-retry-upon-failure-3p6g\nconst fetch_retry = async (\n  url,\n  options,\n  n = AL_RETRY_LIMIT,\n  t = TIMEOUT,\n  exp = true\n) => {\n  for (let i = 0; i < n; i++) {\n    try {\n      return await fetch(url, options);\n    } catch (err) {\n      console.log(\"AL ERROR Retrying\", err);\n      const isLastAttempt = i + 1 === n;\n      if (isLastAttempt) throw err;\n      console.log(\"waiting\", exp ? t * Math.pow(2, i) : t);\n      await wait(exp ? t * Math.pow(2, i) : t);\n    }\n  }\n};\n\nconst JSON_HEADERS = {\n  Accept: \"application/json\",\n  \"Content-Type\": \"application/json\"\n};\n\nexport default class NetworkLayer {\n  constructor(AL_URL, HOST_URL, OUTER_LOOP_URL) {\n    this.AL_URL = AL_URL;\n    this.HOST_URL = HOST_URL;\n    this.OUTER_LOOP_URL = OUTER_LOOP_URL;\n    this.request_history = [];\n    autobind(this);\n    // this.createAgent = this.createAgent.bind(this)\n    // this.sendFeedback = this.sendFeedback.bind(this)\n    // this.sendTrainingData = this.sendTrainingData.bind(this)\n    // this.queryApprentice = this.queryApprentice.bind(this)\n    // this.term_print = this.term_print.bind(this)\n    // this.kill_this = this.kill_this.bind(this)\n  }\n\n  createAgent(context, event) {\n    this.term_print(\"Creating Agent: \" + context.agent_name, \"INFO\");\n    var data = {\n      name: context.agent_name,\n      agent_type: context.agent_type,\n      project_id: context.project_id\n    };\n    data = { ...context.other_agent_data, ...data };\n\n    console.log(this.AL_URL + \"/create/\");\n\n    this.request_history = [];\n    return fetch_retry(\n      this.AL_URL + \"/create/\",\n      { method: \"POST\", headers: JSON_HEADERS, body: JSON.stringify(data) },\n      6,\n      1000,\n    ).then(res => res.json());\n  }\n\n  sendFeedback(context, event) {\n    console.log(\"sendFeedback\");\n    if (context.staged_SAI === null) {\n      console.error(\"cannot give feedback on no action.\");\n    }\n\n    const skill_applications = context.skill_applications;\n    const feedback_map = context.feedback_map;\n\n    var out = null;\n    if (feedback_map && Object.keys(feedback_map).length > 0) {\n      out = new Promise()\n      // var skill_applications_subset = []\n      // var rewards = []\n      var d_list = [];\n      for (var index in feedback_map) {\n        var skill_app = skill_applications[index];\n        // skill_applications_subset.push({\n        var data = {\n          state: context.state,\n\t  next_state: context.tutor.getState(),\n          selection: skill_app[\"selection\"],\n          action: skill_app[\"action\"],\n          inputs: skill_app[\"inputs\"],\n          foci_of_attention: skill_app[\"foci_of_attention\"],\n          rhs_id: skill_app[\"rhs_id\"],\n          mapping: skill_app[\"mapping\"],\n          reward: feedback_map[index].toLowerCase() == \"correct\" ? 1 : -1\n        };\n        if (context.interactive) {\n          data[\"add_skill_info\"] = true;\n        }\n        // if(out == null){\n        //   out = this.sendTrainingData(d_list, context.agent_id);\n        // }else{\n\n        // }\n\n        // d_list.push(data);\n        // if(out != null){\n        out = out.then((resp)=>this.sendTrainingData(data,context.agent_id))\n\n        console.log(\"BLEEP\",this.OUTER_LOOP_URL, context.outer_loop_controller)\n        if(this.OUTER_LOOP_URL){\n          out = out.then((resp)=>\n            this.updateOuterLoopController(data, context)\n          )\n        }\n        \t\t // .then(()=>sleep(10))\n        // }else{\n        // \tout = this.sendTrainingData(data,context.agent_id)\n        // }\n      }\n      // out = this.sendTrainingData(d_list, context.agent_id);\n\n      // if(data.reward == null && context.reward != null){\n      // \tdata.reward = context.reward\n      // }\n    } else {\n      var skill_app = context.staged_SAI;\n      var data = {\n        state: context.state,\n\tnext_state: context.tutor.getState(),\n        selection: skill_app[\"selection\"],\n        action: skill_app[\"action\"],\n        inputs: skill_app[\"inputs\"],\n        foci_of_attention: skill_app[\"foci_of_attention\"],\n        rhs_id: skill_app[\"rhs_id\"],\n        mapping: skill_app[\"mapping\"],\n        reward: skill_app[\"reward\"]\n      };\n      if (context.interactive) {\n        data[\"add_skill_info\"] = true;\n      }\n      out = this.sendTrainingData(data, context.agent_id);\n      console.log(\"BLEEP\",this.OUTER_LOOP_URL, context)\n      if(this.OUTER_LOOP_URL && context.outer_loop_controller){\n        out = out.then((resp)=>\n          this.updateOuterLoopController(data, context)\n        )\n      }\n    }\n\n    return out;\n  }\n\n\n  sendTrainingData(data, agent_id) {\n    console.log(\"sendTrainingData\");\n    // console.log(\"SAI: \", sai_data)\n\n    // loggingLibrary.logResponse (transactionID,\"textinput1\",\"UpdateTextField\",\"Hello World\",\"RESULT\",\"CORRECT\",\"You got it!\");\n    // console.log(sai_data)\n    const URL = this.AL_URL + \"/train/\" + agent_id + \"/\";\n    return fetch_retry(URL, {\n      method: \"POST\",\n      headers: JSON_HEADERS,\n      body: JSON.stringify(data, ignoreKeys)\n    })\n      .then(response => response.text())\n      .then(text => {\n        try {\n          const data = JSON.parse(text);\n          return data;\n          // Do your JSON handling here\n        } catch (err) {\n          return {};\n          // It is text, do you text handling here\n        }\n      });\n\n\n  }\n\n  queryApprentice(context, event) {\n    console.log(\"queryApprentice\");\n\n    var data = {\n      state: context.state\n    };\n    if (context.interactive) {\n      data[\"kwargs\"] = { add_skill_info: true, n: 0 };\n    }\n\n    this.request_history.push(data);\n\n    const URL = this.AL_URL + \"/request/\" + context.agent_id + \"/\";\n\n    return fetch_retry(URL, {\n      method: \"POST\",\n      headers: JSON_HEADERS,\n      body: JSON.stringify(data)\n    }).then(res => res.json());\n  }\n\n  checkApprentice(context, event) {\n    console.log(\"checkApprentice\");\n\n    var data = {\n      state: context.state,\n      ...context.staged_SAI\n    };\n\n    const URL = this.AL_URL + \"/check/\" + context.agent_id + \"/\";\n\n    return fetch_retry(URL, {\n      method: \"POST\",\n      headers: JSON_HEADERS,\n      body: JSON.stringify(data)\n    })\n      .then(res => res.json())\n      .then(json => +json[\"reward\"]);\n  }\n\n  term_print(message, type = \"default\") {\n    var data = { message: message, type: type };\n    return fetch_retry(this.HOST_URL, {\n      method: \"PRINT\",\n      headers: JSON_HEADERS,\n      body: JSON.stringify(data)\n    });\n  }\n\n  kill_this(message, type = \"error\") {\n    var data = { message: message, type: type };\n    return fetch_retry(this.HOST_URL, {\n      method: \"QUIT\",\n      headers: JSON_HEADERS,\n      body: JSON.stringify(data)\n    });\n  }\n\n  write_file(file, data) {\n    var data = {\n      file: file,\n      data: data\n    };\n    return fetch_retry(this.HOST_URL, {\n      method: \"WRITE\",\n      headers: JSON_HEADERS,\n      body: JSON.stringify(data)\n    });\n  }\n\n  sendProblemDone(context,event){\n    //NOT YET IMPLEMENTED -- Might not need to\n    // var data = {}\n    // return fetch_retry(this.HOST_URL, {\n    //   method: \"PROBLEM_DONE\",\n    //   headers: JSON_HEADERS,\n    //   body: JSON.stringify(data, ignoreKeys)\n    // })\n  }\n\n  generate_nools(context, event) {\n    const URL = this.AL_URL + \"/get_skills/\" + context.agent_id + \"/\";\n    var data = { states: this.request_history.map(x => x[\"state\"]) };\n    return fetch_retry(URL, {\n      method: \"POST\",\n      headers: JSON_HEADERS,\n      body: JSON.stringify(data, ignoreKeys)\n    })\n      .then(res => res.json())\n      .then(json => {\n        console.log(\"NOOLS DIR: \", context.nools_dir);\n        var out_data = {\n          nools_dir: context.nools_dir,\n          problems: context.start_state_history,\n          skills: json\n        };\n        return fetch(this.HOST_URL, {\n          method: \"GEN_NOOLS\",\n          headers: JSON_HEADERS,\n          body: JSON.stringify(out_data, ignoreKeys)\n        });\n      });\n  }\n\n  \n\n  generateBehaviorProfile(context, event = {}) {\n    // data = {'states':request_history.map(x => x['state'])}\n    // console.log(JSON.stringify(data))\n\n    // requests = request_history\n    event.data = event.data || {};\n    var requests = event.data.requests || this.request_history;\n    var dir = event.data.out_dir || (context.working_dir || \".\") + \"/bprofiles\";\n    var HOST_URL = this.HOST_URL;\n    var AL_URL = this.AL_URL;\n    // requests = ground_truth_requests\n\n    // console.log(nools_dir)\n    var now = new Date();\n    var elapse =\n      (((now - context.agent_start_time) % 86400000) % 3600000) / 60000;\n    var start_data = { dir: dir, elapse_minutes: elapse.toFixed(1) };\n\n    var promise = fetch(HOST_URL, {\n      method: \"START_BEHAVIOR_PROFILE\",\n      headers: JSON_HEADERS,\n      body: JSON.stringify(start_data)\n    }).then(async function(whatever) {\n      for (let item of requests) {\n        // requests.forEach(function (item, index) {\n        var s = item[\"state\"];\n        var data = {\n          state: s,\n          kwargs: { add_skill_info: true, n: -1 }\n        };\n        var resp = await fetch_retry(\n          AL_URL + \"/request/\" + context.agent_id + \"/\",\n          {\n            method: \"POST\",\n            headers: JSON_HEADERS,\n            body: JSON.stringify(data)\n          }\n        ).then(res => res.json());\n\n        var responses = [];\n        if (\"responses\" in resp) {\n          resp[\"responses\"].forEach(function(r, index) {\n            var sai = {\n              selection: r[\"selection\"],\n              action: r[\"action\"],\n              inputs: r[\"inputs\"]\n            };\n            console.log(r);\n            console.log(r[\"selection\"]);\n            responses.push(sai);\n          });\n        }\n        var completeness_data = {\n          state: s,\n          responses: responses,\n          dir: dir\n        };\n        await fetch(HOST_URL, {\n          method: \"APPEND_BEHAVIOR_PROFILE\",\n          headers: JSON_HEADERS,\n          body: JSON.stringify(completeness_data)\n        });\n      }\n    });\n    return promise;\n  }\n\n  newOuterLoopController(controller, context) {\n    var data = {\n      outer_loop_type: controller[\"type\"] || controller[\"outer_loop_type\"],\n      problem_set: controller[\"problem_set\"],\n      outer_loop_args: controller[\"args\"] || controller[\"outer_loop_args\"],\n      id: context.agent_id\n    };\n\n\n\n    console.log(this.OUTER_LOOP_URL);\n    console.log(\"outer loop data:\", data);\n    console.log(\"outer loop context:\", context);\n    var out = fetch(this.OUTER_LOOP_URL, {\n      method: \"NEW_STUDENT\",\n      headers: JSON_HEADERS,\n      body: JSON.stringify(data)\n    }).then(res => {});\n    \n    return out;\n  }\n\n  updateOuterLoopController(data, context){\n    // console.log(\"UPDATE OUTER LOOP\",controller, data, context)\n    var update_data = {\n      selection : data['selection'],\n      reward : data['reward'],\n      action_type : context.action_type,\n    }\n    return fetch_retry(this.OUTER_LOOP_URL, {\n      method: \"POST\",\n      headers: JSON_HEADERS,\n      body: JSON.stringify(update_data)\n    })\n    // console.log('sel', data['selection'])\n    // console.log('reward', data['reward'])\n    // console.log('action_type', context.action_type)\n    // console.log('problem_name', context.tutor.getProblemName() || null)\n\n  }\n\n  nextProblem(controller, context) {\n    var data = {\n      id: context.agent_id\n    };\n\n    var out = fetch(this.OUTER_LOOP_URL, {\n      method: \"NEXT_PROBLEM\",\n      headers: JSON_HEADERS,\n      body: JSON.stringify(data)\n    }).then(res => res.json());\n    return out;\n  }\n\n  glob(path, context) {\n    path = path.replace(/\\.\\./g,\"!u\")\n    if (path[0] != \"/\") {\n      path = context.working_dir + \"/\" + path;\n    }\n    var out = fetch(this.HOST_URL, {\n      method: \"GLOB\",\n      headers: JSON_HEADERS,\n      body: JSON.stringify(path)\n    }).then(res => res.json());\n    return out;\n  }\n\n\n}\n"],"sourceRoot":""}