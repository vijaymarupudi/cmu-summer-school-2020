import pickle

from nltk import ViterbiParser
from nltk import PCFG

grammar = pickle.load(open('learners/grammar.pickle', 'rb'))

grammar_old = PCFG.fromstring("""
    S -> NT38 NT73 [0.00218381]
    NT38 -> NT13 UnaryNT12 [1.0]
    NT13 -> UnaryNT11 Digit [0.983932]
    UnaryNT11 -> '-' [1.0]
    Digit -> '7' [0.0909933]
    UnaryNT12 -> '+' [1.0]
    NT73 -> NT67 UnaryNT3 [1.0]
    NT67 -> NT16 UnaryNT4 [1.0]
    NT16 -> UnaryNT1 NT13 [1.0]
    UnaryNT1 -> '(' [0.994503]
    Digit -> '3' [0.086164]
    UnaryNT4 -> 'x' [1.0]
    UnaryNT3 -> ')' [0.982952]
    S -> '8' [0.00959646]
    S -> NT13 UnaryNT4 [0.0246371]
    NT13 -> NT13 NT13 [0.0160676]
    S -> NT94 NT28 [0.00144562]
    NT94 -> NT38 NT73 [1.0]
    NT28 -> UnaryNT11 NT18 [1.0]
    NT18 -> NT16 UnaryNT3 [0.998724]
    S -> Digit NT28 [0.00753568]
    Digit -> '8' [0.082603]
    S -> NT21 NT15 [0.00498278]
    NT21 -> NT13 UnaryNT4 [1.0]
    NT15 -> UnaryNT12 Digit [0.988942]
    S -> Digit NT15 [0.0125492]
    S -> Digit Digit [0.0239296]
    Digit -> '1' [0.147157]
    Digit -> '5' [0.0848794]
    S -> NT21 NT17 [0.013718]
    NT17 -> UnaryNT5 NT13 [1.0]
    UnaryNT5 -> '/' [1.0]
    S -> Digit NT17 [0.0202079]
    Digit -> Digit Digit [0.0933999]
    S -> 'x' [0.0183317]
    S -> NT25 NT15 [0.00273745]
    NT25 -> Digit UnaryNT4 [1.0]
    S -> '2' [0.0119033]
    S -> NT25 NT39 [0.00295276]
    NT39 -> NT15 NT13 [1.0]
    S -> Digit NT13 [0.0211922]
    Digit -> '2' [0.0964894]
    S -> UnaryNT1 NT383 [0.000184547]
    NT383 -> NT110 NT79 [1.0]
    NT110 -> NT25 NT39 [1.0]
    NT79 -> UnaryNT3 NT14 [1.0]
    NT14 -> UnaryNT5 Digit [1.0]
    S -> NT140 NT79 [0.000984252]
    NT140 -> UnaryNT1 NT37 [1.0]
    NT37 -> Digit NT13 [1.0]
    S -> Digit NT20 [0.0135335]
    NT20 -> UnaryNT4 NT14 [1.0]
    S -> NT13 NT14 [0.0228223]
    S -> UnaryNT11 Digit [0.120079]
    Digit -> '6' [0.0902779]
    S -> NT13 NT28 [0.00827387]
    S -> NT13 NT17 [0.0210384]
    S -> Digit NT14 [0.0228223]
    S -> NT33 UnaryNT9 [0.00193775]
    NT33 -> Digit NT15 [1.0]
    UnaryNT9 -> 'y' [1.0]
    S -> NT81 NT13 [0.00286048]
    NT81 -> NT33 UnaryNT9 [1.0]
    S -> '1' [0.0111959]
    S -> Digit UnaryNT10 [0.000369094]
    UnaryNT10 -> 'Y' [1.0]
    S -> NT266 NT14 [0.0000615157]
    NT266 -> Digit UnaryNT10 [1.0]
    S -> 'Y' [0.000369094]
    Digit -> '9' [0.0766679]
    S -> NT22 NT15 [0.00279897]
    NT22 -> Digit UnaryNT9 [1.0]
    S -> NT106 NT28 [0.000153789]
    NT106 -> NT22 NT15 [1.0]
    S -> NT13 NT15 [0.0159941]
    S -> NT13 NT13 [0.0185162]
    S -> NT22 NT39 [0.00224532]
    Digit -> '4' [0.0913511]
    S -> Digit UnaryNT9 [0.0255598]
    S -> NT22 NT14 [0.0130721]
    S -> 'y' [0.0184855]
    S -> NT38 NT20 [0.00193775]
    S -> NT13 NT23 [0.00719734]
    NT23 -> UnaryNT7 Digit [0.956388]
    UnaryNT7 -> '*' [1.0]
    S -> NT274 NT86 [0.000123031]
    NT274 -> NT172 NT20 [1.0]
    NT172 -> NT16 UnaryNT12 [1.0]
    NT86 -> UnaryNT3 NT23 [1.0]
    S -> NT341 NT14 [0.000153789]
    NT341 -> NT274 NT86 [1.0]
    S -> NT89 NT28 [0.00101501]
    NT89 -> NT38 NT20 [1.0]
    S -> '5' [0.00990404]
    S -> UnaryNT4 NT14 [0.00925812]
    S -> Digit NT23 [0.00916585]
    S -> NT20 NT23 [0.00888903]
    S -> NT40 NT92 [0.000922736]
    NT40 -> Digit UnaryNT12 [1.0]
    NT92 -> UnaryNT1 NT90 [1.0]
    NT90 -> NT35 UnaryNT3 [1.0]
    NT35 -> UnaryNT9 NT17 [1.0]
    S -> NT117 NT13 [0.00107653]
    NT117 -> NT40 NT92 [1.0]
    S -> UnaryNT9 NT17 [0.00639764]
    S -> UnaryNT11 NT26 [0.00375246]
    NT26 -> UnaryNT9 NT14 [1.0]
    S -> NT54 NT23 [0.000338337]
    NT54 -> UnaryNT11 NT26 [1.0]
    S -> NT19 NT14 [0.000984252]
    NT19 -> NT13 UnaryNT9 [1.0]
    S -> NT152 NT23 [0.000399852]
    NT152 -> NT19 NT14 [1.0]
    S -> NT13 UnaryNT9 [0.0281435]
    S -> NT19 NT17 [0.0145177]
    S -> '9' [0.00888903]
    S -> NT20 NT29 [0.00147638]
    NT29 -> UnaryNT12 NT18 [0.985335]
    S -> NT20 NT77 [0.00104577]
    NT77 -> NT29 NT15 [1.0]
    S -> '6' [0.00882751]
    S -> NT40 NT65 [0.00190699]
    NT65 -> NT63 UnaryNT3 [1.0]
    NT63 -> UnaryNT1 NT32 [1.0]
    NT32 -> UnaryNT4 NT17 [1.0]
    S -> NT100 NT13 [0.00172244]
    NT100 -> NT40 NT65 [1.0]
    S -> '0' [0.0135335]
    S -> UnaryNT4 NT17 [0.00596703]
    S -> Digit NT31 [0.00565945]
    Digit -> '0' [0.0600172]
    NT31 -> UnaryNT7 NT18 [0.996815]
    S -> NT32 NT31 [0.00529035]
    S -> '7' [0.009781]
    S -> NT38 NT65 [0.00144562]
    S -> NT99 NT15 [0.00113804]
    NT99 -> NT38 NT65 [1.0]
    S -> '3' [0.0100271]
    S -> Digit NT30 [0.00756644]
    NT30 -> UnaryNT5 UnaryNT9 [1.0]
    S -> NT46 NT47 [0.00719734]
    NT46 -> Digit NT30 [1.0]
    NT47 -> UnaryNT7 UnaryNT9 [1.0]
    S -> NT13 NT30 [0.00778174]
    S -> NT45 NT47 [0.00747416]
    NT45 -> NT13 NT30 [1.0]
    S -> NT13 NT27 [0.00725886]
    NT27 -> UnaryNT5 UnaryNT4 [1.0]
    S -> NT44 NT52 [0.00756644]
    NT44 -> NT13 NT27 [1.0]
    NT52 -> UnaryNT7 UnaryNT4 [1.0]
    S -> Digit NT27 [0.00753568]
    S -> NT43 NT52 [0.00501353]
    NT43 -> Digit NT27 [1.0]
    S -> Digit UnaryNT4 [0.0233145]
    S -> NT19 NT15 [0.00556718]
    S -> NT19 NT39 [0.00322958]
    S -> NT16 NT215 [0.0000922736]
    NT215 -> NT15 NT79 [1.0]
    S -> NT55 NT215 [0.000123031]
    NT55 -> NT16 UnaryNT9 [1.0]
    S -> NT16 NT327 [0.000123031]
    NT327 -> NT215 NT13 [1.0]
    S -> NT55 NT327 [0.000153789]
    S -> NT24 NT13 [0.00043061]
    NT24 -> NT13 NT15 [1.0]
    S -> NT19 NT23 [0.000215305]
    S -> NT284 NT86 [0.0000922736]
    NT284 -> NT16 NT15 [1.0]
    S -> NT268 NT86 [0.000123031]
    NT268 -> NT55 NT15 [1.0]
    S -> NT56 NT15 [0.000215305]
    NT56 -> Digit NT23 [1.0]
    S -> NT374 NT15 [0.0000922736]
    NT374 -> NT268 NT86 [1.0]
    S -> NT238 NT15 [0.000369094]
    NT238 -> NT235 NT86 [1.0]
    NT235 -> UnaryNT1 NT179 [1.0]
    NT179 -> NT88 NT15 [1.0]
    NT88 -> UnaryNT11 UnaryNT9 [1.0]
    S -> NT238 NT39 [0.000123031]
    S -> NT235 NT86 [0.0000922736]
    S -> NT263 NT233 [0.0000922736]
    NT263 -> NT88 NT23 [1.0]
    NT233 -> NT15 NT23 [1.0]
    S -> NT263 NT15 [0.000123031]
    S -> NT263 NT39 [0.000123031]
    S -> NT88 NT23 [0.000123031]
    S -> NT88 NT194 [0.000215305]
    NT194 -> NT23 NT14 [1.0]
    S -> NT280 NT23 [0.000184547]
    NT280 -> NT88 NT194 [1.0]
    S -> NT13 NT647 [0.0000307579]
    NT647 -> NT226 NT28 [1.0]
    NT226 -> UnaryNT5 UnaryNT1 [1.0]
    UnaryNT3 -> UnaryNT3 UnaryNT3 [0.0170476]
    S -> NT19 NT647 [0.0000307579]
    S -> NT140 NT116 [0.0000922736]
    NT116 -> UnaryNT3 NT17 [1.0]
    S -> NT55 NT421 [0.000123031]
    NT421 -> NT39 NT116 [1.0]
    S -> NT41 NT211 [0.000153789]
    NT41 -> Digit NT17 [1.0]
    NT211 -> NT161 NT181 [1.0]
    NT161 -> UnaryNT11 UnaryNT1 [1.0]
    NT181 -> NT41 UnaryNT3 [1.0]
    S -> NT48 NT320 [0.000276821]
    NT48 -> NT19 NT17 [1.0]
    NT320 -> NT303 NT312 [1.0]
    NT303 -> UnaryNT12 UnaryNT1 [1.0]
    NT312 -> NT181 NT211 [1.0]
    S -> NT41 NT28 [0.0000922736]
    S -> UnaryNT9 NT320 [0.0000307579]
    S -> NT736 NT211 [0.0000307579]
    NT736 -> UnaryNT9 NT29 [1.0]
    S -> UnaryNT9 NT594 [0.0000615157]
    NT594 -> NT13 NT211 [1.0]
    S -> UnaryNT9 NT61 [0.000123031]
    NT61 -> NT13 NT28 [1.0]
    S -> UnaryNT9 NT24 [0.000153789]
    S -> NT530 NT79 [0.0000922736]
    NT530 -> UnaryNT1 NT123 [1.0]
    NT123 -> NT22 NT39 [1.0]
    S -> NT34 NT36 [0.000184547]
    NT34 -> Digit NT14 [1.0]
    NT36 -> NT13 NT14 [1.0]
    S -> NT51 NT397 [0.0000615157]
    NT51 -> NT22 NT14 [1.0]
    NT397 -> NT170 NT36 [1.0]
    NT170 -> NT15 NT14 [1.0]
    S -> UnaryNT9 NT397 [0.000123031]
    S -> NT40 NT57 [0.00230684]
    NT57 -> NT55 UnaryNT3 [1.0]
    S -> Digit NT19 [0.00295276]
    S -> NT87 NT13 [0.00163017]
    NT87 -> Digit NT19 [1.0]
    S -> NT21 NT39 [0.0037217]
    S -> NT35 NT29 [0.00126107]
    S -> NT35 NT77 [0.000276821]
    S -> NT35 NT31 [0.00470595]
    S -> NT13 NT31 [0.00676673]
    S -> NT20 NT15 [0.000891978]
    S -> NT20 NT39 [0.00113804]
    S -> NT35 NT15 [0.00212229]
    S -> NT35 NT39 [0.00258366]
    S -> NT54 NT39 [0.000891978]
    S -> Digit NT62 [0.00178396]
    NT62 -> NT58 NT59 [1.0]
    NT58 -> UnaryNT7 NT16 [1.0]
    NT59 -> NT14 UnaryNT3 [1.0]
    S -> NT54 NT62 [0.00227608]
    S -> NT253 NT14 [0.0000922736]
    NT253 -> NT54 NT31 [1.0]
    S -> UnaryNT1 NT347 [0.000246063]
    NT347 -> NT51 NT79 [1.0]
    S -> UnaryNT9 NT500 [0.0000922736]
    NT500 -> NT31 NT17 [1.0]
    S -> UnaryNT10 NT17 [0.000123031]
    S -> NT308 NT31 [0.000153789]
    NT308 -> UnaryNT10 NT17 [1.0]
    S -> UnaryNT8 NT14 [0.0000615157]
    UnaryNT8 -> 'X' [1.0]
    S -> NT559 NT23 [0.0000307579]
    NT559 -> UnaryNT8 NT14 [1.0]
    S -> 'X' [0.0000922736]
    S -> NT38 NT92 [0.00104577]
    S -> NT133 NT28 [0.000461368]
    NT133 -> NT38 NT92 [1.0]
    S -> '4' [0.0123647]
    S -> NT24 UnaryNT9 [0.00289124]
    S -> NT78 NT28 [0.000645915]
    NT78 -> NT24 UnaryNT9 [1.0]
    S -> NT22 NT29 [0.00316806]
    S -> NT22 NT66 [0.00132259]
    NT66 -> NT29 NT28 [1.0]
    S -> NT24 UnaryNT4 [0.00261442]
    S -> NT80 NT28 [0.00104577]
    NT80 -> NT24 UnaryNT4 [1.0]
    S -> NT80 NT15 [0.00199926]
    S -> NT25 NT24 [0.00144562]
    S -> NT95 NT13 [0.00129183]
    NT95 -> NT40 NT57 [1.0]
    S -> NT13 NT160 [0.000830463]
    NT160 -> UnaryNT6 Digit [1.0]
    UnaryNT6 -> '.' [1.0]
    S -> NT21 NT29 [0.00193775]
    S -> NT21 NT66 [0.00153789]
    S -> NT32 NT15 [0.00150714]
    S -> NT32 NT39 [0.00119956]
    S -> NT38 NT26 [0.00119956]
    S -> NT111 NT28 [0.000830463]
    NT111 -> NT38 NT26 [1.0]
    S -> UnaryNT9 NT14 [0.00575172]
    S -> NT26 NT23 [0.00599779]
    S -> NT26 NT15 [0.00113804]
    S -> NT26 NT39 [0.00184547]
    S -> NT44 NT23 [0.000153789]
    S -> NT44 NT185 [0.00043061]
    NT185 -> NT58 NT182 [1.0]
    NT182 -> NT27 UnaryNT3 [1.0]
    S -> NT13 NT185 [0.0005844]
    S -> Digit NT139 [0.000738189]
    NT139 -> UnaryNT7 NT121 [1.0]
    NT121 -> NT115 Digit [1.0]
    NT115 -> NT104 UnaryNT2 [1.0]
    NT104 -> NT101 UnaryNT3 [1.0]
    NT101 -> UnaryNT1 NT43 [1.0]
    UnaryNT2 -> '^' [1.0]
    S -> NT33 UnaryNT4 [0.00341412]
    S -> NT64 NT13 [0.00439838]
    NT64 -> NT33 UnaryNT4 [1.0]
    S -> NT78 NT15 [0.00159941]
    S -> Digit NT160 [0.000553642]
    S -> NT89 NT15 [0.00159941]
    S -> UnaryNT11 UnaryNT9 [0.00242987]
    S -> UnaryNT11 NT35 [0.00123031]
    S -> NT38 NT57 [0.00215305]
    S -> NT96 NT15 [0.000676673]
    NT96 -> NT38 NT57 [1.0]
    S -> NT26 NT29 [0.00135335]
    S -> NT26 NT77 [0.000830463]
    S -> NT32 NT29 [0.00153789]
    S -> NT32 NT77 [0.000707431]
    S -> NT133 NT15 [0.000522884]
    S -> NT40 NT73 [0.00156865]
    S -> NT122 NT13 [0.000738189]
    NT122 -> NT40 NT73 [1.0]
    S -> NT18 NT17 [0.000246063]
    S -> UnaryNT1 NT683 [0.0000307579]
    NT683 -> NT207 NT116 [1.0]
    NT207 -> NT122 NT13 [1.0]
    S -> NT41 NT493 [0.0000922736]
    NT493 -> NT465 NT211 [1.0]
    NT465 -> UnaryNT12 NT50 [1.0]
    NT50 -> NT21 NT17 [1.0]
    S -> NT36 NT493 [0.0000307579]
    S -> NT295 NT211 [0.0000615157]
    NT295 -> NT36 NT227 [1.0]
    NT227 -> UnaryNT12 UnaryNT4 [1.0]
    S -> NT28 NT14 [0.000123031]
    S -> NT295 NT332 [0.0000922736]
    NT332 -> UnaryNT11 NT220 [1.0]
    NT220 -> NT16 NT59 [1.0]
    S -> NT210 NT31 [0.000369094]
    NT210 -> NT28 NT14 [1.0]
    S -> NT319 NT390 [0.000153789]
    NT319 -> NT16 NT309 [1.0]
    NT309 -> NT14 NT227 [1.0]
    NT390 -> NT332 NT31 [1.0]
    S -> NT276 NT23 [0.0000307579]
    NT276 -> NT210 NT31 [1.0]
    S -> NT398 NT23 [0.0000307579]
    NT398 -> NT319 NT390 [1.0]
    S -> NT481 NT31 [0.000123031]
    NT481 -> NT464 NT59 [1.0]
    NT464 -> NT319 NT15 [1.0]
    S -> UnaryNT4 NT31 [0.000461368]
    S -> NT34 NT31 [0.000184547]
    S -> UnaryNT11 UnaryNT4 [0.0025529]
    S -> NT220 NT17 [0.000307579]
    S -> UnaryNT11 NT32 [0.00206078]
    S -> NT25 NT29 [0.00184547]
    S -> NT13 NT29 [0.000492126]
    NT29 -> NT29 NT29 [0.0146654]
    S -> NT25 NT13 [0.00203002]
    S -> NT409 NT165 [0.0000922736]
    NT409 -> NT63 NT15 [1.0]
    NT165 -> UnaryNT3 NT31 [1.0]
    S -> NT208 NT165 [0.000184547]
    NT208 -> UnaryNT1 NT33 [1.0]
    S -> NT566 NT165 [0.0000615157]
    NT566 -> NT144 NT24 [1.0]
    NT144 -> UnaryNT1 NT53 [1.0]
    NT53 -> UnaryNT11 NT20 [1.0]
    NT18 -> NT18 NT18 [0.00127592]
    S -> NT566 NT345 [0.0000307579]
    NT345 -> NT165 NT17 [1.0]
    NT31 -> NT31 NT31 [0.00318471]
    S -> NT208 NT345 [0.0000615157]
    S -> NT438 NT305 [0.000123031]
    NT438 -> NT402 NT71 [1.0]
    NT402 -> NT144 NT23 [1.0]
    NT23 -> NT23 NT23 [0.0436118]
    NT71 -> NT13 NT23 [0.9]
    NT305 -> NT233 NT116 [1.0]
    S -> NT311 NT305 [0.000184547]
    NT311 -> UnaryNT1 NT56 [1.0]
    S -> NT653 NT651 [0.0000307579]
    NT653 -> NT402 NT24 [1.0]
    NT651 -> NT23 NT116 [1.0]
    S -> NT653 NT116 [0.0000307579]
    S -> NT16 NT417 [0.000153789]
    NT417 -> NT199 NT116 [1.0]
    NT199 -> NT20 NT24 [1.0]
    S -> NT208 NT651 [0.0000307579]
    S -> NT208 NT116 [0.0000615157]
    S -> NT161 NT413 [0.000153789]
    NT413 -> NT33 NT79 [1.0]
    S -> NT519 NT79 [0.0000922736]
    NT519 -> UnaryNT11 NT377 [1.0]
    NT377 -> NT67 NT24 [1.0]
    S -> NT513 NT14 [0.0000615157]
    NT513 -> UnaryNT11 NT73 [1.0]
    S -> UnaryNT1 NT672 [0.0000307579]
    NT672 -> NT513 NT541 [1.0]
    NT541 -> NT59 NT14 [1.0]
    S -> NT220 NT14 [0.000123031]
    S -> NT291 NT79 [0.000338337]
    NT291 -> UnaryNT1 NT49 [1.0]
    NT49 -> Digit NT20 [1.0]
    S -> NT88 NT31 [0.000246063]
    S -> NT212 NT79 [0.000307579]
    NT212 -> UnaryNT1 NT34 [1.0]
    S -> NT34 NT23 [0.000707431]
    S -> NT22 NT13 [0.00249139]
    S -> NT22 NT24 [0.00227608]
    S -> Digit NT29 [0.000307579]
    S -> NT78 NT29 [0.000153789]
    S -> Digit NT77 [0.000184547]
    S -> NT78 NT77 [0.0000922736]
    S -> Digit NT24 [0.000123031]
    S -> NT78 NT24 [0.000123031]
    S -> NT19 NT29 [0.00316806]
    S -> NT19 NT13 [0.00224532]
    S -> NT19 NT24 [0.00212229]
    S -> Digit NT21 [0.00178396]
    S -> Digit NT83 [0.000492126]
    NT83 -> NT21 NT15 [1.0]
    S -> Digit NT98 [0.000276821]
    NT98 -> NT21 NT39 [1.0]
    S -> NT114 NT13 [0.000984252]
    NT114 -> Digit NT21 [1.0]
    S -> NT19 NT66 [0.000768947]
    S -> NT20 NT66 [0.000922736]
    S -> NT20 NT24 [0.000707431]
    S -> NT35 NT66 [0.000922736]
    S -> NT54 NT24 [0.000615157]
    S -> NT40 NT20 [0.00203002]
    S -> NT97 NT13 [0.0019685]
    NT97 -> NT40 NT20 [1.0]
    S -> NT99 NT28 [0.00113804]
    S -> NT19 NT30 [0.000799705]
    S -> NT22 NT30 [0.000369094]
    S -> NT96 NT28 [0.000830463]
    S -> Digit NT460 [0.000123031]
    NT460 -> NT102 NT13 [1.0]
    NT102 -> UnaryNT11 UnaryNT4 [1.0]
    S -> NT40 NT26 [0.00110728]
    S -> NT112 NT13 [0.00150714]
    NT112 -> NT40 NT26 [1.0]
    S -> NT26 NT66 [0.000522884]
    S -> NT26 NT24 [0.00043061]
    S -> NT111 NT15 [0.00110728]
    S -> NT162 NT15 [0.000707431]
    NT162 -> NT13 NT53 [1.0]
    S -> UnaryNT11 NT20 [0.00261442]
    S -> NT53 NT62 [0.00184547]
    S -> NT13 NT62 [0.00252215]
    S -> NT45 NT31 [0.000184547]
    S -> NT55 NT349 [0.000246063]
    NT349 -> NT30 NT116 [1.0]
    S -> NT25 NT27 [0.000123031]
    S -> NT21 NT27 [0.000123031]
    S -> NT19 NT77 [0.0011688]
    S -> NT492 NT664 [0.0000307579]
    NT492 -> NT172 NT316 [1.0]
    NT316 -> NT57 NT28 [1.0]
    NT664 -> UnaryNT5 NT57 [1.0]
    S -> NT324 NT664 [0.0000307579]
    NT324 -> NT16 NT28 [1.0]
    S -> NT492 NT395 [0.0000307579]
    NT395 -> UnaryNT5 NT316 [1.0]
    S -> NT324 NT395 [0.0000307579]
    S -> NT508 NT29 [0.0000307579]
    NT508 -> NT492 NT395 [1.0]
    S -> NT523 NT29 [0.0000307579]
    NT523 -> NT324 NT395 [1.0]
    S -> NT508 NT432 [0.0000307579]
    UnaryNT1 -> UnaryNT1 UnaryNT1 [0.00549659]
    NT432 -> NT29 NT17 [1.0]
    S -> NT523 NT432 [0.0000307579]
    S -> NT21 NT77 [0.000522884]
    S -> UnaryNT1 NT721 [0.0000307579]
    NT721 -> NT197 NT86 [1.0]
    NT197 -> NT26 NT77 [1.0]
    S -> NT729 NT690 [0.0000307579]
    NT729 -> NT76 UnaryNT12 [1.0]
    NT76 -> NT26 NT23 [1.0]
    NT690 -> NT478 NT233 [1.0]
    NT478 -> NT471 UnaryNT3 [1.0]
    NT471 -> NT16 NT23 [1.0]
    S -> NT96 NT13 [0.000215305]
    S -> NT284 NT116 [0.0000307579]
    S -> NT268 NT116 [0.0000922736]
    S -> UnaryNT11 NT399 [0.000123031]
    NT399 -> NT284 UnaryNT3 [1.0]
    S -> UnaryNT11 NT452 [0.000123031]
    NT452 -> NT268 UnaryNT3 [1.0]
    S -> UnaryNT11 NT18 [0.0000307579]
    S -> NT293 UnaryNT3 [0.000215305]
    NT293 -> NT161 NT179 [1.0]
    S -> NT293 NT116 [0.000123031]
    S -> NT88 NT15 [0.000123031]
    S -> NT88 NT39 [0.0000615157]
    S -> NT22 NT77 [0.000553642]
    S -> NT38 NT183 [0.000338337]
    NT183 -> NT144 UnaryNT3 [1.0]
    S -> NT275 NT15 [0.0000615157]
    NT275 -> NT38 NT183 [1.0]
    S -> NT53 NT23 [0.000615157]
    S -> NT13 NT20 [0.000707431]
    S -> NT78 NT13 [0.000522884]
    S -> NT78 NT61 [0.0000307579]
    S -> NT37 NT28 [0.0000615157]
    S -> NT119 NT29 [0.0000307579]
    NT119 -> NT22 NT13 [1.0]
    S -> NT119 NT77 [0.0000307579]
    S -> NT108 NT13 [0.0000615157]
    NT108 -> NT19 NT29 [1.0]
    S -> NT124 NT29 [0.0000615157]
    NT124 -> NT19 NT13 [1.0]
    S -> NT96 NT29 [0.0000922736]
    S -> NT13 NT77 [0.0000922736]
    S -> NT103 NT13 [0.0000615157]
    NT103 -> NT22 NT29 [1.0]
    S -> NT125 NT13 [0.000123031]
    NT125 -> NT25 NT29 [1.0]
    S -> NT53 NT31 [0.000338337]
    S -> NT99 NT13 [0.0000307579]
    S -> NT172 NT581 [0.0000615157]
    NT581 -> NT73 NT17 [1.0]
    S -> NT94 NT15 [0.000399852]
    S -> NT514 NT79 [0.0000307579]
    NT514 -> UnaryNT1 NT26 [1.0]
    S -> NT574 NT23 [0.0000615157]
    NT574 -> NT514 NT79 [1.0]
    S -> NT51 NT23 [0.0000922736]
    S -> NT148 NT28 [0.0000615157]
    NT148 -> NT32 NT15 [1.0]
    S -> NT409 NT345 [0.0000615157]
    S -> NT679 NT345 [0.0000307579]
    NT679 -> NT144 NT15 [1.0]
    S -> NT53 NT15 [0.000276821]
    S -> NT53 NT39 [0.000399852]
    S -> NT445 NT79 [0.0000307579]
    NT445 -> NT16 NT20 [1.0]
    S -> NT67 NT446 [0.000123031]
    NT446 -> NT77 NT116 [1.0]
    S -> NT377 NT116 [0.000123031]
    S -> NT25 NT66 [0.000738189]
    S -> NT324 NT23 [0.0000922736]
    S -> NT71 NT520 [0.0000307579]
    NT520 -> UnaryNT11 NT478 [1.0]
    S -> NT13 NT520 [0.0000615157]
    S -> NT13 NT157 [0.00086122]
    NT157 -> NT54 NT15 [1.0]
    S -> NT21 NT13 [0.00178396]
    S -> NT21 NT24 [0.00209154]
    S -> NT67 NT421 [0.0000307579]
    S -> NT322 NT86 [0.000276821]
    NT322 -> UnaryNT1 NT158 [1.0]
    NT158 -> NT26 NT15 [1.0]
    S -> NT76 NT233 [0.0000922736]
    S -> NT76 NT15 [0.0000922736]
    S -> UnaryNT9 NT15 [0.000123031]
    S -> UnaryNT9 NT39 [0.0000922736]
    S -> NT54 NT15 [0.0005844]
    S -> NT54 NT31 [0.000399852]
    S -> NT648 NT79 [0.0000307579]
    NT648 -> UnaryNT1 NT20 [1.0]
    S -> UnaryNT4 NT754 [0.0000307579]
    NT754 -> NT226 NT750 [1.0]
    NT750 -> NT56 UnaryNT3 [1.0]
    S -> NT40 NT183 [0.000522884]
    S -> Digit NT53 [0.000799705]
    S -> NT131 NT13 [0.00126107]
    NT131 -> Digit NT53 [1.0]
    S -> NT54 NT29 [0.000123031]
    S -> NT54 NT13 [0.000399852]
    S -> NT67 NT432 [0.0000615157]
    S -> UnaryNT11 NT739 [0.0000307579]
    NT739 -> NT67 NT597 [1.0]
    NT597 -> NT29 NT14 [1.0]
    S -> NT55 NT432 [0.0000307579]
    S -> UnaryNT11 NT668 [0.0000307579]
    NT668 -> NT55 NT597 [1.0]
    S -> NT25 NT77 [0.000338337]
    S -> NT212 NT116 [0.00043061]
    S -> NT208 NT86 [0.000153789]
    S -> UnaryNT1 NT605 [0.0000615157]
    NT605 -> NT177 NT86 [1.0]
    NT177 -> NT20 NT77 [1.0]
    S -> NT32 NT23 [0.000184547]
    S -> NT56 NT31 [0.0000307579]
    S -> NT351 NT31 [0.0000615157]
    NT351 -> NT32 NT23 [1.0]
    S -> NT50 NT23 [0.0000615157]
    S -> NT50 NT31 [0.0000615157]
    S -> NT25 NT17 [0.0000307579]
    S -> Digit NT385 [0.0000307579]
    NT385 -> UnaryNT5 NT354 [1.0]
    NT354 -> NT140 UnaryNT3 [1.0]
    S -> NT21 NT385 [0.000153789]
    S -> NT36 NT23 [0.000184547]
    S -> NT49 NT23 [0.0000922736]
    S -> NT102 NT31 [0.000153789]
    S -> NT45 NT23 [0.000153789]
    S -> NT46 NT23 [0.000123031]
    S -> NT46 NT31 [0.0000615157]
    S -> NT32 NT66 [0.000799705]
    S -> NT106 NT19 [0.0000922736]
    S -> NT75 UnaryNT9 [0.0000922736]
    NT75 -> NT19 NT15 [1.0]
    NT15 -> NT15 NT15 [0.0110581]
    S -> NT246 UnaryNT9 [0.000184547]
    NT246 -> Digit NT75 [1.0]
    S -> NT40 UnaryNT9 [0.000492126]
    S -> NT87 NT526 [0.0000922736]
    NT526 -> UnaryNT12 UnaryNT9 [1.0]
    S -> NT200 NT15 [0.000123031]
    NT200 -> NT40 UnaryNT9 [1.0]
    S -> Digit NT75 [0.000338337]
    S -> NT200 NT28 [0.000123031]
    S -> NT87 NT28 [0.000153789]
    S -> NT200 NT88 [0.0000922736]
    S -> NT87 NT88 [0.000123031]
    S -> NT470 NT23 [0.0000307579]
    NT470 -> UnaryNT1 NT103 [1.0]
    S -> NT103 NT61 [0.0000922736]
    S -> NT33 NT13 [0.0000922736]
    S -> NT122 NT28 [0.0000922736]
    S -> NT21 NT23 [0.000123031]
    S -> NT376 NT13 [0.0000922736]
    NT376 -> NT21 NT23 [1.0]
    S -> NT56 NT13 [0.000215305]
    S -> NT38 NT290 [0.000276821]
    NT290 -> NT232 UnaryNT3 [1.0]
    NT232 -> UnaryNT1 NT54 [1.0]
    S -> NT13 NT54 [0.000369094]
    S -> NT53 NT29 [0.000338337]
    S -> NT53 NT13 [0.000338337]
    S -> NT53 NT24 [0.000399852]
    S -> NT470 NT14 [0.0000922736]
    S -> NT43 NT23 [0.000123031]
    S -> NT101 NT79 [0.000184547]
    S -> NT43 NT369 [0.0000615157]
    NT369 -> UnaryNT7 NT104 [1.0]
    S -> NT237 NT104 [0.0000307579]
    NT237 -> Digit UnaryNT7 [1.0]
    S -> NT53 NT66 [0.0000615157]
    S -> NT201 NT86 [0.0000307579]
    NT201 -> Digit NT139 [1.0]
    S -> NT44 NT369 [0.0000615157]
    S -> NT13 NT369 [0.0000922736]
    S -> NT257 NT27 [0.000123031]
    NT257 -> NT255 NT37 [1.0]
    NT255 -> NT237 NT115 [1.0]
    S -> NT43 NT44 [0.0000615157]
    S -> NT257 NT139 [0.000338337]
    S -> NT43 NT221 [0.000676673]
    NT221 -> NT13 NT139 [1.0]
    S -> NT536 NT622 [0.0000307579]
    NT536 -> NT44 NT416 [1.0]
    NT416 -> UnaryNT7 UnaryNT1 [1.0]
    NT622 -> UnaryNT11 NT104 [1.0]
    S -> NT600 NT622 [0.0000307579]
    NT600 -> NT13 NT416 [1.0]
    S -> NT558 NT79 [0.0000922736]
    NT558 -> UnaryNT1 NT201 [1.0]
    S -> NT115 Digit [0.000307579]
    S -> NT121 NT350 [0.0000307579]
    NT350 -> UnaryNT11 NT121 [1.0]
    S -> NT43 NT350 [0.000215305]
    S -> NT95 NT193 [0.000215305]
    NT193 -> UnaryNT11 NT57 [1.0]
    S -> Digit NT193 [0.000461368]
    S -> NT113 NT29 [0.0000307579]
    NT113 -> NT25 NT13 [1.0]
    S -> NT113 NT77 [0.0000307579]
    S -> NT678 NT79 [0.0000307579]
    NT678 -> UnaryNT1 NT155 [1.0]
    NT155 -> NT25 NT24 [1.0]
    S -> NT189 NT79 [0.0000615157]
    NT189 -> UnaryNT1 NT113 [1.0]
    S -> NT83 NT28 [0.0000922736]
    S -> NT230 NT13 [0.0000922736]
    NT230 -> NT40 NT183 [1.0]
    S -> NT13 NT60 [0.000123031]
    NT60 -> NT20 NT23 [1.0]
    S -> NT55 NT279 [0.000338337]
    NT279 -> NT13 NT79 [1.0]
    S -> NT232 NT116 [0.0000922736]
    S -> NT274 NT210 [0.0000307579]
    S -> NT16 NT210 [0.0000307579]
    S -> NT274 NT463 [0.0000615157]
    NT463 -> NT210 NT23 [1.0]
    S -> NT16 NT463 [0.0000615157]
    S -> NT590 NT194 [0.0000307579]
    NT590 -> NT274 NT210 [1.0]
    S -> NT660 NT194 [0.0000307579]
    NT660 -> NT16 NT210 [1.0]
    S -> NT172 NT601 [0.0000615157]
    NT601 -> NT190 NT512 [1.0]
    NT190 -> NT20 NT15 [1.0]
    NT512 -> NT79 NT194 [1.0]
    S -> NT457 NT194 [0.0000307579]
    NT457 -> NT16 NT215 [1.0]
    S -> NT655 NT541 [0.0000615157]
    NT655 -> UnaryNT1 NT624 [1.0]
    NT624 -> Digit NT399 [1.0]
    S -> NT648 NT512 [0.0000307579]
    S -> NT172 NT329 [0.000276821]
    NT329 -> NT65 NT31 [1.0]
    S -> NT172 NT405 [0.000153789]
    NT405 -> NT144 NT165 [1.0]
    S -> NT521 NT165 [0.0000307579]
    NT521 -> NT16 NT53 [1.0]
    S -> NT521 NT345 [0.0000615157]
    S -> NT13 NT53 [0.000615157]
    S -> NT20 NT13 [0.000461368]
    S -> NT26 NT13 [0.00043061]
    S -> NT40 NT290 [0.0000615157]
    S -> Digit NT54 [0.000184547]
    S -> Digit NT218 [0.000307579]
    NT218 -> NT54 NT13 [1.0]
    S -> NT328 NT35 [0.000276821]
    NT328 -> NT46 UnaryNT7 [1.0]
    S -> NT445 NT116 [0.0000922736]
    S -> NT95 NT15 [0.000123031]
    S -> NT102 NT39 [0.000399852]
    S -> UnaryNT4 NT23 [0.0000615157]
    S -> UnaryNT4 NT194 [0.0000615157]
    S -> NT76 NT39 [0.0000307579]
    S -> NT89 NT13 [0.000276821]
    S -> NT265 NT86 [0.000276821]
    NT265 -> UnaryNT1 NT109 [1.0]
    NT109 -> NT25 NT15 [1.0]
    S -> NT286 NT233 [0.0000922736]
    NT286 -> NT25 NT23 [1.0]
    S -> NT286 NT15 [0.000123031]
    S -> NT265 NT79 [0.000153789]
    S -> NT49 NT170 [0.000215305]
    S -> NT140 NT165 [0.000215305]
    S -> NT440 NT165 [0.000123031]
    NT440 -> NT67 NT39 [1.0]
    S -> NT21 NT31 [0.000276821]
    S -> NT228 NT31 [0.000645915]
    NT228 -> UnaryNT1 NT117 [1.0]
    S -> NT95 NT39 [0.0000307579]
    S -> NT13 UnaryNT10 [0.000246063]
    S -> NT333 NT13 [0.0000307579]
    NT333 -> NT13 UnaryNT10 [1.0]
    S -> NT13 NT308 [0.0000307579]
    S -> NT387 NT165 [0.000153789]
    NT387 -> UnaryNT1 NT382 [1.0]
    NT382 -> NT40 NT232 [1.0]
    S -> NT387 NT345 [0.0000307579]
    S -> NT74 NT14 [0.0000922736]
    NT74 -> NT13 NT31 [1.0]
    S -> NT256 NT86 [0.00043061]
    NT256 -> UnaryNT1 NT112 [1.0]
    S -> NT200 NT13 [0.0000307579]
    S -> UnaryNT1 NT586 [0.0000615157]
    NT586 -> NT95 NT14 [1.0]
    S -> NT600 NT576 [0.0000307579]
    NT576 -> NT102 UnaryNT3 [1.0]
    S -> NT536 NT576 [0.0000615157]
    S -> NT22 NT23 [0.000246063]
    S -> NT490 NT30 [0.0000307579]
    NT490 -> UnaryNT1 NT468 [1.0]
    NT468 -> NT46 UnaryNT3 [1.0]
    S -> NT756 UnaryNT3 [0.0000307579]
    NT756 -> Digit NT692 [1.0]
    NT692 -> NT226 NT665 [1.0]
    NT665 -> UnaryNT9 NT47 [1.0]
    S -> UnaryNT1 NT331 [0.000246063]
    NT331 -> NT114 NT79 [1.0]
    S -> NT338 NT23 [0.0000307579]
    NT338 -> UnaryNT1 NT331 [1.0]
    S -> NT56 NT14 [0.000184547]
    S -> NT22 NT251 [0.0000922736]
    NT251 -> NT248 UnaryNT3 [1.0]
    NT248 -> NT226 NT22 [1.0]
    S -> Digit NT251 [0.000307579]
    S -> NT269 NT47 [0.000123031]
    NT269 -> Digit NT251 [1.0]
    S -> NT81 NT19 [0.0000922736]
    S -> NT80 NT29 [0.0000307579]
    S -> NT34 NT47 [0.000153789]
    S -> NT34 NT52 [0.0000307579]
    S -> NT104 NT27 [0.000184547]
    S -> NT94 NT29 [0.0000307579]
    S -> NT153 NT13 [0.0000307579]
    NT153 -> NT26 NT29 [1.0]
    S -> NT71 NT14 [0.0000307579]
    S -> NT262 NT14 [0.0000307579]
    NT262 -> NT256 NT86 [1.0]
    S -> NT75 NT28 [0.000123031]
    S -> NT61 NT13 [0.0000922736]
    S -> NT360 NT13 [0.0000922736]
    NT360 -> NT75 NT28 [1.0]
    S -> NT321 NT17 [0.0000922736]
    NT321 -> NT36 NT23 [1.0]
    S -> NT244 NT17 [0.000123031]
    NT244 -> NT152 NT23 [1.0]
    S -> NT16 NT436 [0.000123031]
    NT436 -> NT26 NT116 [1.0]
    S -> UnaryNT10 NT14 [0.0000307579]
    S -> NT524 NT23 [0.0000615157]
    NT524 -> UnaryNT10 NT14 [1.0]
    S -> UnaryNT4 NT170 [0.000123031]
    S -> NT364 NT13 [0.0000922736]
    NT364 -> UnaryNT4 NT170 [1.0]
    S -> NT34 NT13 [0.000123031]
    S -> UnaryNT4 NT36 [0.000153789]
    S -> NT403 NT170 [0.0000307579]
    NT403 -> UnaryNT4 NT36 [1.0]
    S -> NT36 NT170 [0.0000615157]
    S -> NT172 NT549 [0.0000922736]
    NT549 -> NT57 NT215 [1.0]
    S -> NT208 NT79 [0.000276821]
    S -> NT102 NT15 [0.0000615157]
    S -> NT94 NT13 [0.000338337]
    S -> NT134 NT29 [0.000215305]
    NT134 -> NT21 NT13 [1.0]
    S -> NT188 NT13 [0.000215305]
    NT188 -> NT13 UnaryNT8 [1.0]
    S -> NT188 NT24 [0.0000615157]
    S -> NT13 UnaryNT8 [0.000399852]
    S -> NT188 NT17 [0.000307579]
    S -> NT81 NT28 [0.000123031]
    S -> NT81 NT15 [0.000123031]
    S -> NT144 NT116 [0.000215305]
    S -> NT44 NT31 [0.000123031]
    S -> NT25 NT23 [0.0000615157]
    S -> NT19 NT31 [0.0000307579]
    S -> UnaryNT11 NT84 [0.0000922736]
    NT84 -> NT32 NT31 [1.0]
    S -> NT140 NT86 [0.0000922736]
    S -> NT317 NT169 [0.0000615157]
    NT317 -> UnaryNT1 NT125 [1.0]
    NT169 -> NT13 NT86 [0.833333]
    S -> NT318 NT13 [0.0000307579]
    NT318 -> NT140 NT86 [1.0]
    S -> NT533 NT13 [0.0000307579]
    NT533 -> NT317 NT169 [1.0]
    S -> NT318 NT169 [0.0000307579]
    NT169 -> NT169 NT169 [0.166667]
    S -> NT318 NT196 [0.0000922736]
    NT196 -> NT169 NT14 [1.0]
    S -> NT317 NT196 [0.0000922736]
    S -> NT140 NT272 [0.0000307579]
    NT272 -> NT86 NT224 [1.0]
    NT224 -> NT196 NT15 [1.0]
    S -> NT317 NT224 [0.000123031]
    S -> NT311 NT224 [0.000123031]
    S -> NT189 NT272 [0.000399852]
    S -> NT580 NT15 [0.0000615157]
    NT580 -> NT318 NT14 [1.0]
    S -> NT361 NT15 [0.0000307579]
    NT361 -> NT56 NT14 [1.0]
    S -> NT34 NT15 [0.0000615157]
    S -> NT697 NT15 [0.0000307579]
    NT697 -> NT584 NT79 [1.0]
    NT584 -> NT567 NT71 [1.0]
    NT567 -> UnaryNT1 NT286 [1.0]
    NT71 -> NT71 NT71 [0.1]
    S -> NT584 NT633 [0.0000307579]
    NT633 -> NT279 NT15 [1.0]
    S -> NT567 NT633 [0.0000307579]
    S -> NT236 NT15 [0.000399852]
    NT236 -> NT189 NT79 [1.0]
    S -> NT49 NT363 [0.000153789]
    NT363 -> NT36 NT15 [1.0]
    S -> NT236 NT39 [0.0000615157]
    S -> NT236 NT23 [0.0000615157]
    S -> NT102 NT23 [0.0000307579]
    S -> UnaryNT1 NT241 [0.000553642]
    NT241 -> NT105 NT79 [1.0]
    NT105 -> NT81 NT13 [1.0]
    S -> NT13 NT551 [0.0000307579]
    NT551 -> NT102 NT15 [1.0]
    S -> NT45 NT548 [0.0000307579]
    NT548 -> NT58 NT336 [1.0]
    NT336 -> NT30 UnaryNT3 [1.0]
    S -> NT13 NT548 [0.0000615157]
    S -> NT237 NT563 [0.0000922736]
    NT563 -> NT490 NT557 [1.0]
    NT557 -> UnaryNT2 Digit [1.0]
    S -> NT404 NT454 [0.0000615157]
    NT404 -> NT16 NT336 [1.0]
    NT454 -> UnaryNT5 NT404 [1.0]
    S -> NT13 NT454 [0.0000615157]
    S -> NT96 NT24 [0.000123031]
    S -> NT21 NT61 [0.0000307579]
    S -> NT67 NT673 [0.0000307579]
    NT673 -> NT61 NT17 [1.0]
    S -> NT324 NT17 [0.0000615157]
    S -> UnaryNT1 NT585 [0.0000615157]
    NT585 -> NT138 NT86 [1.0]
    NT138 -> NT26 NT39 [1.0]
    S -> NT136 NT13 [0.0000307579]
    NT136 -> NT21 NT29 [1.0]
    S -> NT65 NT17 [0.0000307579]
    S -> NT42 NT31 [0.0000307579]
    NT42 -> NT13 NT17 [1.0]
    S -> NT547 NT31 [0.0000615157]
    NT547 -> NT65 NT17 [1.0]
    S -> NT307 NT86 [0.000307579]
    NT307 -> UnaryNT1 NT106 [1.0]
    S -> UnaryNT1 NT669 [0.0000307579]
    NT669 -> NT64 NT79 [1.0]
    S -> UnaryNT1 NT510 [0.0000922736]
    NT510 -> NT153 NT23 [1.0]
    S -> UnaryNT1 NT667 [0.0000307579]
    NT667 -> NT41 NT116 [1.0]
    S -> NT583 NT17 [0.0000615157]
    NT583 -> NT16 NT90 [1.0]
    S -> NT380 NT86 [0.000184547]
    NT380 -> UnaryNT1 NT163 [1.0]
    NT163 -> NT20 NT39 [1.0]
    S -> NT22 NT194 [0.000153789]
    S -> NT51 NT194 [0.0000922736]
    S -> NT539 NT215 [0.0000922736]
    NT539 -> NT284 UnaryNT4 [1.0]
    S -> NT34 NT170 [0.000246063]
    S -> NT363 NT593 [0.0000615157]
    NT593 -> NT20 NT170 [1.0]
    S -> NT295 NT170 [0.000184547]
    S -> UnaryNT1 NT621 [0.0000615157]
    NT621 -> NT159 NT116 [1.0]
    NT159 -> NT95 NT13 [1.0]
    S -> UnaryNT11 NT354 [0.0000615157]
    S -> NT612 UnaryNT3 [0.0000615157]
    NT612 -> NT161 NT159 [1.0]
    S -> UnaryNT11 NT57 [0.000246063]
    S -> NT161 NT588 [0.0000615157]
    NT588 -> NT88 UnaryNT3 [1.0]
    S -> NT36 NT31 [0.000215305]
    S -> NT21 NT28 [0.0000922736]
    S -> NT19 NT61 [0.0000615157]
""")


def tree_features(tree, path):
    ret = []
    node_str = ""
    for l in tree.leaves():
        node_str += l

    ret.append((('tree-label', path), tree.label()))
    ret.append((('value', path), node_str))

    print(len(tree))
    if len(tree) < 2:
        return ret

    left_rt = tree_features(tree[0], ('left-tree', path))
    right_rt = tree_features(tree[1], ('right-tree', path))

    return ret + left_rt + right_rt


if __name__ == "__main__":
    print(grammar)
    parser = ViterbiParser(grammar)

    sent = [c for c in "-7/2"]
    print(sent)
    for tree in parser.parse(sent):
        print(tree)
        print(tree_features(tree, 'some attribute'))
